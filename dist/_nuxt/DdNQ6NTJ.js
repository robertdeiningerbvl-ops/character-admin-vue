import{_ as j}from"./CEcF5dWm.js";import{f as T,c as q,ap as z,j as E,aE as I,l as L,a as N,o as w,w as n,B as o,_ as V,b as t,A as y,a4 as A,aF as m,i as O,k as U,C as G,D as H,G as J}from"./DhOLkSnF.js";import{_ as Q,a as W,b as X,c as Y}from"./DAqc9GYg.js";import{_ as Z}from"./CSbqei5V.js";import{_ as ee}from"./DAIKkUkW.js";import{_ as te}from"./DAeRr84W.js";import{_ as ae}from"./D0vBe5Vh.js";import{_ as oe}from"./Db__RPjw.js";import{_ as se}from"./BZLiX_8y.js";import{u as ne,g as re}from"./wj9UriJM.js";import{c as S}from"./45RcOEEf.js";import{o as le,n as D,s as P}from"./B-mCBPct.js";import{u as ie,b as me}from"./Bo5OMT4U.js";import{_ as C}from"./-rcGzxkB.js";import{f as F}from"./BmKy9gZZ.js";import"./CZg69nbc.js";import"./CwtpYSSp.js";import"./DPsBupTg.js";import"./9Rxep3Q5.js";import"./CLKxJTZi.js";import"./HRiyi1uV.js";import"./BrXYpapi.js";import"./BXSyqGa5.js";const ce=T({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})}},emits:["update:dialog","refresh"],setup(r,{emit:$}){const d=r,p=$,l=q({get(){return d.dialog},set(i){p("update:dialog",i)}}),v=()=>{l.value=!1},_=z("formRef"),x=le({name:P().nonempty(),desc:P(),state:D().min(0),sort:D().min(0)}),k=[{label:"启用",value:2},{label:"已删除",value:4}],e=E({loading:!1,avatarLoading:!1,form:{}}),b=I();async function g(){e.loading=!0;const i=S(e.form),{error:a}=await ne(i);a||(b.add({title:"操作成功",color:"success"}),p("refresh")),e.loading=!1}return L(()=>d.dialog,i=>{i&&(e.loading=!1,e.form=d.currentForm)}),(i,a)=>{const c=V,f=ee,u=te,h=ae,K=oe,M=se;return w(),N(M,{open:t(l),"onUpdate:open":a[8]||(a[8]=s=>A(l)?l.value=s:null),title:"修改",dismissible:!1,ui:{footer:"justify-end"}},{body:n(()=>[o(K,{ref_key:"formRef",ref:_,schema:t(x),state:t(e).form,class:"flex flex-col gap-4",onSubmit:g},{default:n(()=>[o(u,{label:"名称",name:"name",required:""},{default:n(()=>[o(f,{modelValue:t(e).form.name,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).form.name=s),modelModifiers:{trim:!0},placeholder:"请输入",class:"w-full"},y({_:2},[t(e).form.name?{name:"trailing",fn:n(()=>[o(c,{color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x",onClick:a[0]||(a[0]=s=>t(e).form.name="")})]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),o(u,{label:"描述",name:"desc"},{default:n(()=>[o(f,{modelValue:t(e).form.desc,"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).form.desc=s),modelModifiers:{trim:!0},placeholder:"请输入",class:"w-full"},y({_:2},[t(e).form.desc?{name:"trailing",fn:n(()=>[o(c,{color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x",onClick:a[2]||(a[2]=s=>t(e).form.desc="")})]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),o(u,{label:"排序",name:"sort"},{default:n(()=>[o(f,{modelValue:t(e).form.sort,"onUpdate:modelValue":a[5]||(a[5]=s=>t(e).form.sort=s),modelModifiers:{trim:!0},placeholder:"请输入",class:"w-full",type:"number"},y({_:2},[t(e).form.sort?{name:"trailing",fn:n(()=>[o(c,{color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x",onClick:a[4]||(a[4]=s=>t(e).form.sort="")})]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),o(u,{label:"状态",name:"state",required:""},{default:n(()=>[o(h,{modelValue:t(e).form.state,"onUpdate:modelValue":a[6]||(a[6]=s=>t(e).form.state=s),items:k,placeholder:"请选择",class:"w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["schema","state"])]),footer:n(()=>[o(c,{label:"取消",color:"neutral",variant:"outline",onClick:v}),o(c,{loading:t(e).loading,label:"确认",variant:"solid",onClick:a[7]||(a[7]=s=>t(_)?.submit())},null,8,["loading"])]),_:1},8,["open"])}}}),de=Object.assign(ce,{__name:"PaymentPaymentEdit"}),B={2:["启用","success"],4:["关闭","error"]},R={4:["自建","success"],3:["支付宝","success"],2:["微信","success"],1:["usdt","success"]},ue=[{accessorKey:"id",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},header:()=>m(V,{color:"neutral",variant:"ghost",label:"ID",class:"-mx-2.5 hover:bg-transparent focus:bg-transparent data-[state=open]:bg-transparent"})},{accessorKey:"name",searchPlaceholder:"名称标题",header:"名称"},{accessorKey:"ty",header:"类型",formItemProps:{component:"Select",componentProps:{options:[{label:"自建",value:4},{label:"usdt",value:3},{label:"微信",value:2},{label:"支付宝",value:1}]}},cell:({row:r})=>m(C,{class:"capitalize",variant:"subtle",color:R[r.original.ty]?.[1]},()=>R[r.original.ty]?.[0])},{accessorKey:"state",meta:{class:{th:"w-[100px]",td:"w-[80px]"}},header:"状态",formItemProps:{component:"Select",componentProps:{options:[{label:"启动",value:2},{label:"关闭",value:4}]}},cell:({row:r})=>m(C,{class:"capitalize",variant:"subtle",color:B[r.original.state]?.[1]},()=>B[r.original.state]?.[0])},{accessorKey:"updated_at",header:"更新时间",cell:({row:r})=>m("span",{class:"text-sm text-gray-600 dark:text-gray-300"},F(r.original.updated_at))},{accessorKey:"created_at",header:"创建时间",cell:({row:r})=>m("span",{class:"text-sm text-gray-600 dark:text-gray-300"},F(r.original.created_at))}],pe={key:0,class:"absolute top-0 left-0 right-0 h-(--ui-header-height) flex items-center justify-between border-b border-(--ui-border) px-4 sm:px-6 bg-(--ui-bg)"},fe={class:"flex items-center gap-4"},je=T({name:"PaymentList",__name:"list",setup(r){const d=ie(me).smaller("lg"),p=O(),l=E({isDialog:!1,currentForm:{}}),v=async e=>{l.isDialog=!0,e?l.currentForm=S(e):l.currentForm={state:2}},_=async()=>{p.value.reload(),l.isDialog=!1};function x(e){return[{label:"编辑",icon:"material-symbols:edit-square-outline",onSelect(){v(e.original)}}]}const k=[...ue,{id:"actions",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},cell:({row:e})=>m("div",{class:"text-right"},m(j,{content:{align:"end"},items:x(e)},()=>m(V,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"})))}];return(e,b)=>{const g=W,i=Q,a=X,c=Z,f=Y,u=de;return w(),U(J,null,[o(f,{ui:{body:"pb-[12px]! gap-0!"}},y({body:n(()=>[t(d)?G("",!0):(w(),U("div",pe,[H("div",fe,[o(g),o(a)])])),o(c,{ref_key:"tableRef",ref:p,"data-request":t(re),columns:k,"scroll-x":"min-w-[1200px]"},null,8,["data-request"])]),_:2},[t(d)?{name:"header",fn:n(()=>[o(i,{title:"支付方式列表"},{leading:n(()=>[o(g)]),_:1})]),key:"0"}:void 0]),1024),o(u,{dialog:t(l).isDialog,"onUpdate:dialog":b[0]||(b[0]=h=>t(l).isDialog=h),"current-form":t(l).currentForm,onRefresh:_},null,8,["dialog","current-form"])],64)}}});export{je as default};
