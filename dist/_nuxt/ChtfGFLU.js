import{_ as ae}from"./oJBVUttf.js";import{_ as se}from"./BdKneTYw.js";import{_ as fe}from"./xC7ZNHnZ.js";import{b as D,c as me,P,e as pe,W as ve,$ as be,u as ye,h as _e,a4 as E,a as X,x as xe,t as te,w as ie,_ as oe}from"./DiI9-bkE.js";import{_ as he}from"./DWJKBe83.js";import{u as ke}from"./D7PB4JkZ.js";import{b as we}from"./C-fFc4Sm.js";import{p as R,t as le,z as g,a1 as w,a2 as d,B as V,u as t,h as F,j as ze,a7 as o,a3 as $e,R as C,c as I,w as H,au as Ce,Y as N,an as Q,a8 as Y,ag as Ve,ae as T,A as z,W as O,ah as W,a5 as B,a6 as $,ai as Te,Q as a,i as Ie,r as re,J as Se}from"./Cp_GvCOL.js";import{R as qe}from"./BrwH2_O0.js";import{R as Ue}from"./B1GmTriL.js";import{_ as ne}from"./Bml5z8l2.js";import{r as Ae}from"./BlLzDdHJ.js";import{_ as Be}from"./DxT_AjaP.js";import{_ as Re}from"./DwJuNt-9.js";import{_ as Fe}from"./_BOBmhmt.js";import{_ as je}from"./9B_i7pfW.js";import{_ as Me}from"./BkseHKFx.js";import{_ as Le}from"./8gEztUrL.js";import{v as Oe,w as De,x as Pe,y as Ke,z as Ee,d as Ne}from"./DXr9T7Lu.js";import{c as L}from"./B3KMLFeu.js";import{g as He}from"./adOTzFDE.js";import{u as We}from"./BCMcqMGM.js";import"./DVCf4JVd.js";import"./DZaB2s8a.js";import"./7ga_NNx6.js";import"./_eNQqsN0.js";import"./B9BvCEkO.js";import"./CM1DIlR0.js";import"./DaMwIZ4f.js";import"./BnfZ4xmv.js";import"./CangPKqO.js";import"./C8Jf-TuN.js";import"./DnWsfCtc.js";const[G,Ge]=pe("TabsRoot");var Je=R({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(v,{emit:_}){const p=v,e=_,{orientation:x,unmountOnHide:h,dir:f}=le(p),c=ke(f);D();const l=me(p,"modelValue",e,{defaultValue:p.defaultValue,passive:p.modelValue===void 0}),k=F();return Ge({modelValue:l,changeModelValue:i=>{l.value=i},orientation:x,dir:c,unmountOnHide:h,activationMode:p.activationMode,baseId:we(void 0,"reka-tabs"),tabsList:k}),(i,S)=>(g(),w(t(P),{dir:t(c),"data-orientation":t(x),"as-child":i.asChild,as:i.as},{default:d(()=>[V(i.$slots,"default",{modelValue:t(l)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),Qe=Je;function de(v,_){return`${v}-trigger-${_}`}function ue(v,_){return`${v}-content-${_}`}var Ye=R({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(v){const _=v,{forwardRef:p}=D(),e=G(),x=I(()=>de(e.baseId,_.value)),h=I(()=>ue(e.baseId,_.value)),f=I(()=>_.value===e.modelValue.value),c=F(f.value);return ze(()=>{requestAnimationFrame(()=>{c.value=!1})}),(l,k)=>(g(),w(t(ve),{present:l.forceMount||f.value,"force-mount":""},{default:d(({present:i})=>[o(t(P),{id:h.value,ref:t(p),"as-child":l.asChild,as:l.as,role:"tabpanel","data-state":f.value?"active":"inactive","data-orientation":t(e).orientation.value,"aria-labelledby":x.value,hidden:!i,tabindex:"0",style:$e({animationDuration:c.value?"0s":void 0})},{default:d(()=>[!t(e).unmountOnHide.value||i?V(l.$slots,"default",{key:0}):C("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Xe=Ye,Ze=R({__name:"TabsIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(v,{expose:_}){const p=v,e=G();_({updateIndicatorStyle:f}),D();const x=F({size:null,position:null}),h=F([]);H(()=>[e.modelValue.value,e?.dir.value],()=>{f()},{immediate:!0,flush:"post"}),Ce(()=>{h.value=Array.from(e.tabsList.value?.querySelectorAll('[role="tab"]')||[])}),be(I(()=>[e.tabsList.value,...h.value]),f);function f(){const c=e.tabsList.value?.querySelector('[role="tab"][data-state="active"]');c&&(e.orientation.value==="horizontal"?x.value={size:c.offsetWidth,position:c.offsetLeft}:x.value={size:c.offsetHeight,position:c.offsetTop})}return(c,l)=>typeof x.value.size=="number"?(g(),w(t(P),N({key:0},p,{style:{"--reka-tabs-indicator-size":`${x.value.size}px`,"--reka-tabs-indicator-position":`${x.value.position}px`}}),{default:d(()=>[V(c.$slots,"default")]),_:3},16,["style"])):C("v-if",!0)}}),et=Ze,tt=R({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(v){const _=v,{loop:p}=le(_),{forwardRef:e,currentElement:x}=D(),h=G();return h.tabsList=x,(f,c)=>(g(),w(t(qe),{"as-child":"",orientation:t(h).orientation.value,dir:t(h).dir.value,loop:t(p)},{default:d(()=>[o(t(P),{ref:t(e),role:"tablist","as-child":f.asChild,as:f.as,"aria-orientation":t(h).orientation.value},{default:d(()=>[V(f.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),at=tt,st=R({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(v){const _=v,{forwardRef:p}=D(),e=G(),x=I(()=>de(e.baseId,_.value)),h=I(()=>ue(e.baseId,_.value)),f=I(()=>_.value===e.modelValue.value);return(c,l)=>(g(),w(t(Ue),{"as-child":"",focusable:!c.disabled,active:f.value},{default:d(()=>[o(t(P),{id:x.value,ref:t(p),role:"tab",type:c.as==="button"?"button":void 0,as:c.as,"as-child":c.asChild,"aria-selected":f.value?"true":"false","aria-controls":h.value,"data-state":f.value?"active":"inactive",disabled:c.disabled,"data-disabled":c.disabled?"":void 0,"data-orientation":t(e).orientation.value,onMousedown:l[0]||(l[0]=Y(k=>{!c.disabled&&k.ctrlKey===!1?t(e).changeModelValue(c.value):k.preventDefault()},["left"])),onKeydown:l[1]||(l[1]=Q(k=>t(e).changeModelValue(c.value),["enter","space"])),onFocus:l[2]||(l[2]=()=>{const k=t(e).activationMode!=="manual";!f.value&&!c.disabled&&k&&t(e).changeModelValue(c.value)})},{default:d(()=>[V(c.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),it=st;const ot={slots:{root:"flex items-center gap-2",list:"relative flex p-1 group",indicator:"absolute transition-[translate,width] duration-200",trigger:["group relative inline-flex items-center min-w-0 data-[state=inactive]:text-muted hover:data-[state=inactive]:not-disabled:text-default font-medium rounded-md disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",label:"truncate",trailingBadge:"shrink-0",trailingBadgeSize:"sm",content:"focus:outline-none w-full"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{pill:{list:"bg-elevated rounded-lg",trigger:"grow",indicator:"rounded-md shadow-xs"},link:{list:"border-default",indicator:"rounded-full",trigger:"focus:outline-none"}},orientation:{horizontal:{root:"flex-col",list:"w-full",indicator:"left-0 w-(--reka-tabs-indicator-size) translate-x-(--reka-tabs-indicator-position)",trigger:"justify-center"},vertical:{list:"flex-col",indicator:"top-0 h-(--reka-tabs-indicator-size) translate-y-(--reka-tabs-indicator-position)"}},size:{xs:{trigger:"px-2 py-1 text-xs gap-1",leadingIcon:"size-4",leadingAvatarSize:"3xs"},sm:{trigger:"px-2.5 py-1.5 text-xs gap-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs"},md:{trigger:"px-3 py-1.5 text-sm gap-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs"},lg:{trigger:"px-3 py-2 text-sm gap-2",leadingIcon:"size-5",leadingAvatarSize:"2xs"},xl:{trigger:"px-3 py-2 text-base gap-2",leadingIcon:"size-6",leadingAvatarSize:"xs"}}},compoundVariants:[{orientation:"horizontal",variant:"pill",class:{indicator:"inset-y-1"}},{orientation:"horizontal",variant:"link",class:{list:"border-b -mb-px",indicator:"-bottom-px h-px"}},{orientation:"vertical",variant:"pill",class:{indicator:"inset-x-1",list:"items-center"}},{orientation:"vertical",variant:"link",class:{list:"border-s -ms-px",indicator:"-start-px w-px"}},{color:"primary",variant:"pill",class:{indicator:"bg-primary",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"}},{color:"secondary",variant:"pill",class:{indicator:"bg-secondary",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-secondary"}},{color:"success",variant:"pill",class:{indicator:"bg-success",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-success"}},{color:"info",variant:"pill",class:{indicator:"bg-info",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-info"}},{color:"warning",variant:"pill",class:{indicator:"bg-warning",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-warning"}},{color:"error",variant:"pill",class:{indicator:"bg-error",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-error"}},{color:"neutral",variant:"pill",class:{indicator:"bg-inverted",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-inverted"}},{color:"primary",variant:"link",class:{indicator:"bg-primary",trigger:"data-[state=active]:text-primary focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"}},{color:"secondary",variant:"link",class:{indicator:"bg-secondary",trigger:"data-[state=active]:text-secondary focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"}},{color:"success",variant:"link",class:{indicator:"bg-success",trigger:"data-[state=active]:text-success focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"}},{color:"info",variant:"link",class:{indicator:"bg-info",trigger:"data-[state=active]:text-info focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"}},{color:"warning",variant:"link",class:{indicator:"bg-warning",trigger:"data-[state=active]:text-warning focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"}},{color:"error",variant:"link",class:{indicator:"bg-error",trigger:"data-[state=active]:text-error focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"}},{color:"neutral",variant:"link",class:{indicator:"bg-inverted",trigger:"data-[state=active]:text-highlighted focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"}}],defaultVariants:{color:"primary",variant:"pill",size:"md"}},lt={__name:"UTabs",props:{as:{type:null,required:!1},items:{type:Array,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},orientation:{type:null,required:!1,default:"horizontal"},content:{type:Boolean,required:!1,default:!0},valueKey:{type:null,required:!1,default:"value"},labelKey:{type:null,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:[String,Number],required:!1,default:"0"},modelValue:{type:[String,Number],required:!1},activationMode:{type:String,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue"],setup(v,{expose:_,emit:p}){const e=v,x=p,h=Ve(),f=ye(),c=_e(Ae(e,"as","unmountOnHide"),x),l=I(()=>te({extend:te(ot),...f.ui?.tabs||{}})({color:e.color,variant:e.variant,size:e.size,orientation:e.orientation})),k=F([]);return _({triggersRef:k}),(i,S)=>(g(),w(t(Qe),N(t(c),{"model-value":v.modelValue,"default-value":v.defaultValue,orientation:v.orientation,"activation-mode":v.activationMode,"data-slot":"root",class:l.value.root({class:[e.ui?.root,e.class]})}),{default:d(()=>[o(t(at),{"data-slot":"list",class:T(l.value.list({class:e.ui?.list}))},{default:d(()=>[o(t(et),{"data-slot":"indicator",class:T(l.value.indicator({class:e.ui?.indicator}))},null,8,["class"]),V(i.$slots,"list-leading"),(g(!0),z(O,null,W(v.items,(n,y)=>(g(),w(t(it),{key:y,ref_for:!0,ref:r=>k.value[y]=r,value:t(E)(n,e.valueKey)??String(y),disabled:n.disabled,"data-slot":"trigger",class:T(l.value.trigger({class:[e.ui?.trigger,n.ui?.trigger]}))},{default:d(()=>[V(i.$slots,"leading",{item:n,index:y,ui:l.value},()=>[n.icon?(g(),w(X,{key:0,name:n.icon,"data-slot":"leadingIcon",class:T(l.value.leadingIcon({class:[e.ui?.leadingIcon,n.ui?.leadingIcon]}))},null,8,["name","class"])):n.avatar?(g(),w(xe,N({key:1,size:n.ui?.leadingAvatarSize||e.ui?.leadingAvatarSize||l.value.leadingAvatarSize()},{ref_for:!0},n.avatar,{"data-slot":"leadingAvatar",class:l.value.leadingAvatar({class:[e.ui?.leadingAvatar,n.ui?.leadingAvatar]})}),null,16,["size","class"])):C("",!0)]),t(E)(n,e.labelKey)||h.default?(g(),z("span",{key:0,"data-slot":"label",class:T(l.value.label({class:[e.ui?.label,n.ui?.label]}))},[V(i.$slots,"default",{item:n,index:y},()=>[B($(t(E)(n,e.labelKey)),1)])],2)):C("",!0),V(i.$slots,"trailing",{item:n,index:y,ui:l.value},()=>[n.badge||n.badge===0?(g(),w(ne,N({key:0,color:"neutral",variant:"outline",size:n.ui?.trailingBadgeSize||e.ui?.trailingBadgeSize||l.value.trailingBadgeSize()},{ref_for:!0},typeof n.badge=="string"||typeof n.badge=="number"?{label:n.badge}:n.badge,{"data-slot":"trailingBadge",class:l.value.trailingBadge({class:[e.ui?.trailingBadge,n.ui?.trailingBadge]})}),null,16,["size","class"])):C("",!0)])]),_:2},1032,["value","disabled","class"]))),128)),V(i.$slots,"list-trailing")]),_:3},8,["class"]),v.content?(g(!0),z(O,{key:0},W(v.items,(n,y)=>(g(),w(t(Xe),{key:y,value:t(E)(n,e.valueKey)??String(y),"data-slot":"content",class:T(l.value.content({class:[e.ui?.content,n.ui?.content,n.class]}))},{default:d(()=>[V(i.$slots,n.slot||"content",{item:n,index:y,ui:l.value},()=>[B($(n.content),1)])]),_:2},1032,["value","class"]))),128)):C("",!0)]),_:3},16,["model-value","default-value","orientation","activation-mode","class"]))}},rt={class:"border-b-2 border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-900 px-6"},nt={class:"flex gap-2"},dt=["onClick"],ut={class:"p-6"},ct={key:0,class:"flex items-center justify-center py-20"},gt={class:"text-center"},ft={key:1,class:"max-h-[60vh] overflow-y-auto pr-2"},mt={key:0},pt={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-5 space-y-5"},vt={class:"flex items-center gap-2 mb-1"},bt={key:1,class:"space-y-4"},yt={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 space-y-3"},_t={class:"flex items-center gap-2 mb-1"},xt={class:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},ht={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},kt={class:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},wt={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},zt={class:"flex items-center justify-between w-full"},$t={class:"text-sm text-gray-500 dark:text-gray-400"},Ct={class:"flex gap-3"},Vt=R({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})},tagsOptions:{},categoryOptions:{}},emits:["update:dialog","refresh"],setup(v,{emit:_}){const p=v,e=_,x=I({get(){return p.dialog},set(y){e("update:dialog",y)}}),h=()=>{x.value=!1},f=F("info"),c=[["info","基础信息"],["status","状态管理"]],l=Te("formRef"),k=ie(),i=re({loading:!1,form:{}});async function S(y,r){if(!i.form.id){k.add({title:"请先保存",color:"warning"});return}i.form[y]=r;const{error:m}=await De({id:i.form.id,[y]:r});m?(k.add({title:"更新失败",color:"error"}),i.form[y]=y==="state"?r===2?4:2:r?0:1):(k.add({title:"更新成功",color:"success"}),e("refresh"))}async function n(){i.loading=!0;try{const y=L(i.form),{error:r}=await Pe(y);r||(k.add({title:"操作成功",color:"success"}),h(),e("refresh"))}finally{i.loading=!1}}return H(()=>p.dialog,async y=>{if(y){i.loading=!0,f.value="info";try{if(p.currentForm?.id){const{data:r,error:m}=await Oe({biz_id:p.currentForm.id});!m&&r?i.form=r.info||p.currentForm:i.form=L(p.currentForm)}else i.form=L(p.currentForm)}catch{i.form=L(p.currentForm)}finally{i.loading=!1}}}),(y,r)=>{const m=X,s=ae,q=se,U=Fe,j=je,A=Me,K=oe,J=Le;return g(),w(J,{open:t(x),"onUpdate:open":r[5]||(r[5]=b=>Ie(x)?x.value=b:null),title:"编辑助手",description:"编辑助手信息",ui:{content:"sm:max-w-4xl",footer:"justify-end"}},{body:d(()=>[a("div",rt,[a("div",nt,[(g(),z(O,null,W(c,([b,M])=>a("button",{key:b,type:"button",class:T(["px-5 py-3.5 text-sm transition-all relative rounded-t-lg",t(f)===b?"text-white dark:text-white font-bold bg-blue-400 dark:bg-blue-400 shadow-lg":"text-gray-600 dark:text-gray-400 font-medium hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-800"]),onClick:Z=>f.value=b},$(M),11,dt)),64))])]),a("div",ut,[t(i).loading?(g(),z("div",ct,[a("div",gt,[o(m,{name:"i-material-symbols-progress-activity",class:"w-12 h-12 text-primary-500 animate-spin mx-auto"}),r[6]||(r[6]=a("p",{class:"mt-4 text-gray-600 dark:text-gray-400 font-medium"}," 加载中... ",-1))])])):(g(),z("div",ft,[t(f)==="info"?(g(),z("div",mt,[o(j,{ref_key:"formRef",ref:l,state:t(i).form,class:"flex flex-col gap-5",onSubmit:n},{default:d(()=>[a("div",pt,[a("div",vt,[o(m,{name:"i-material-symbols-info-outline",class:"w-5 h-5 text-primary-600"}),r[7]||(r[7]=a("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 基本信息 ",-1))]),o(q,{label:"名称",name:"name"},{default:d(()=>[o(s,{modelValue:t(i).form.name,"onUpdate:modelValue":r[0]||(r[0]=b=>t(i).form.name=b),modelModifiers:{trim:!0},placeholder:"请输入名称",class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1}),o(q,{label:"简介",name:"summary"},{default:d(()=>[o(U,{modelValue:t(i).form.summary,"onUpdate:modelValue":r[1]||(r[1]=b=>t(i).form.summary=b),modelModifiers:{trim:!0},placeholder:"请输入简介",rows:3,class:"w-full",size:"lg"},null,8,["modelValue"])]),_:1})])]),_:1},8,["state"])])):C("",!0),t(f)==="status"?(g(),z("div",bt,[a("div",yt,[a("div",_t,[o(m,{name:"i-material-symbols-settings-outline",class:"w-5 h-5 text-primary-600"}),r[8]||(r[8]=a("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 状态管理 ",-1))]),a("div",xt,[a("div",null,[r[9]||(r[9]=a("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," 审核状态 ",-1)),a("p",ht,$(t(i).form.state===2?"已通过":"待审核"),1)]),o(A,{"model-value":t(i).form.state===2,size:"lg","onUpdate:modelValue":r[2]||(r[2]=b=>S("state",b?2:0))},null,8,["model-value"])]),a("div",kt,[a("div",null,[r[10]||(r[10]=a("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," 推荐 ",-1)),a("p",wt,$(t(i).form.recommend===2?"已推荐":"未推荐"),1)]),o(A,{"model-value":t(i).form.recommend===2,size:"lg","onUpdate:modelValue":r[3]||(r[3]=b=>S("recommend",b?2:0))},null,8,["model-value"])])])])):C("",!0)]))])]),footer:d(()=>[a("div",zt,[a("div",$t,[o(m,{name:"i-material-symbols-info-outline",class:"inline w-4 h-4"}),B(" "+$(t(f)==="status"?"状态管理通过开关直接更新":"修改后将更新信息"),1)]),a("div",Ct,[o(K,{label:"取消",color:"neutral",variant:"outline",size:"lg",onClick:h},{leading:d(()=>[o(m,{name:"i-material-symbols-close"})]),_:1}),o(K,{loading:t(i).loading,disabled:t(f)==="status",label:"确认保存",variant:"solid",size:"lg",onClick:r[4]||(r[4]=b=>t(l)?.submit())},{leading:d(()=>[o(m,{name:"i-material-symbols-check"})]),_:1},8,["loading","disabled"])])])]),_:1},8,["open"])}}}),Tt=Object.assign(Vt,{__name:"ContentAssistantEdit"}),It={class:"p-4 sm:p-6"},St={class:"flex flex-wrap items-end gap-2"},qt={class:"mb-4"},Ut={key:0,class:"flex items-center justify-center py-12"},At={class:"text-center"},Bt={key:1,class:"flex flex-col items-center justify-center py-16"},Rt={class:"w-24 h-24 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-6"},Ft={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3"},jt=["onClick"],Mt={class:"relative overflow-hidden bg-gray-100 dark:bg-gray-900"},Lt=["src","alt"],Ot={class:"absolute top-2 left-2 flex flex-col gap-1.5 z-10"},Dt={class:"absolute bottom-0 left-0 right-0 p-1.5 bg-gradient-to-t from-black/80 to-transparent"},Pt={class:"font-bold text-white text-xs truncate drop-shadow-lg"},Kt={class:"text-white/70 text-[10px] mt-0.5"},Et={class:"flex items-center justify-between gap-2 mt-0.5"},Nt={class:"flex items-center gap-2 flex-1 min-w-0"},Ht={class:"text-white/70 text-[10px] flex-shrink-0"},Wt={class:"text-white/70 text-[10px] truncate"},Gt={class:"p-2"},Jt={class:"space-y-1 mb-2"},Qt={class:"flex items-center justify-between p-1 bg-gray-50 dark:bg-gray-900/50 rounded"},Yt={class:"flex items-center gap-1.5"},Xt={class:"w-5 h-5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center"},Zt={class:"font-semibold text-gray-900 dark:text-white text-xs"},ea={class:"flex items-center justify-between p-1 bg-gray-50 dark:bg-gray-900/50 rounded"},ta={class:"flex items-center gap-1.5"},aa={class:"w-5 h-5 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},sa={class:"font-semibold text-gray-900 dark:text-white text-xs"},ia={class:"flex items-center justify-between p-1 bg-gray-50 dark:bg-gray-900/50 rounded"},oa={class:"flex items-center gap-1.5"},la={class:"w-5 h-5 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},ra={class:"font-semibold text-gray-900 dark:text-white text-xs"},na={class:"flex gap-1.5"},da={key:3,class:"flex justify-center mt-6"},Ka=R({name:"ContentAssistant",__name:"index",setup(v){const _=We(),p=ie(),e=re({isDialog:!1,currentForm:{},tagsOptions:[],categoryOptions:[],activeTab:0,currentList:[],loading:!1,selectedCardId:null,sortType:1,pagination:{page:1,pagesize:12,total:0},search:{uid:"",name:"",category_id:"",anonymous:""}}),x=async m=>{e.isDialog=!0,m?e.currentForm=L(m):e.currentForm={}},h=m=>{e.selectedCardId===m?e.selectedCardId=null:e.selectedCardId=m},f=async()=>{i(),e.isDialog=!1},c=async m=>{const{error:s}=await Ke({id:m.id});s||(p.add({title:"删除成功",color:"success"}),i())},l=async()=>{const{data:m}=await He({page:1,pagesize:-1,ty:"1"});m?e.tagsOptions=m.list.map(s=>({label:s.name,value:s.name})):e.tagsOptions=[]},k=async()=>{const{data:m}=await Ne({page:1,pagesize:-1});m?e.categoryOptions=m.list.map(s=>({label:s.name,value:s.id})):e.categoryOptions=[]},i=async(m=1)=>{e.loading=!0,e.pagination.page=m;const s={page:e.pagination.page,pagesize:e.pagination.pagesize,r:e.sortType};e.activeTab>0&&(s.seeking=e.activeTab),e.search.uid&&(s.uid=e.search.uid),e.search.name&&(s.name=e.search.name),e.search.category_id&&(s.category_id=e.search.category_id),e.search.anonymous&&(s.anonymous=e.search.anonymous);const{data:q}=await Ee(s);e.currentList=q?.list||[],e.pagination.total=q?.count||0,e.loading=!1},S=()=>{e.pagination.page=1,i(1)},n=()=>{e.search.uid="",e.search.name="",e.search.category_id="",e.search.anonymous="",e.pagination.page=1,i(1)},y=m=>{i(m)},r=()=>{l(),k(),i()};return H(()=>e.activeTab,()=>{e.pagination.page=1,i(1)}),H(()=>e.sortType,()=>{e.pagination.page=1,i(1)}),Se(()=>{r()}),(m,s)=>{const q=ae,U=se,j=fe,A=oe,K=he,J=lt,b=X,M=ne,Z=Be,ce=Re,ge=Tt;return g(),z(O,null,[o(ce,null,{default:d(()=>[a("div",It,[s[17]||(s[17]=a("div",{class:"flex justify-between items-center mb-4"},[a("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," 助手管理 ")],-1)),o(K,{class:"mb-4"},{default:d(()=>[a("div",St,[o(U,{label:"UID",class:"w-32"},{default:d(()=>[o(q,{modelValue:t(e).search.uid,"onUpdate:modelValue":s[0]||(s[0]=u=>t(e).search.uid=u),placeholder:"用户UID",icon:"i-lucide-user",size:"sm",onKeyup:Q(S,["enter"])},null,8,["modelValue"])]),_:1}),o(U,{label:"名称",class:"w-40"},{default:d(()=>[o(q,{modelValue:t(e).search.name,"onUpdate:modelValue":s[1]||(s[1]=u=>t(e).search.name=u),placeholder:"角色名称",icon:"i-lucide-search",size:"sm",onKeyup:Q(S,["enter"])},null,8,["modelValue"])]),_:1}),o(U,{label:"分类",class:"w-36"},{default:d(()=>[o(j,{modelValue:t(e).search.category_id,"onUpdate:modelValue":s[2]||(s[2]=u=>t(e).search.category_id=u),items:[{label:"全部",value:""},...t(e).categoryOptions],"value-key":"value",size:"sm"},null,8,["modelValue","items"])]),_:1}),o(U,{label:"隐私",class:"w-28"},{default:d(()=>[o(j,{modelValue:t(e).search.anonymous,"onUpdate:modelValue":s[3]||(s[3]=u=>t(e).search.anonymous=u),items:[{label:"全部",value:""},{label:"公开",value:"0"},{label:"隐私",value:"2"}],"value-key":"value",size:"sm"},null,8,["modelValue"])]),_:1}),o(U,{label:"排序",class:"w-28"},{default:d(()=>[o(j,{modelValue:t(e).sortType,"onUpdate:modelValue":s[4]||(s[4]=u=>t(e).sortType=u),items:[{label:"时间",value:1},{label:"电量",value:2}],"value-key":"value",size:"sm"},null,8,["modelValue"])]),_:1}),o(A,{label:"搜索",icon:"i-lucide-search",size:"sm",onClick:S}),o(A,{label:"重置",icon:"i-lucide-refresh-cw",color:"neutral",variant:"soft",size:"sm",onClick:n})])]),_:1}),a("div",qt,[o(J,{modelValue:t(e).activeTab,"onUpdate:modelValue":s[5]||(s[5]=u=>t(e).activeTab=u),items:[{value:0,label:"全部",icon:"i-lucide-list"},{value:2,label:"待审核",icon:"i-lucide-clock"},{value:3,label:"版本升级审核",icon:"i-lucide-git-branch"},{value:5,label:"已发布",icon:"i-lucide-check-circle"},{value:4,label:"已删除",icon:"i-lucide-trash-2"}]},null,8,["modelValue"])]),t(e).loading?(g(),z("div",Ut,[a("div",At,[o(b,{name:"i-material-symbols-progress-activity",class:"w-12 h-12 text-primary-500 animate-spin mx-auto"}),s[7]||(s[7]=a("p",{class:"mt-4 text-gray-600 dark:text-gray-400 font-medium"}," 加载中... ",-1))])])):t(e).currentList.length===0?(g(),z("div",Bt,[a("div",Rt,[o(b,{name:"i-material-symbols-inbox-outline",class:"w-12 h-12 text-gray-400"})]),s[8]||(s[8]=a("p",{class:"text-gray-900 dark:text-white text-xl font-semibold mb-2"}," 暂无数据 ",-1)),s[9]||(s[9]=a("p",{class:"text-gray-500 dark:text-gray-400 text-sm"}," 试试调整搜索条件或切换其他标签页 ",-1))])):(g(),z("div",Ft,[(g(!0),z(O,null,W(t(e).currentList,u=>(g(),z("div",{key:u.id,class:T(["group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-300 cursor-pointer",{"opacity-60":t(e).activeTab===4,"scale-105 shadow-2xl border-primary-500 dark:border-primary-500 z-10":t(e).selectedCardId===u.id,"hover:shadow-xl hover:border-primary-400 dark:hover:border-primary-600 hover:-translate-y-1":t(e).selectedCardId!==u.id}]),onClick:ee=>h(u.id)},[a("div",Mt,[a("img",{src:u.image,alt:u.name,class:T(["w-full h-32 object-cover group-hover:scale-110 transition-transform duration-500",{grayscale:t(e).activeTab===4}])},null,10,Lt),s[13]||(s[13]=a("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"},null,-1)),a("div",Ot,[u.anonymous===2?(g(),w(M,{key:0,color:"primary",variant:"solid",size:"md",class:"shadow-xl font-bold bg-purple-500"},{leading:d(()=>[o(b,{name:"i-material-symbols-visibility-off",class:"w-4 h-4"})]),default:d(()=>[s[10]||(s[10]=B(" 隐私 ",-1))]),_:1})):C("",!0),u.recommend===2?(g(),w(M,{key:1,color:"warning",variant:"solid",size:"md",class:"shadow-xl font-bold bg-gradient-to-r from-amber-500 to-orange-500"},{leading:d(()=>[o(b,{name:"i-material-symbols-star",class:"w-4 h-4"})]),default:d(()=>[s[11]||(s[11]=B(" 推荐 ",-1))]),_:1})):C("",!0),u.nsfw===2?(g(),w(M,{key:2,color:"error",variant:"solid",size:"md",class:"shadow-xl font-bold"},{leading:d(()=>[o(b,{name:"i-material-symbols-18-up-rating",class:"w-4 h-4"})]),default:d(()=>[s[12]||(s[12]=B(" 18+ ",-1))]),_:1})):C("",!0)]),a("div",Dt,[a("h3",Pt,$(u.name),1),a("p",Kt," ID: "+$(u.id),1),a("div",Et,[a("div",Nt,[a("p",Ht," UID: "+$(u.uid||u.member?.id||"-"),1),a("p",Wt,$(u.member?.nickname||u.member?.username||"Unknown"),1)])])])]),a("div",Gt,[a("div",Jt,[a("div",Qt,[a("div",Yt,[a("div",Xt,[o(b,{name:"i-material-symbols-bolt",class:"w-2.5 h-2.5 text-yellow-600 dark:text-yellow-400"})]),s[14]||(s[14]=a("span",{class:"text-[10px] text-gray-600 dark:text-gray-400"},"电量",-1))]),a("span",Zt,$(u.battery||0),1)]),a("div",ea,[a("div",ta,[a("div",aa,[o(b,{name:"i-material-symbols-favorite",class:"w-2.5 h-2.5 text-red-600 dark:text-red-400"})]),s[15]||(s[15]=a("span",{class:"text-[10px] text-gray-600 dark:text-gray-400"},"收藏",-1))]),a("span",sa,$(u.collect_count||0),1)]),a("div",ia,[a("div",oa,[a("div",la,[o(b,{name:"i-material-symbols-chat-bubble-outline",class:"w-2.5 h-2.5 text-blue-600 dark:text-blue-400"})]),s[16]||(s[16]=a("span",{class:"text-[10px] text-gray-600 dark:text-gray-400"},"评论",-1))]),a("span",ra,$(u.comment_count||0),1)])]),a("div",na,[o(A,{size:"xs",color:"primary",block:"",onClick:Y(ee=>x(u),["stop"])},{leading:d(()=>[o(b,{name:t(e).activeTab===4?"i-material-symbols-visibility-outline":"i-material-symbols-edit-outline"},null,8,["name"])]),default:d(()=>[B(" "+$(t(e).activeTab===4?"查看":"编辑"),1)]),_:1},8,["onClick"]),t(e).activeTab!==4?(g(),w(A,{key:0,size:"xs",color:"error",variant:"soft",onClick:Y(ee=>t(_).open({color:"error",title:"删除数据",description:"您确定要删除吗？",onPositiveClick(){c(u)}}),["stop"])},{default:d(()=>[o(b,{name:"i-material-symbols-delete-outline",class:"w-4 h-4"})]),_:1},8,["onClick"])):C("",!0)])])],10,jt))),128))])),!t(e).loading&&t(e).currentList.length>0?(g(),z("div",da,[o(Z,{page:t(e).pagination.page,"items-per-page":t(e).pagination.pagesize,total:t(e).pagination.total,"onUpdate:page":y},null,8,["page","items-per-page","total"])])):C("",!0)])]),_:1}),o(ge,{dialog:t(e).isDialog,"onUpdate:dialog":s[6]||(s[6]=u=>t(e).isDialog=u),"current-form":t(e).currentForm,"tags-options":t(e).tagsOptions,"category-options":t(e).categoryOptions,onRefresh:f},null,8,["dialog","current-form","tags-options","category-options"])],64)}}});export{Ka as default};
