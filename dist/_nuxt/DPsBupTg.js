import{a1 as T,N as x,f as O,h as D,R as k,i as I,O as P,a as U,o as q,w as E,B,b as y,P as G,r as L}from"./DhOLkSnF.js";import{a as M}from"./CZg69nbc.js";const V=["INPUT","TEXTAREA"];function W(e,r,n,t={}){if(!r||t.enableIgnoredElement&&V.includes(r.nodeName))return null;const{arrowKeyOptions:c="both",attributeName:d="[data-reka-collection-item]",itemsArray:p=[],loop:u=!0,dir:w="ltr",preventScroll:b=!0,focus:g=!1}=t,[f,v,m,A,h,F]=[e.key==="ArrowRight",e.key==="ArrowLeft",e.key==="ArrowUp",e.key==="ArrowDown",e.key==="Home",e.key==="End"],o=m||A,a=f||v;if(!h&&!F&&(!o&&!a||c==="vertical"&&a||c==="horizontal"&&o))return null;const i=n?Array.from(n.querySelectorAll(d)):p;if(!i.length)return null;b&&e.preventDefault();let s=null;return a||o?s=C(i,r,{goForward:o?A:w==="ltr"?f:v,loop:u}):h?s=i.at(0)||null:F&&(s=i.at(-1)||null),g&&s?.focus(),s}function C(e,r,n,t=e.length){if(--t===0)return null;const c=e.indexOf(r),d=n.goForward?c+1:c-1;if(!n.loop&&(d<0||d>=e.length))return null;const p=(d+e.length)%e.length,u=e[p];return u?u.hasAttribute("disabled")&&u.getAttribute("disabled")!=="false"?C(e,u,n,t):u:null}const K="rovingFocusGroup.onEntryFocus",z={bubbles:!1,cancelable:!0},H={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Y(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Z(e,r,n){const t=Y(e.key,n);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return H[t]}function $(e,r=!1){const n=T();for(const t of e)if(t===n||(t.focus({preventScroll:r}),T()!==n))return}function ee(e,r){return e.map((n,t)=>e[(r+t)%e.length])}const[te,j]=x("RovingFocusGroup");var X=O({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:r,emit:n}){const t=e,c=n,{loop:d,orientation:p,dir:u}=D(t),w=M(u),b=k(t,"currentTabStopId",c,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),g=I(!1),f=I(!1),v=I(0),{getItems:m,CollectionSlot:A}=P({isProvider:!0});function h(o){const a=!f.value;if(o.currentTarget&&o.target===o.currentTarget&&a&&!g.value){const i=new CustomEvent(K,z);if(o.currentTarget.dispatchEvent(i),c("entryFocus",i),!i.defaultPrevented){const s=m().map(l=>l.ref).filter(l=>l.dataset.disabled!==""),S=s.find(l=>l.getAttribute("data-active")===""),R=s.find(l=>l.getAttribute("data-highlighted")===""),_=s.find(l=>l.id===b.value),N=[S,R,_,...s].filter(Boolean);$(N,t.preventScrollOnEntryFocus)}}f.value=!1}function F(){setTimeout(()=>{f.value=!1},1)}return r({getItems:m}),j({loop:d,dir:w,orientation:p,currentTabStopId:b,onItemFocus:o=>{b.value=o},onItemShiftTab:()=>{g.value=!0},onFocusableItemAdd:()=>{v.value++},onFocusableItemRemove:()=>{v.value--}}),(o,a)=>(q(),U(y(A),null,{default:E(()=>[B(y(G),{tabindex:g.value||v.value===0?-1:0,"data-orientation":y(p),as:o.as,"as-child":o.asChild,dir:y(w),style:{outline:"none"},onMousedown:a[0]||(a[0]=i=>f.value=!0),onMouseup:F,onFocus:h,onBlur:a[1]||(a[1]=i=>g.value=!1)},{default:E(()=>[L(o.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),re=X;export{H as M,re as R,$ as f,Z as g,te as i,W as u,ee as w};
