import{_ as E}from"./1OJ4jHSB.js";import{w as q,_ as C,a as I}from"./DiI9-bkE.js";import{_ as P}from"./Odvr87Pg.js";import{_ as K}from"./CuFgEFCp.js";import{_ as T}from"./oJBVUttf.js";import{_ as L}from"./BdKneTYw.js";import{_ as M}from"./DkYr1hfb.js";import{_ as O}from"./9B_i7pfW.js";import{_ as j}from"./8gEztUrL.js";import{z,A,B as N,C as Q}from"./adOTzFDE.js";import{c as S}from"./B3KMLFeu.js";import{p as F,ai as W,w as G,z as V,a1 as H,a2 as u,a7 as s,u as o,Q as h,a6 as J,i as X,c as Y,r as k,E as i,A as Z,W as ee,h as te}from"./Cp_GvCOL.js";import{_ as D}from"./Bml5z8l2.js";import{f as oe}from"./CE7u-7DH.js";import{u as ae}from"./BCMcqMGM.js";import"./D7PB4JkZ.js";import"./C-fFc4Sm.js";import"./DnWsfCtc.js";import"./C6Y-ieo6.js";import"./De6cJ90F.js";import"./BrwH2_O0.js";import"./7ga_NNx6.js";import"./BHtpJmxp.js";import"./BlLzDdHJ.js";import"./CM1DIlR0.js";import"./K6pfE6CB.js";import"./B9BvCEkO.js";import"./DxT_AjaP.js";import"./DaMwIZ4f.js";import"./BnfZ4xmv.js";import"./CangPKqO.js";import"./C8Jf-TuN.js";import"./DVCf4JVd.js";import"./DZaB2s8a.js";const se={class:"flex items-center gap-2"},ne={class:"font-semibold"},le={class:"grid grid-cols-2 gap-4"},re=F({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})}},emits:["update:dialog","refresh"],setup(n,{emit:e}){const m=n,d=e,l=Y({get(){return m.dialog},set(c){d("update:dialog",c)}}),_=()=>{l.value=!1},g=W("formRef"),v=[{label:"开启",value:2},{label:"已删除",value:4}],x=[{label:"系统",value:0},{label:"业务",value:1}],t=k({loading:!1,form:{}}),r=q();async function p(){t.loading=!0;const c=S(t.form),{error:a}=await(c.id?z:A)(c);a||(r.add({title:"操作成功",color:"success"}),d("refresh")),t.loading=!1}return G(()=>m.dialog,c=>{c&&(t.loading=!1,t.form=S(m.currentForm))}),(c,a)=>{const y=I,b=T,w=L,U=M,R=O,$=C,B=j;return V(),H(B,{open:o(l),"onUpdate:open":a[4]||(a[4]=f=>X(l)?l.value=f:null),ui:{content:"sm:max-w-md",footer:"justify-end"}},{header:u(()=>[h("div",se,[s(y,{name:"i-material-symbols-warning-outline",class:"w-5 h-5 text-red-500"}),h("span",ne,J(n.currentForm.id?"编辑敏感词":"新增敏感词"),1)])]),body:u(()=>[s(R,{ref_key:"formRef",ref:g,state:o(t).form,class:"space-y-4",onSubmit:p},{default:u(()=>[s(w,{label:"敏感词",name:"name",required:""},{default:u(()=>[s(b,{modelValue:o(t).form.name,"onUpdate:modelValue":a[0]||(a[0]=f=>o(t).form.name=f),modelModifiers:{trim:!0},placeholder:"请输入敏感词",class:"w-full"},null,8,["modelValue"])]),_:1}),h("div",le,[s(w,{label:"类型",name:"ty",required:""},{default:u(()=>[s(U,{modelValue:o(t).form.ty,"onUpdate:modelValue":a[1]||(a[1]=f=>o(t).form.ty=f),items:x,placeholder:"请选择",class:"w-full"},null,8,["modelValue"])]),_:1}),s(w,{label:"状态",name:"state",required:""},{default:u(()=>[s(U,{modelValue:o(t).form.state,"onUpdate:modelValue":a[2]||(a[2]=f=>o(t).form.state=f),items:v,placeholder:"请选择",class:"w-full"},null,8,["modelValue"])]),_:1})])]),_:1},8,["state"])]),footer:u(()=>[s($,{label:"取消",color:"neutral",variant:"outline",onClick:_}),s($,{loading:o(t).loading,label:"确认",onClick:a[3]||(a[3]=f=>o(g)?.submit())},null,8,["loading"])]),_:1},8,["open"])}}}),ie=Object.assign(re,{__name:"CommonSensitiveEdit"}),me={2:["开启","success"],4:["删除","error"]},ce={0:["系统","info"],1:["业务","success"]},ue=[{accessorKey:"id",header:"ID",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},cell:({row:n})=>i("span",{class:"font-mono text-(--ui-text-muted)"},n.original.id)},{accessorKey:"name",searchPlaceholder:"筛选敏感词",header:"敏感词",cell:({row:n})=>{const e=n.original.name;return e?i("span",{class:"font-medium text-red-600 dark:text-red-400"},e):i("span",{class:"text-(--ui-text-muted)"},"-")}},{accessorKey:"ty",header:"类型",meta:{class:{th:"w-[100px]",td:"w-[100px]"}},formItemProps:{component:"Select",componentProps:{options:[{label:"系统",value:0},{label:"业务",value:1}]}},cell:({row:n})=>{const e=n.original.ty,[m,d]=ce[e]||["未知","neutral"];return i(D,{variant:"subtle",color:d},()=>m)}},{accessorKey:"state",header:"状态",meta:{class:{th:"w-[100px]",td:"w-[100px]"}},formItemProps:{component:"Select",componentProps:{options:[{label:"开启",value:2},{label:"删除",value:4}]}},cell:({row:n})=>{const e=n.original.state,[m,d]=me[e]||["未知","neutral"];return i(D,{variant:"subtle",color:d},()=>m)}},{accessorKey:"created_at",header:"创建时间",meta:{class:{th:"w-[160px]",td:"w-[160px]"}},cell:({row:n})=>{const e=n.original.created_at;return e?i("span",{class:"text-(--ui-text-muted)"},oe(e)):i("span",{class:"text-(--ui-text-muted)"},"-")}}],Qe=F({name:"SensitiveList",__name:"sensitive",setup(n){const e=te(),m=C,d=ae(),l=k({isDialog:!1,currentForm:{}}),_=async r=>{l.isDialog=!0,r?l.currentForm=S(r):l.currentForm={state:2}},g=async()=>{e.value.reload(),l.isDialog=!1},v=async r=>{const{error:p}=await Q({id:r.id});p||e.value.reload()};function x(r){return[{label:"编辑",icon:"material-symbols:edit-square-outline",onSelect(){_(r.original)}},{type:"separator"},{label:"删除",icon:"material-symbols:contract-delete-outline-rounded",color:"error",onSelect(){d.open({color:"error",title:"删除敏感词",description:"您确定要删除这个敏感词吗？",onPositiveClick(){v(r.original)}})}}]}const t=[...ue,{id:"actions",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},cell:({row:r})=>i("div",{class:"text-right"},i(E,{content:{align:"end"},items:x(r)},()=>i(C,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"})))}];return(r,p)=>{const c=P,a=K,y=ie;return V(),Z(ee,null,[s(a,null,{actions:u(()=>[s(o(m),{label:"新增",icon:"i-lucide-plus",color:"neutral",onClick:p[0]||(p[0]=b=>_(null))})]),default:u(()=>[s(c,{ref_key:"tableRef",ref:e,"data-request":o(N),columns:t,"scroll-x":"min-w-[1000px]"},null,8,["data-request"])]),_:1}),s(y,{dialog:o(l).isDialog,"onUpdate:dialog":p[1]||(p[1]=b=>o(l).isDialog=b),"current-form":o(l).currentForm,onRefresh:g},null,8,["dialog","current-form"])],64)}}});export{Qe as default};
