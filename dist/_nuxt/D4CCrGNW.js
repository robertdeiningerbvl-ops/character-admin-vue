import{n as z,_ as S,a as T}from"./DiI9-bkE.js";import{_ as w}from"./Bml5z8l2.js";import{_ as B}from"./DxT_AjaP.js";import{_ as C}from"./CuFgEFCp.js";import{f as D}from"./CE7u-7DH.js";import{l as U}from"./B33qAI9M.js";import{p as V,j as $,z as o,a1 as j,a2 as _,Q as s,a7 as i,u as e,a5 as N,a6 as m,A as n,W as A,ah as I,R as f,c as g,r as L}from"./Cp_GvCOL.js";import"./CM1DIlR0.js";import"./B3KMLFeu.js";import"./BlLzDdHJ.js";import"./DaMwIZ4f.js";import"./BnfZ4xmv.js";import"./CangPKqO.js";import"./C8Jf-TuN.js";const M={class:"mb-4 flex items-center justify-between"},P={class:"flex items-center gap-2"},R={key:0,class:"flex items-center justify-center py-20"},E={key:1,class:"space-y-3"},F={class:"text-sm"},Q={class:"mt-2 text-xs text-(--ui-text-muted)"},W={key:2,class:"text-center py-20 text-(--ui-text-muted)"},q={key:3,class:"mt-4 flex justify-end"},lt=V({name:"MemberChatSummary",__name:"[id]",setup(G){const c=z(),d=g(()=>c.params.uid),x=g(()=>c.params.id),t=L({loading:!1,list:[],total:0,page:1,pageSize:20}),u=async()=>{t.loading=!0;try{const{data:a}=await U({uid:d.value,biz_id:x.value,page:t.page,pagesize:t.pageSize});t.list=a?.list||[],t.total=a?.count||0}finally{t.loading=!1}},y=a=>{t.page=a,u()};return $(()=>u()),(a,l)=>{const h=S,v=w,p=T,b=B,k=C;return o(),j(k,null,{default:_(()=>[s("div",M,[s("div",P,[i(h,{icon:"i-lucide-arrow-left",color:"neutral",variant:"ghost",to:`/member/chat/${e(d)}`},null,8,["to"]),l[0]||(l[0]=s("h2",{class:"text-lg font-semibold"},"聊天摘要",-1)),i(v,{color:"neutral",variant:"subtle"},{default:_(()=>[N("共 "+m(e(t).total)+" 条",1)]),_:1})])]),e(t).loading?(o(),n("div",R,[i(p,{name:"i-lucide-loader",class:"w-8 h-8 animate-spin text-(--ui-text-muted)"})])):(o(),n("div",E,[(o(!0),n(A,null,I(e(t).list,r=>(o(),n("div",{key:r.id,class:"p-4 rounded-xl bg-(--ui-bg-elevated) border border-(--ui-border)"},[s("div",F,m(r.content),1),s("div",Q,m(("formatToDateTime"in a?a.formatToDateTime:e(D))(r.created_at)),1)]))),128))])),!e(t).loading&&e(t).list.length===0?(o(),n("div",W,[i(p,{name:"i-lucide-file-x",class:"w-12 h-12 mx-auto mb-2 opacity-50"}),l[1]||(l[1]=s("p",null,"暂无摘要",-1))])):f("",!0),e(t).total>e(t).pageSize?(o(),n("div",q,[i(b,{"model-value":e(t).page,total:e(t).total,"page-count":e(t).pageSize,"onUpdate:modelValue":y},null,8,["model-value","total","page-count"])])):f("",!0)]),_:1})}}});export{lt as default};
