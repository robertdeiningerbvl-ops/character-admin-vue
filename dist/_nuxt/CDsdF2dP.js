import{_ as M}from"./CEcF5dWm.js";import{aR as x,aS as h,f as T,c as q,ap as j,j as L,aE as K,l as N,a as b,o as p,w as i,B as a,_ as k,b as o,C as y,a4 as P,aF as v,i as z,k as B,A,D as I,G}from"./DhOLkSnF.js";import{_ as O,a as H,b as J,c as Q}from"./DAqc9GYg.js";import{_ as W}from"./CSbqei5V.js";import{_ as X}from"./DAIKkUkW.js";import{_ as Y}from"./DAeRr84W.js";import{_ as Z}from"./Db__RPjw.js";import{_ as ee}from"./BZLiX_8y.js";import{c as S}from"./45RcOEEf.js";import{o as oe,s as R}from"./B-mCBPct.js";import{u as te,b as ae}from"./Bo5OMT4U.js";import{f as ne}from"./BmKy9gZZ.js";import{u as re}from"./BVQSm7Ip.js";import"./CZg69nbc.js";import"./CwtpYSSp.js";import"./DPsBupTg.js";import"./9Rxep3Q5.js";import"./CLKxJTZi.js";import"./D0vBe5Vh.js";import"./BrXYpapi.js";import"./BXSyqGa5.js";import"./HRiyi1uV.js";function se(r){return x.get(h.commonLangList,r)}function ie(r){return x.post(h.commonLangAdd,r)}function le(r){return x.post(h.commonLangEdit,r)}function me(r){return x.post(h.commonLangRemove,r)}const ce=T({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})}},emits:["update:dialog","refresh"],setup(r,{emit:V}){const u=r,d=V,c=q({get(){return u.dialog},set(m){d("update:dialog",m)}}),$=()=>{c.value=!1},l=j("formRef"),_=oe({name:R().nonempty(),content:R().nonempty(),nation:R()}),t=L({loading:!1,form:{}}),w=K();async function C(){t.loading=!0;const m=S(t.form),{error:e}=await(m.id?le:ie)(m);e||(w.add({title:"操作成功",color:"success"}),d("refresh")),t.loading=!1}return N(()=>u.dialog,m=>{m&&(t.loading=!1,t.form=u.currentForm)}),(m,e)=>{const n=k,f=X,g=Y,D=Z,U=ee;return p(),b(U,{open:o(c),"onUpdate:open":e[7]||(e[7]=s=>P(c)?c.value=s:null),title:r.currentForm.id?"修改":"新增",dismissible:!1,ui:{footer:"justify-end"}},{body:i(()=>[a(D,{ref_key:"formRef",ref:l,schema:o(_),state:o(t).form,class:"flex flex-col gap-4",onSubmit:C},{default:i(()=>[a(g,{label:"名称",name:"name",required:""},{default:i(()=>[a(f,{modelValue:o(t).form.name,"onUpdate:modelValue":e[1]||(e[1]=s=>o(t).form.name=s),modelModifiers:{trim:!0},placeholder:"请输入",class:"w-full",ui:{trailing:"pe-1"}},{trailing:i(()=>[o(t).form.name?(p(),b(n,{key:0,color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x",onClick:e[0]||(e[0]=s=>o(t).form.name="")})):y("",!0)]),_:1},8,["modelValue"])]),_:1}),a(g,{label:"翻译内容",name:"content",required:""},{default:i(()=>[a(f,{modelValue:o(t).form.content,"onUpdate:modelValue":e[3]||(e[3]=s=>o(t).form.content=s),modelModifiers:{trim:!0},placeholder:"请输入翻译内容",class:"w-full",ui:{trailing:"pe-1"}},{trailing:i(()=>[o(t).form.content?(p(),b(n,{key:0,color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x",onClick:e[2]||(e[2]=s=>o(t).form.content="")})):y("",!0)]),_:1},8,["modelValue"])]),_:1}),a(g,{label:"菜单标识",name:"nation"},{default:i(()=>[a(f,{modelValue:o(t).form.nation,"onUpdate:modelValue":e[5]||(e[5]=s=>o(t).form.nation=s),modelModifiers:{trim:!0},placeholder:"请输入",class:"w-full",ui:{trailing:"pe-1"}},{trailing:i(()=>[o(t).form.nation?(p(),b(n,{key:0,color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x",onClick:e[4]||(e[4]=s=>o(t).form.nation="")})):y("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["schema","state"])]),footer:i(()=>[a(n,{label:"取消",color:"neutral",variant:"outline",onClick:$}),a(n,{loading:o(t).loading,label:"确认",variant:"solid",onClick:e[6]||(e[6]=s=>o(l)?.submit())},null,8,["loading"])]),_:1},8,["open","title"])}}}),ue=Object.assign(ce,{__name:"SystemTranslateEdit"}),de=[{accessorKey:"id",meta:{class:{th:"w-[180px]",td:"w-[180px]"}},header:()=>v(k,{color:"neutral",variant:"ghost",label:"ID",class:"-mx-2.5 hover:bg-transparent focus:bg-transparent data-[state=open]:bg-transparent"})},{accessorKey:"name",header:"中文名称",searchPlaceholder:"筛选名称"},{accessorKey:"content",header:"翻译内容",searchPlaceholder:"筛选翻译内容"},{accessorKey:"nation",header:"菜单标识"},{accessorKey:"updated_at",header:"更新时间",cell:({row:r})=>ne(r.original.updated_at)}],fe={key:0,class:"absolute top-0 left-0 right-0 h-(--ui-header-height) flex items-center justify-between border-b border-(--ui-border) px-4 sm:px-6 bg-(--ui-bg)"},pe={class:"flex items-center gap-4"},qe=T({name:"BaseTranslate",__name:"translate",setup(r){const u=te(ae).smaller("lg"),d=z(),c=k,$=re(),l=L({isDialog:!1,currentForm:{}}),_=async e=>{e?l.currentForm=S(e):l.currentForm={},l.isDialog=!0},t=async()=>{d.value.reload(),l.isDialog=!1},w=async e=>{const{error:n}=await me({id:e.id});n||d.value.reload()};function C(e){return[{label:"编辑",icon:"material-symbols:edit-square-outline",onSelect(){_(e.original)}},{type:"separator"},{label:"删除",icon:"material-symbols:contract-delete-outline-rounded",color:"error",onSelect(){$.open({color:"error",title:"删除数据",description:"您确定要删除吗？",onPositiveClick(){w(e.original)}})}}]}const m=[...de,{id:"actions",cell:({row:e})=>v("div",{class:"text-right"},v(M,{content:{align:"end"},items:C(e)},()=>v(k,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"})))}];return(e,n)=>{const f=H,g=O,D=J,U=W,s=Q,E=ue;return p(),B(G,null,[a(s,{ui:{body:"pb-[12px]! gap-0!"}},A({body:i(()=>[o(u)?y("",!0):(p(),B("div",fe,[I("div",pe,[a(f),a(D)]),a(o(c),{label:"新增",icon:"i-lucide-plus",onClick:n[1]||(n[1]=F=>_(null))})])),a(U,{ref_key:"tableRef",ref:d,"data-request":o(se),columns:m,"scroll-x":"min-w-[1000px]"},null,8,["data-request"])]),_:2},[o(u)?{name:"header",fn:i(()=>[a(g,{title:"语言列表"},{leading:i(()=>[a(f)]),right:i(()=>[a(o(c),{label:"新增",icon:"i-lucide-plus",onClick:n[0]||(n[0]=F=>_(null))})]),_:1})]),key:"0"}:void 0]),1024),a(E,{dialog:o(l).isDialog,"onUpdate:dialog":n[2]||(n[2]=F=>o(l).isDialog=F),"current-form":o(l).currentForm,onRefresh:t},null,8,["dialog","current-form"])],64)}}});export{qe as default};
