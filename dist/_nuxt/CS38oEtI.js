import{L as T,M as D,w as X,a as Z,_ as ee}from"./DiI9-bkE.js";import{_ as te}from"./BkseHKFx.js";import{_ as le}from"./BjorM33F.js";import{_ as oe}from"./oJBVUttf.js";import{_ as re}from"./BdKneTYw.js";import{_ as se}from"./_BOBmhmt.js";import{_ as ne}from"./CMdLDScf.js";import{_ as ae}from"./DkYr1hfb.js";import{_ as ie}from"./DwJuNt-9.js";import{e as S}from"./adOTzFDE.js";import{c as w}from"./B3KMLFeu.js";import{p as de,J as ue,z as n,a1 as N,a2 as m,Q as o,A as a,W as _,ah as V,u as l,a6 as h,ae as me,a7 as s,R as g,r as I,h as O,c as ce}from"./Cp_GvCOL.js";import{_ as pe}from"./DlAUqK2U.js";import"./CM1DIlR0.js";import"./BlLzDdHJ.js";import"./DVCf4JVd.js";import"./DZaB2s8a.js";import"./_eNQqsN0.js";import"./BqeYyIoT.js";import"./D7PB4JkZ.js";import"./C-fFc4Sm.js";import"./De6cJ90F.js";import"./DnWsfCtc.js";import"./DaMwIZ4f.js";import"./BnfZ4xmv.js";import"./CangPKqO.js";import"./C8Jf-TuN.js";function fe(k){return T.get(D.configList,k)}function ge(k){return T.post(D.configEdit,k)}const xe={class:"flex gap-6 p-6"},be={class:"w-56 shrink-0 space-y-1"},ye={class:"px-3 pt-4 pb-1 text-xs font-semibold text-(--ui-text-dimmed) uppercase tracking-wider"},ve=["onClick"],_e={class:"flex-1 min-w-0"},Ve={class:"mb-4 flex items-center justify-between"},he={class:"text-lg font-semibold text-(--ui-text-highlighted)"},Fe={key:0,class:"mt-0.5 text-sm text-(--ui-text-muted)"},ke={key:0,class:"space-y-4"},Ce={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},we={class:"flex items-start gap-3"},Ue={class:"rounded-lg border border-dashed border-(--ui-border) p-4 space-y-3"},Ie={class:"flex gap-3"},Oe={class:"flex justify-end"},Ke={key:1,class:"space-y-4"},Ae={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Pe={class:"flex items-start gap-3"},Se={key:2,class:"space-y-4"},Ne={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Te={class:"flex items-start gap-3"},De={class:"text-sm text-(--ui-text-muted)"},Ge={class:"font-medium text-(--ui-text-highlighted) mb-1"},$e={key:0},Re={key:1},ze={key:3,class:"space-y-4"},Le={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Me={class:"flex items-start gap-3"},Ee={class:"grid grid-cols-2 gap-4"},je={key:4,class:"space-y-4"},He={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Be={class:"flex items-start gap-3"},Ye={class:"text-sm text-(--ui-text-muted)"},qe={class:"font-medium text-(--ui-text-highlighted) mb-1"},Je={key:0},Qe={key:1},We={key:5,class:"space-y-4"},Xe={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Ze={class:"flex items-start gap-3"},et={class:"text-sm text-(--ui-text-muted)"},tt={class:"font-medium text-(--ui-text-highlighted) mb-1"},lt={key:0},ot={key:1},rt={key:6,class:"space-y-5"},st={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},nt={class:"flex items-start gap-3"},at={class:"space-y-2"},it={class:"space-y-2"},dt={class:"flex items-center gap-2 shrink-0"},ut={key:7,class:"space-y-5"},mt={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},ct={class:"flex items-start gap-3"},pt={class:"grid grid-cols-2 gap-4"},ft={class:"flex items-center justify-between p-4 rounded-lg border border-(--ui-border)"},gt={class:"flex items-center justify-between p-4 rounded-lg border border-(--ui-border)"},xt={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},bt={class:"flex items-start gap-3"},yt={class:"grid grid-cols-3 gap-4"},vt={key:8,class:"space-y-5"},_t={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Vt={class:"flex items-start gap-3"},ht={class:"flex items-center justify-between p-4 rounded-lg border border-(--ui-border)"},Ft={key:9,class:"space-y-5"},kt={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Ct={class:"flex items-start gap-3"},wt={class:"flex items-center justify-between p-4 rounded-lg border border-(--ui-border)"},Ut={class:"flex justify-end"},It=de({name:"SystemConfig",__name:"config",setup(k){const C=X(),t=I({currentForm:{},configs:{},activeConfigKey:"SMS"}),K=I([{label:"基础能力",items:[{key:"SMS",label:"短信服务",icon:"lucide:message-square"},{key:"GOOGLE_AUTH",label:"Google 认证",icon:"lucide:shield-check"}]},{label:"安全策略",items:[{key:"IP_S",label:"IP 白名单(后台)",icon:"lucide:server"},{key:"IP_SS",label:"IP 白名单(前台)",icon:"lucide:monitor"}]},{label:"存储与资源",items:[{key:"MINIO",label:"对象存储",icon:"lucide:database"}]},{label:"文档与协议",items:[{key:"HELP",label:"帮助中心",icon:"lucide:circle-help"},{key:"PRIVACY",label:"隐私政策",icon:"lucide:eye-off"},{key:"PROVISION",label:"服务条款",icon:"lucide:scroll-text"}]},{label:"业务配置",items:[{key:"PAY",label:"支付配置",icon:"lucide:credit-card"},{key:"INVITE",label:"邀请配置",icon:"lucide:user-plus"},{key:"OS",label:"系统优化",icon:"lucide:cpu"},{key:"KNOT",label:"聊天总结",icon:"lucide:message-circle"},{key:"DOCTOR_CONFIG",label:"创作管理",icon:"lucide:pen-tool"}]}]),G=async i=>{try{const{data:e,error:d}=await fe({key:i});if(!d){const y=["KNOT","DOCTOR_CONFIG"].includes(i),F={...w(e),open:y?Number(e.open):!!e.open,ip:Array.isArray(e.ip)?e.ip:[],desc:e.desc?typeof e.desc=="string"||Array.isArray(e.desc)?e.desc:{...e.desc}:"",content:e.content?typeof e.content=="string"||Array.isArray(e.content)?e.content:{...e.content}:"",key:e.key||"",secret:e.secret||"",url:e.url||""};t.configs[i]=F,t.currentForm=F}}catch(e){console.error(e),C.add({title:"获取配置失败",color:"error"})}},U=O(!1),$=async()=>{try{U.value=!0;const i={...t.currentForm,open:typeof t.currentForm.open=="boolean"?t.currentForm.open?1:0:t.currentForm.open,content:t.currentForm.content,ip:Array.isArray(t.currentForm.ip)?t.currentForm.ip:[],desc:t.currentForm.desc},e={key:t.activeConfigKey,content:JSON.stringify(i),remarks:i.remarks||""},{error:d}=await ge(e);d?C.add({title:"保存失败",color:"error"}):(C.add({title:"操作成功",color:"success"}),t.configs[t.activeConfigKey]=w(i),t.currentForm=w(i))}catch(i){console.error(i),C.add({title:"请求出错",color:"error"})}finally{U.value=!1}},A=async i=>{if(t.activeConfigKey=i,!t.configs[i])await G(i);else{const e=t.configs[i],d=["KNOT","DOCTOR_CONFIG"].includes(i);t.currentForm={...w(e),open:d?Number(e.open):!!e.open,remarks:e.remarks||"",ip:Array.isArray(e.ip)?e.ip:[],desc:e.desc?typeof e.desc=="string"||Array.isArray(e.desc)?e.desc:{...e.desc}:"",content:e.content?typeof e.content=="string"||Array.isArray(e.content)?e.content:{...e.content}:""}}},b=I({username:"",password:""}),R=()=>{!b.username||!b.password||(t.currentForm.content.push({id:Date.now(),...b}),b.username="",b.password="")},z=i=>{const e=t.currentForm.content;t.currentForm.content=e.filter(d=>d.id!==i)},L=()=>{t.currentForm.ip||(t.currentForm.ip=[]),t.currentForm.ip.push({addr:"",remarks:""})},M=i=>t.currentForm.ip?.splice(i,1),E=()=>{t.currentForm.desc||(t.currentForm.desc=[]),t.currentForm.desc.push({id:Date.now(),title:"",content:""})},j=i=>{t.currentForm.desc=t.currentForm.desc?.filter(e=>e.id!==i)},P=O([]),H=O([]),B=async()=>{const[i,e]=await Promise.all([S({ty:0}),S({ty:1})]);i.data?.list&&(P.value=i.data.list.map(d=>({label:d.name,value:d.id}))),e.data?.list&&(H.value=e.data.list.map(d=>({label:d.name,value:d.id})))},Y=ce(()=>{for(const i of K){const e=i.items.find(d=>d.key===t.activeConfigKey);if(e)return e.label}return t.activeConfigKey}),q=async()=>{await B(),await A(t.activeConfigKey)};return ue(()=>q()),(i,e)=>{const d=Z,y=te,F=le,u=oe,x=ee,c=re,v=se,J=ne,Q=ae,W=ie;return n(),N(W,null,{default:m(()=>[o("div",xe,[o("nav",be,[(n(!0),a(_,null,V(l(K),r=>(n(),a(_,{key:r.label},[o("p",ye,h(r.label),1),(n(!0),a(_,null,V(r.items,p=>(n(),a("button",{key:p.key,class:me(["w-full flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm transition-colors cursor-pointer",l(t).activeConfigKey===p.key?"bg-(--ui-bg-elevated) text-(--ui-text-highlighted) font-medium shadow-sm":"text-(--ui-text-muted) hover:text-(--ui-text) hover:bg-(--ui-bg-elevated)/50"]),onClick:f=>A(p.key)},[s(d,{name:p.icon,class:"size-4 shrink-0"},null,8,["name"]),o("span",null,h(p.label),1)],10,ve))),128))],64))),128))]),o("div",_e,[o("div",Ve,[o("div",null,[o("h2",he,h(l(Y)),1),l(t).currentForm.remarks?(n(),a("p",Fe,h(l(t).currentForm.remarks),1)):g("",!0)]),l(t).currentForm.open!==void 0&&!["DOCTOR_CONFIG","KNOT"].includes(l(t).activeConfigKey)?(n(),N(y,{key:0,modelValue:l(t).currentForm.open,"onUpdate:modelValue":e[0]||(e[0]=r=>l(t).currentForm.open=r)},null,8,["modelValue"])):g("",!0)]),s(F,{class:"mb-6"}),l(t).activeConfigKey==="SMS"?(n(),a("div",ke,[o("div",Ce,[o("div",we,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[37]||(e[37]=o("div",{class:"text-sm text-(--ui-text-muted)"},[o("p",{class:"font-medium text-(--ui-text-highlighted) mb-1"}," 短信服务配置说明 "),o("p",null,"配置短信服务商账号信息，用于发送验证码、通知等短信。支持配置多个账号实现负载均衡和故障转移。")],-1))])]),(n(!0),a(_,null,V(l(t).currentForm.content,r=>(n(),a("div",{key:r.id,class:"flex items-center gap-3"},[s(u,{modelValue:r.username,"onUpdate:modelValue":p=>r.username=p,placeholder:"邮箱 / 账号",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:r.password,"onUpdate:modelValue":p=>r.password=p,placeholder:"密码",type:"password",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s(x,{size:"sm",color:"error",variant:"soft",icon:"i-lucide-trash-2",onClick:p=>z(r.id)},null,8,["onClick"])]))),128)),o("div",Ue,[o("div",Ie,[s(u,{modelValue:l(b).username,"onUpdate:modelValue":e[1]||(e[1]=r=>l(b).username=r),placeholder:"邮箱 / 账号",class:"flex-1"},null,8,["modelValue"]),s(u,{modelValue:l(b).password,"onUpdate:modelValue":e[2]||(e[2]=r=>l(b).password=r),placeholder:"密码",type:"password",class:"flex-1"},null,8,["modelValue"])]),o("div",Oe,[s(x,{size:"sm",color:"neutral",variant:"soft",icon:"i-lucide-plus",label:"新增账号",onClick:R})])]),s(c,{label:"备注"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[3]||(e[3]=r=>l(t).currentForm.remarks=r),placeholder:"备注",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),l(t).activeConfigKey==="GOOGLE_AUTH"?(n(),a("div",Ke,[o("div",Ae,[o("div",Pe,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[38]||(e[38]=o("div",{class:"text-sm text-(--ui-text-muted) space-y-2"},[o("p",{class:"font-medium text-(--ui-text-highlighted)"}," Google 认证配置说明 "),o("p",null,"用于实现 Google 第三方登录功能。需要在 Google Cloud Console 创建 OAuth 2.0 凭据获取 Client ID。"),o("div",{class:"mt-2 p-3 rounded bg-(--ui-bg) text-xs space-y-1"},[o("p",{class:"font-medium text-(--ui-text)"}," 获取步骤： "),o("p",null,"1. 访问 Google Cloud Console (console.cloud.google.com)"),o("p",null,"2. 创建项目或选择已有项目"),o("p",null,"3. 进入「API 和服务」→「凭据」"),o("p",null,"4. 创建 OAuth 2.0 客户端 ID"),o("p",null,"5. 配置授权重定向 URI")])],-1))])]),s(c,{label:"Client ID",hint:"Google OAuth 2.0 客户端 ID"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.content,"onUpdate:modelValue":e[4]||(e[4]=r=>l(t).currentForm.content=r),placeholder:"例如: xxxxx.apps.googleusercontent.com",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"说明"},{default:m(()=>[s(v,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[5]||(e[5]=r=>l(t).currentForm.remarks=r),placeholder:"请输入说明内容",rows:3,class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),l(t).activeConfigKey==="IP_S"||l(t).activeConfigKey==="IP_SS"?(n(),a("div",Se,[o("div",Ne,[o("div",Te,[s(d,{name:"i-lucide-shield-alert",class:"w-5 h-5 text-(--ui-warning) shrink-0 mt-0.5"}),o("div",De,[o("p",Ge,h(l(t).activeConfigKey==="IP_S"?"IP 白名单（后台）":"IP 白名单（前台）")+"配置说明 ",1),l(t).activeConfigKey==="IP_S"?(n(),a("p",$e," 限制后台管理系统的访问 IP，只有白名单内的 IP 才能访问管理后台。留空则不限制。 ")):(n(),a("p",Re," 限制前台接口的访问 IP，用于 API 调用限制。留空则不限制。 ")),e[39]||(e[39]=o("p",{class:"mt-2 text-xs text-(--ui-text-dimmed)"}," 支持单个 IP（如 192.168.1.1）或 IP 段（如 192.168.1.0/24） ",-1))])])]),(n(!0),a(_,null,V(l(t).currentForm.ip,(r,p)=>(n(),a("div",{key:p,class:"flex items-center gap-3"},[s(u,{modelValue:r.addr,"onUpdate:modelValue":f=>r.addr=f,placeholder:"IP 地址，如 192.168.1.1",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:r.remarks,"onUpdate:modelValue":f=>r.remarks=f,placeholder:"备注，如：办公室",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s(x,{size:"sm",color:"error",variant:"soft",icon:"i-lucide-trash-2",onClick:f=>M(p)},null,8,["onClick"])]))),128)),s(x,{size:"sm",color:"neutral",variant:"soft",icon:"i-lucide-plus",label:"新增 IP",onClick:L})])):g("",!0),l(t).activeConfigKey==="MINIO"?(n(),a("div",ze,[o("div",Le,[o("div",Me,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[40]||(e[40]=o("div",{class:"text-sm text-(--ui-text-muted) space-y-2"},[o("p",{class:"font-medium text-(--ui-text-highlighted)"}," 对象存储配置说明 "),o("p",null,"配置 MinIO 或兼容 S3 协议的对象存储服务，用于存储图片、文件等静态资源。"),o("div",{class:"mt-2 p-3 rounded bg-(--ui-bg) text-xs space-y-1"},[o("p",{class:"font-medium text-(--ui-text)"}," 配置说明： "),o("p",null,"• Access Key: 访问密钥 ID，用于身份验证"),o("p",null,"• Secret Key: 访问密钥密码，请妥善保管"),o("p",null,"• 访问域名: 对外访问的 CDN 或存储桶域名")])],-1))])]),o("div",Ee,[s(c,{label:"Access Key",hint:"访问密钥 ID"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.key,"onUpdate:modelValue":e[6]||(e[6]=r=>l(t).currentForm.key=r),placeholder:"请输入 Access Key",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"Secret Key",hint:"访问密钥密码"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.secret,"onUpdate:modelValue":e[7]||(e[7]=r=>l(t).currentForm.secret=r),placeholder:"请输入 Secret Key",type:"password",class:"w-full"},null,8,["modelValue"])]),_:1})]),s(c,{label:"访问域名",hint:"对外访问的域名地址"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.url,"onUpdate:modelValue":e[8]||(e[8]=r=>l(t).currentForm.url=r),placeholder:"例如 https://cdn.example.com",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"说明"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[9]||(e[9]=r=>l(t).currentForm.remarks=r),placeholder:"说明信息",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),l(t).activeConfigKey==="HELP"||l(t).activeConfigKey==="PAY"?(n(),a("div",je,[o("div",He,[o("div",Be,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),o("div",Ye,[o("p",qe,h(l(t).activeConfigKey==="HELP"?"帮助中心":"支付配置")+"说明 ",1),l(t).activeConfigKey==="HELP"?(n(),a("p",Je," 配置帮助中心的常见问题列表，用户可在 App 内查看。建议添加常见问题及解答。 ")):(n(),a("p",Qe," 配置支付相关的说明信息，如支付方式、注意事项等，展示给用户。 "))])])]),(n(!0),a(_,null,V(l(t).currentForm.desc,r=>(n(),a("div",{key:r.id,class:"flex items-start gap-3"},[s(u,{modelValue:r.title,"onUpdate:modelValue":p=>r.title=p,placeholder:"标题",class:"w-48 shrink-0"},null,8,["modelValue","onUpdate:modelValue"]),s(v,{modelValue:r.content,"onUpdate:modelValue":p=>r.content=p,rows:2,placeholder:"内容",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s(x,{size:"sm",color:"error",variant:"soft",icon:"i-lucide-trash-2",class:"mt-1",onClick:p=>j(r.id)},null,8,["onClick"])]))),128)),s(x,{size:"sm",color:"neutral",variant:"soft",icon:"i-lucide-plus",label:"新增条目",onClick:E}),s(c,{label:"备注"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[10]||(e[10]=r=>l(t).currentForm.remarks=r),placeholder:"备注",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),["PRIVACY","PROVISION"].includes(l(t).activeConfigKey)?(n(),a("div",We,[o("div",Xe,[o("div",Ze,[s(d,{name:"i-lucide-file-text",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),o("div",et,[o("p",tt,h(l(t).activeConfigKey==="PRIVACY"?"隐私政策":"服务条款")+"配置说明 ",1),l(t).activeConfigKey==="PRIVACY"?(n(),a("p",lt," 配置应用的隐私政策内容，说明如何收集、使用和保护用户数据。根据法规要求必须提供。 ")):(n(),a("p",ot," 配置应用的服务条款/用户协议，明确用户使用服务的权利和义务。 "))])])]),s(J,{modelValue:l(t).currentForm.content,"onUpdate:modelValue":e[11]||(e[11]=r=>l(t).currentForm.content=r),"min-height":"300px"},null,8,["modelValue"]),s(c,{label:"备注"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[12]||(e[12]=r=>l(t).currentForm.remarks=r),placeholder:"请输入备注信息",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),l(t).activeConfigKey==="INVITE"?(n(),a("div",rt,[o("div",st,[o("div",nt,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[41]||(e[41]=o("div",{class:"text-sm text-(--ui-text-muted)"},[o("p",{class:"font-medium text-(--ui-text-highlighted) mb-1"}," 邀请配置说明 "),o("p",null,"配置邀请活动的展示内容和奖励规则，用户可通过分享邀请链接获得奖励。")],-1))])]),s(c,{label:"概要",hint:"邀请活动的简短描述"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.summary,"onUpdate:modelValue":e[13]||(e[13]=r=>l(t).currentForm.summary=r),placeholder:"请输入概要",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"详细说明"},{default:m(()=>[s(v,{modelValue:l(t).currentForm.desc,"onUpdate:modelValue":e[14]||(e[14]=r=>l(t).currentForm.desc=r),placeholder:"请输入详细说明",rows:4,class:"w-full"},null,8,["modelValue"])]),_:1}),o("div",at,[e[42]||(e[42]=o("label",{class:"text-sm font-medium text-(--ui-text)"},"相关链接",-1)),(n(!0),a(_,null,V(l(t).currentForm.link,(r,p)=>(n(),a("div",{key:p,class:"flex items-center gap-3"},[s(u,{modelValue:l(t).currentForm.link[p],"onUpdate:modelValue":f=>l(t).currentForm.link[p]=f,placeholder:"请输入链接",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s(x,{size:"sm",color:"error",variant:"soft",icon:"i-lucide-trash-2",onClick:f=>l(t).currentForm.link.splice(p,1)},null,8,["onClick"])]))),128)),s(x,{size:"sm",color:"neutral",variant:"soft",icon:"i-lucide-plus",label:"新增链接",onClick:e[15]||(e[15]=r=>l(t).currentForm.link.push(""))})]),o("div",it,[e[44]||(e[44]=o("label",{class:"text-sm font-medium text-(--ui-text)"},"奖励规则条目",-1)),(n(!0),a(_,null,V(l(t).currentForm.regular,(r,p)=>(n(),a("div",{key:p,class:"flex items-center gap-3 p-3 rounded-lg border border-(--ui-border)"},[s(u,{modelValue:r.content,"onUpdate:modelValue":f=>r.content=f,placeholder:"条目内容",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),o("div",dt,[e[43]||(e[43]=o("span",{class:"text-sm text-(--ui-text-muted)"},"重点",-1)),s(y,{modelValue:r.is_big,"onUpdate:modelValue":f=>r.is_big=f},null,8,["modelValue","onUpdate:modelValue"])]),s(x,{size:"sm",color:"error",variant:"soft",icon:"i-lucide-trash-2",onClick:f=>l(t).currentForm.regular.splice(p,1)},null,8,["onClick"])]))),128)),s(x,{size:"sm",color:"neutral",variant:"soft",icon:"i-lucide-plus",label:"新增条目",onClick:e[16]||(e[16]=r=>l(t).currentForm.regular.push({content:"",is_big:!1}))})]),s(c,{label:"备注"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[17]||(e[17]=r=>l(t).currentForm.remarks=r),placeholder:"备注信息",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),l(t).activeConfigKey==="OS"?(n(),a("div",ut,[o("div",mt,[o("div",ct,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[45]||(e[45]=o("div",{class:"text-sm text-(--ui-text-muted)"},[o("p",{class:"font-medium text-(--ui-text-highlighted) mb-1"}," 缓存配置说明 "),o("p",null,"缓存默认开启，可有效减少服务器压力，提升响应速度。如需调试可临时关闭。")],-1))])]),o("div",pt,[o("div",ft,[e[46]||(e[46]=o("div",null,[o("p",{class:"font-medium text-(--ui-text-highlighted)"}," 关闭客户端缓存 "),o("p",{class:"text-xs text-(--ui-text-muted)"}," 开启后将禁用客户端缓存 ")],-1)),s(y,{"model-value":l(t).currentForm.client_cache===0,"onUpdate:modelValue":e[18]||(e[18]=r=>l(t).currentForm.client_cache=r?0:60)},null,8,["model-value"])]),o("div",gt,[e[47]||(e[47]=o("div",null,[o("p",{class:"font-medium text-(--ui-text-highlighted)"}," 关闭服务器缓存 "),o("p",{class:"text-xs text-(--ui-text-muted)"}," 开启后将禁用服务器缓存 ")],-1)),s(y,{"model-value":l(t).currentForm.server_cache===0,"onUpdate:modelValue":e[19]||(e[19]=r=>l(t).currentForm.server_cache=r?0:60)},null,8,["model-value"])])]),s(c,{label:"公开数量限制",hint:"限制用户可公开发布的内容数量"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.publish,"onUpdate:modelValue":e[20]||(e[20]=r=>l(t).currentForm.publish=r),type:"number",placeholder:"请输入公开数量限制",class:"w-full"},null,8,["modelValue"])]),_:1}),s(F),o("div",xt,[o("div",bt,[s(d,{name:"i-lucide-percent",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[48]||(e[48]=o("div",{class:"text-sm text-(--ui-text-muted)"},[o("p",{class:"font-medium text-(--ui-text-highlighted) mb-1"}," 费率配置说明 "),o("p",null,"配置各类业务的费率百分比，数值范围 0-100。")],-1))])]),o("div",yt,[s(c,{label:"邀请费率 (%)",hint:"邀请奖励分成比例"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.invite_rate,"onUpdate:modelValue":e[21]||(e[21]=r=>l(t).currentForm.invite_rate=r),type:"number",placeholder:"例如 50",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"游戏费率 (%)",hint:"游戏收益分成比例"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.game_rate,"onUpdate:modelValue":e[22]||(e[22]=r=>l(t).currentForm.game_rate=r),type:"number",placeholder:"例如 90",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"游戏提现费率 (%)",hint:"提现手续费比例"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.game_tx_rate,"onUpdate:modelValue":e[23]||(e[23]=r=>l(t).currentForm.game_tx_rate=r),type:"number",placeholder:"例如 50",class:"w-full"},null,8,["modelValue"])]),_:1})]),s(c,{label:"备注"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[24]||(e[24]=r=>l(t).currentForm.remarks=r),placeholder:"备注信息",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),l(t).activeConfigKey==="KNOT"?(n(),a("div",vt,[o("div",_t,[o("div",Vt,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[49]||(e[49]=o("div",{class:"text-sm text-(--ui-text-muted)"},[o("p",{class:"font-medium text-(--ui-text-highlighted) mb-1"},"聊天总结设计说明"),o("p",null,"配置角色扮演对话的记忆助手，用于将对话压缩成简洁的记忆摘要。")],-1))])]),s(c,{label:"模型",hint:"选择用于生成摘要的模型"},{default:m(()=>[s(Q,{modelValue:l(t).currentForm.model_id,"onUpdate:modelValue":e[25]||(e[25]=r=>l(t).currentForm.model_id=r),items:l(P),placeholder:"请选择模型",class:"w-full"},null,8,["modelValue","items"])]),_:1}),s(c,{label:"提示词",hint:"生成摘要时使用的提示词"},{default:m(()=>[s(v,{modelValue:l(t).currentForm.prompt,"onUpdate:modelValue":e[26]||(e[26]=r=>l(t).currentForm.prompt=r),rows:4,placeholder:"请输入提示词",class:"w-full"},null,8,["modelValue"])]),_:1}),o("div",ht,[e[50]||(e[50]=o("div",null,[o("p",{class:"font-medium text-(--ui-text-highlighted)"},"启用"),o("p",{class:"text-xs text-(--ui-text-muted)"},"开启后将启用聊天总结功能")],-1)),s(y,{"model-value":l(t).currentForm.open===2,"onUpdate:modelValue":e[27]||(e[27]=r=>l(t).currentForm.open=r?2:0)},null,8,["model-value"])]),s(c,{label:"数量",hint:"摘要相关数量配置"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.num,"onUpdate:modelValue":e[28]||(e[28]=r=>l(t).currentForm.num=r),type:"number",placeholder:"请输入数量",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"备注"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[29]||(e[29]=r=>l(t).currentForm.remarks=r),placeholder:"备注信息",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),l(t).activeConfigKey==="DOCTOR_CONFIG"?(n(),a("div",Ft,[o("div",kt,[o("div",Ct,[s(d,{name:"i-lucide-info",class:"w-5 h-5 text-(--ui-primary) shrink-0 mt-0.5"}),e[51]||(e[51]=o("div",{class:"text-sm text-(--ui-text-muted)"},[o("p",{class:"font-medium text-(--ui-text-highlighted) mb-1"},"创作管理配置说明"),o("p",null,"配置创作审核流程的模型、提示词和迭代次数等参数。")],-1))])]),o("div",wt,[e[52]||(e[52]=o("div",null,[o("p",{class:"font-medium text-(--ui-text-highlighted)"},"启用"),o("p",{class:"text-xs text-(--ui-text-muted)"},"开启后将启用创作管理功能")],-1)),s(y,{"model-value":l(t).currentForm.open===2,"onUpdate:modelValue":e[30]||(e[30]=r=>l(t).currentForm.open=r?2:0)},null,8,["model-value"])]),s(c,{label:"最大迭代次数"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.max_iterations,"onUpdate:modelValue":e[31]||(e[31]=r=>l(t).currentForm.max_iterations=r),type:"number",placeholder:"请输入最大迭代次数",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"系统提示词",hint:"系统级别的提示词"},{default:m(()=>[s(v,{modelValue:l(t).currentForm.system_prompt,"onUpdate:modelValue":e[32]||(e[32]=r=>l(t).currentForm.system_prompt=r),rows:4,placeholder:"请输入系统提示词",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"初始用户消息模板",hint:"初始用户消息的模板"},{default:m(()=>[s(v,{modelValue:l(t).currentForm.initial_prompt,"onUpdate:modelValue":e[33]||(e[33]=r=>l(t).currentForm.initial_prompt=r),rows:4,placeholder:"请输入初始用户消息模板",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"条目注入消息模板",hint:"条目注入时使用的消息模板"},{default:m(()=>[s(v,{modelValue:l(t).currentForm.inject_prompt,"onUpdate:modelValue":e[34]||(e[34]=r=>l(t).currentForm.inject_prompt=r),rows:4,placeholder:"请输入条目注入消息模板",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"强制终审消息模板",hint:"强制终审时使用的消息模板"},{default:m(()=>[s(v,{modelValue:l(t).currentForm.final_prompt,"onUpdate:modelValue":e[35]||(e[35]=r=>l(t).currentForm.final_prompt=r),rows:4,placeholder:"请输入强制终审消息模板",class:"w-full"},null,8,["modelValue"])]),_:1}),s(c,{label:"备注"},{default:m(()=>[s(u,{modelValue:l(t).currentForm.remarks,"onUpdate:modelValue":e[36]||(e[36]=r=>l(t).currentForm.remarks=r),placeholder:"备注信息",class:"w-full"},null,8,["modelValue"])]),_:1})])):g("",!0),s(F,{class:"mt-6 mb-4"}),o("div",Ut,[s(x,{color:"primary",icon:"i-lucide-save",label:"保存配置",loading:l(U),onClick:$},null,8,["loading"])])])])]),_:1})}}}),ll=pe(It,[["__scopeId","data-v-9a4ca717"]]);export{ll as default};
