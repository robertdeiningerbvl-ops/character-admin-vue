import{_ as T}from"./CEcF5dWm.js";import{f as S,c as I,ap as P,j as V,aE as q,l as z,a as j,o as B,w as r,D as _,B as t,I as K,F as M,_ as v,b as o,a4 as N,aF as n,i as O,k as A,G as L}from"./DhOLkSnF.js";import{b as G,_ as H,a as J,c as Q}from"./DAqc9GYg.js";import{_ as W}from"./CSbqei5V.js";import{_ as X}from"./DAIKkUkW.js";import{_ as Y}from"./DAeRr84W.js";import{_ as Z}from"./D0vBe5Vh.js";import{_ as ee}from"./Db__RPjw.js";import{_ as te}from"./BZLiX_8y.js";import{y as ae,z as oe,A as se,B as ne}from"./D1QVHQma.js";import{c as C}from"./45RcOEEf.js";import{o as re,n as le,s as ie}from"./B-mCBPct.js";import{_ as F}from"./-rcGzxkB.js";import{f as me}from"./BmKy9gZZ.js";import{u as ce}from"./BVQSm7Ip.js";import"./CZg69nbc.js";import"./CwtpYSSp.js";import"./DPsBupTg.js";import"./9Rxep3Q5.js";import"./Bo5OMT4U.js";import"./CLKxJTZi.js";import"./HRiyi1uV.js";import"./BrXYpapi.js";import"./BXSyqGa5.js";const de={class:"p-6"},ue={class:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-950/30 dark:to-orange-950/30 rounded-xl p-5 space-y-5 border border-red-100 dark:border-red-900/50"},pe={class:"flex items-center gap-2 mb-1"},fe={class:"flex items-center justify-between w-full"},_e={class:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2"},ge={class:"flex gap-3"},be=S({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})}},emits:["update:dialog","refresh"],setup(l,{emit:s}){const m=l,u=s,i=I({get(){return m.dialog},set(c){u("update:dialog",c)}}),y=()=>{i.value=!1},x=P("formRef"),h=re({name:ie().nonempty("请输入敏感词"),state:le().min(2)}),w=[{label:"开启",value:2},{label:"已删除",value:4}],k=[{label:"系统",value:0},{label:"业务",value:1}],e=V({loading:!1,form:{}}),p=q();async function U(){e.loading=!0;const c=C(e.form),{error:a}=await(c.id?ae:oe)(c);a||(p.add({title:"操作成功",color:"success"}),u("refresh")),e.loading=!1}return z(()=>m.dialog,c=>{c&&(e.loading=!1,e.form=C(m.currentForm))}),(c,a)=>{const d=K,$=X,g=Y,b=Z,R=ee,D=v,E=te;return B(),j(E,{open:o(i),"onUpdate:open":a[4]||(a[4]=f=>N(i)?i.value=f:null),title:l.currentForm.id?"编辑敏感词":"新增敏感词",dismissible:!1,ui:{content:"sm:max-w-2xl",body:"p-0",footer:"justify-end bg-gray-50 dark:bg-gray-900"}},{body:r(()=>[_("div",de,[t(R,{ref_key:"formRef",ref:x,schema:o(h),state:o(e).form,class:"space-y-6",onSubmit:U},{default:r(()=>[_("div",ue,[_("div",pe,[t(d,{name:"i-material-symbols-warning-outline",class:"w-5 h-5 text-red-600 dark:text-red-400"}),a[5]||(a[5]=_("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 敏感词信息 ",-1))]),t(g,{label:"敏感词",name:"name",required:""},{default:r(()=>[t($,{modelValue:o(e).form.name,"onUpdate:modelValue":a[0]||(a[0]=f=>o(e).form.name=f),modelModifiers:{trim:!0},placeholder:"请输入敏感词",class:"w-full",size:"lg"},{leading:r(()=>[t(d,{name:"i-material-symbols-warning-outline",class:"w-5 h-5 text-red-400"})]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"类型",name:"ty",required:""},{default:r(()=>[t(b,{modelValue:o(e).form.ty,"onUpdate:modelValue":a[1]||(a[1]=f=>o(e).form.ty=f),items:k,placeholder:"请选择类型",class:"w-full",size:"lg"},{leading:r(()=>[t(d,{name:"i-material-symbols-category-outline",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"状态",name:"state",required:""},{default:r(()=>[t(b,{modelValue:o(e).form.state,"onUpdate:modelValue":a[2]||(a[2]=f=>o(e).form.state=f),items:w,placeholder:"请选择状态",class:"w-full",size:"lg"},{leading:r(()=>[t(d,{name:"i-material-symbols-toggle-on-outline",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["schema","state"])])]),footer:r(()=>[_("div",fe,[_("div",_e,[t(d,{name:"i-material-symbols-info-outline",class:"w-4 h-4"}),_("span",null,M(l.currentForm.id?"修改后将更新敏感词配置":"确认后将创建新的敏感词"),1)]),_("div",ge,[t(D,{label:"取消",color:"neutral",variant:"outline",size:"lg",onClick:y},{leading:r(()=>[t(d,{name:"i-material-symbols-close"})]),_:1}),t(D,{loading:o(e).loading,label:"确认保存",variant:"solid",size:"lg",onClick:a[3]||(a[3]=f=>o(x)?.submit())},{leading:r(()=>[t(d,{name:"i-material-symbols-check"})]),_:1},8,["loading"])])])]),_:1},8,["open","title"])}}}),ye=Object.assign(be,{__name:"CommonSensitiveEdit"}),xe={2:["开启","success"],4:["删除","error"]},ve={0:["系统","primary","i-material-symbols-settings-outline"],1:["业务","green","i-material-symbols-business-center"]},he=[{accessorKey:"id",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},header:()=>n(v,{color:"neutral",variant:"ghost",label:"ID",class:"-mx-2.5 hover:bg-transparent focus:bg-transparent data-[state=open]:bg-transparent"}),cell:({row:l})=>n("span",{class:"font-mono text-sm font-semibold text-primary-600 dark:text-primary-400"},`#${l.original.id}`)},{accessorKey:"name",searchPlaceholder:"筛选敏感词",header:"敏感词",cell:({row:l})=>{const s=l.original.name;return s?n("div",{class:"flex items-center gap-1.5"},[n("i",{class:"i-material-symbols-warning w-5 h-5 text-red-600 dark:text-red-400"}),n("span",{class:"font-semibold text-red-700 dark:text-red-300"},s)]):n("span",{class:"text-gray-400"},"-")}},{accessorKey:"ty",header:"类型",formItemProps:{component:"Select",componentProps:{options:[{label:"系统",value:0},{label:"业务",value:1}]}},cell:({row:l})=>{const s=l.original.ty,[m,u]=ve[s]||["未知","gray"];return n(F,{variant:"subtle",color:u,class:"font-medium"},()=>m)}},{accessorKey:"state",header:"状态",formItemProps:{component:"Select",componentProps:{options:[{label:"开启",value:2},{label:"删除",value:4}]}},cell:({row:l})=>{const s=l.original.state,[m,u]=xe[s]||["未知","gray"];return n(F,{variant:"subtle",color:u,class:"font-medium"},()=>m)}},{accessorKey:"created_at",header:"创建时间",cell:({row:l})=>{const s=l.original.created_at;return s?n("div",{class:"flex items-center gap-1.5"},[n("i",{class:"i-material-symbols-schedule-outline w-4 h-4 text-gray-400"}),n("span",{class:"text-sm text-gray-600 dark:text-gray-300"},me(s))]):n("span",{class:"text-gray-400"},"-")}}],Ge=S({name:"SensitiveList",__name:"sensitive",setup(l){const s=O(),m=v,u=ce(),i=V({isDialog:!1,currentForm:{}}),y=async e=>{i.isDialog=!0,e?i.currentForm=C(e):i.currentForm={state:2}},x=async()=>{s.value.reload(),i.isDialog=!1},h=async e=>{const{error:p}=await ne({id:e.id});p||s.value.reload()};function w(e){return[{label:"编辑",icon:"material-symbols:edit-square-outline",onSelect(){y(e.original)}},{type:"separator"},{label:"删除",icon:"material-symbols:contract-delete-outline-rounded",color:"error",onSelect(){u.open({color:"error",title:"删除敏感词",description:"您确定要删除这个敏感词吗？",onPositiveClick(){h(e.original)}})}}]}const k=[...he,{id:"actions",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},cell:({row:e})=>n("div",{class:"text-right"},n(T,{content:{align:"end"},items:w(e)},()=>n(v,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"})))}];return(e,p)=>{const U=J,c=H,a=G,d=W,$=Q,g=ye;return B(),A(L,null,[t($,{ui:{body:"pb-[12px]! gap-0!"}},{header:r(()=>[t(c,{title:"敏感词列表"},{leading:r(()=>[t(U)]),right:r(()=>[t(o(m),{label:"新增",icon:"i-lucide-plus",onClick:p[0]||(p[0]=b=>y(null))})]),_:1})]),body:r(()=>[t(a,{class:"mb-4"}),t(d,{ref_key:"tableRef",ref:s,"data-request":o(se),columns:k,"scroll-x":"min-w-[1000px]"},null,8,["data-request"])]),_:1}),t(g,{dialog:o(i).isDialog,"onUpdate:dialog":p[1]||(p[1]=b=>o(i).isDialog=b),"current-form":o(i).currentForm,onRefresh:x},null,8,["dialog","current-form"])],64)}}});export{Ge as default};
