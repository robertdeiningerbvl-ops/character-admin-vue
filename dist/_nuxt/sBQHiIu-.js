import{_ as R}from"./CEcF5dWm.js";import{f as F,c as B,ap as E,j as K,aE as A,l as j,a as N,o as T,w as o,D as m,B as e,I as O,F as L,_ as k,b as l,A as M,a4 as G,aF as t,i as H,k as q,C as J,G as Q}from"./DhOLkSnF.js";import{_ as W,a as X,b as Y,c as Z}from"./DAqc9GYg.js";import{_ as ee}from"./CSbqei5V.js";import{_ as te}from"./DAIKkUkW.js";import{_ as ae}from"./DAeRr84W.js";import{_ as le}from"./D0vBe5Vh.js";import{_ as se}from"./CVanS2c1.js";import{_ as oe}from"./Db__RPjw.js";import{_ as re}from"./BZLiX_8y.js";import{c as ie,d as ne,e as me,r as de}from"./wj9UriJM.js";import{c as C}from"./45RcOEEf.js";import{u as ce,b as ue}from"./Bo5OMT4U.js";import{_ as D}from"./-rcGzxkB.js";import{_ as pe}from"./CLU2_0cD.js";import{f as ge}from"./BmKy9gZZ.js";import{u as fe}from"./BVQSm7Ip.js";import"./CZg69nbc.js";import"./CwtpYSSp.js";import"./DPsBupTg.js";import"./9Rxep3Q5.js";import"./CLKxJTZi.js";import"./HRiyi1uV.js";import"./BrXYpapi.js";import"./BXSyqGa5.js";const ye={class:"p-6"},be={class:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 rounded-xl p-5 space-y-5 border border-blue-100 dark:border-blue-900/50"},xe={class:"flex items-center gap-2 mb-1"},_e={class:"grid grid-cols-2 gap-4"},he={class:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/30 dark:to-pink-950/30 rounded-xl p-5 space-y-5 border border-purple-100 dark:border-purple-900/50"},we={class:"flex items-center gap-2 mb-1"},ve={class:"grid grid-cols-2 gap-4"},ke={class:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 rounded-xl p-5 space-y-5 border border-green-100 dark:border-green-900/50"},Ve={class:"flex items-center gap-2 mb-1"},Ue={class:"grid grid-cols-2 gap-4"},$e={class:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/30 dark:to-amber-950/30 rounded-xl p-5 space-y-5 border border-orange-100 dark:border-orange-900/50"},ze={class:"flex items-center gap-2 mb-1"},De={class:"grid grid-cols-2 gap-4"},Te={class:"bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-900/50 dark:to-slate-900/50 rounded-xl p-5 space-y-5 border border-gray-200 dark:border-gray-800"},qe={class:"flex items-center gap-2 mb-1"},Pe={class:"flex items-center justify-between w-full"},Fe={class:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2"},Ke={class:"flex gap-3"},Me=F({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})}},emits:["update:dialog","refresh"],setup(i,{emit:r}){const y=i,b=r,f=B({get(){return y.dialog},set(c){b("update:dialog",c)}}),V=()=>{f.value=!1},x=E("formRef"),_=[{label:"启用",value:2},{label:"已删除",value:1}],U=[{label:"usdt",value:3},{label:"微信",value:2},{label:"支付宝",value:1}],$=[{label:"范围金额",value:2},{label:"固定金额",value:1}],s=K({loading:!1,avatarLoading:!1,form:{}}),z=A();async function p(){s.loading=!0;const c=C(s.form),{error:a}=await(c.id?ie:ne)(c);a||(z.add({title:"操作成功",color:"success"}),b("refresh")),s.loading=!1}return j(()=>y.dialog,c=>{c&&(s.loading=!1,s.form=y.currentForm)}),(c,a)=>{const d=O,h=k,g=te,u=ae,w=le,v=se,I=oe,S=re;return T(),N(S,{open:l(f),"onUpdate:open":a[16]||(a[16]=n=>G(f)?f.value=n:null),title:i.currentForm.id?"编辑支付类型":"新增支付类型",dismissible:!1,ui:{content:"sm:max-w-3xl",body:"p-0",footer:"justify-end bg-gray-50 dark:bg-gray-900"}},{body:o(()=>[m("div",ye,[e(I,{ref_key:"formRef",ref:x,state:l(s).form,class:"space-y-6",onSubmit:p},{default:o(()=>[m("div",be,[m("div",xe,[e(d,{name:"i-material-symbols-info-outline",class:"w-5 h-5 text-blue-600 dark:text-blue-400"}),a[17]||(a[17]=m("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 基本信息 ",-1))]),e(u,{label:"名称",name:"name",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.name,"onUpdate:modelValue":a[1]||(a[1]=n=>l(s).form.name=n),modelModifiers:{trim:!0},placeholder:"请输入支付类型名称",class:"w-full",size:"lg"},M({leading:o(()=>[e(d,{name:"i-material-symbols-label-outline",class:"w-5 h-5 text-gray-400"})]),_:2},[l(s).form.name?{name:"trailing",fn:o(()=>[e(h,{color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x",onClick:a[0]||(a[0]=n=>l(s).form.name="")})]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),m("div",_e,[e(u,{label:"支付类型",name:"ty",required:""},{default:o(()=>[e(w,{modelValue:l(s).form.ty,"onUpdate:modelValue":a[2]||(a[2]=n=>l(s).form.ty=n),items:U,placeholder:"请选择支付类型",class:"w-full",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-payment",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"状态",name:"state",required:""},{default:o(()=>[e(w,{modelValue:l(s).form.state,"onUpdate:modelValue":a[3]||(a[3]=n=>l(s).form.state=n),items:_,placeholder:"请选择状态",class:"w-full",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-toggle-on-outline",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1})])]),m("div",he,[m("div",we,[e(d,{name:"i-material-symbols-store-outline",class:"w-5 h-5 text-purple-600 dark:text-purple-400"}),a[18]||(a[18]=m("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 商户配置 ",-1))]),e(u,{label:"商户ID",name:"mch_id",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.mch_id,"onUpdate:modelValue":a[4]||(a[4]=n=>l(s).form.mch_id=n),modelModifiers:{trim:!0},placeholder:"请输入商户ID",class:"w-full",type:"number",min:"0",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-badge-outline",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1}),m("div",ve,[e(u,{label:"App Key",name:"app_key",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.app_key,"onUpdate:modelValue":a[5]||(a[5]=n=>l(s).form.app_key=n),modelModifiers:{trim:!0},placeholder:"请输入App Key",class:"w-full",type:"string",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-key-outline",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"密钥",name:"secret",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.secret,"onUpdate:modelValue":a[6]||(a[6]=n=>l(s).form.secret=n),modelModifiers:{trim:!0},placeholder:"请输入密钥",class:"w-full",type:"password",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-lock-outline",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1})]),e(u,{label:"签名方式",name:"sign_ty",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.sign_ty,"onUpdate:modelValue":a[7]||(a[7]=n=>l(s).form.sign_ty=n),modelModifiers:{trim:!0},placeholder:"请输入签名方式，如：MD5、RSA等",class:"w-full",type:"string",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-verified-outline",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1})]),m("div",ke,[m("div",Ve,[e(d,{name:"i-material-symbols-settings-outline",class:"w-5 h-5 text-green-600 dark:text-green-400"}),a[19]||(a[19]=m("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 支付配置 ",-1))]),e(u,{label:"下单地址",name:"place_uri",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.place_uri,"onUpdate:modelValue":a[8]||(a[8]=n=>l(s).form.place_uri=n),modelModifiers:{trim:!0},placeholder:"请输入下单API地址",class:"w-full",type:"string",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-link",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1}),m("div",Ue,[e(u,{label:"支付标识",name:"f",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.f,"onUpdate:modelValue":a[9]||(a[9]=n=>l(s).form.f=n),modelModifiers:{trim:!0},placeholder:"请输入支付标识",class:"w-full",type:"string",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-fingerprint",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"支付编码",name:"code",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.code,"onUpdate:modelValue":a[10]||(a[10]=n=>l(s).form.code=n),modelModifiers:{trim:!0},placeholder:"请输入支付编码",class:"w-full",type:"string",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-qr-code-2",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1})])]),m("div",$e,[m("div",ze,[e(d,{name:"i-material-symbols-monetization-on-outline",class:"w-5 h-5 text-orange-600 dark:text-orange-400"}),a[20]||(a[20]=m("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 金额限制 ",-1))]),m("div",De,[e(u,{label:"限制类型",name:"limit_type"},{default:o(()=>[e(w,{modelValue:l(s).form.limit_type,"onUpdate:modelValue":a[11]||(a[11]=n=>l(s).form.limit_type=n),items:$,placeholder:"请选择限制类型",class:"w-full",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-rule",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"支付权重",name:"weights",required:""},{default:o(()=>[e(g,{modelValue:l(s).form.weights,"onUpdate:modelValue":a[12]||(a[12]=n=>l(s).form.weights=n),modelModifiers:{trim:!0},placeholder:"数值越大优先级越高",class:"w-full",type:"number",min:"0",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-weight",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1})]),e(u,{label:"金额范围",name:"limit",required:"",description:"格式：最小金额-最大金额，如：1-10000"},{default:o(()=>[e(g,{modelValue:l(s).form.limit,"onUpdate:modelValue":a[13]||(a[13]=n=>l(s).form.limit=n),modelModifiers:{trim:!0},placeholder:"例如：1-10000",class:"w-full",type:"string",size:"lg"},{leading:o(()=>[e(d,{name:"i-material-symbols-attach-money",class:"w-5 h-5 text-gray-400"})]),_:1},8,["modelValue"])]),_:1})]),m("div",Te,[m("div",qe,[e(d,{name:"i-material-symbols-note-outline",class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),a[21]||(a[21]=m("h4",{class:"font-semibold text-gray-900 dark:text-white"}," 备注信息 ",-1))]),e(u,{label:"备注",name:"remark"},{default:o(()=>[e(v,{modelValue:l(s).form.remark,"onUpdate:modelValue":a[14]||(a[14]=n=>l(s).form.remark=n),modelModifiers:{trim:!0},placeholder:"请输入备注信息...",class:"w-full",rows:3,size:"lg"},null,8,["modelValue"])]),_:1})])]),_:1},8,["state"])])]),footer:o(()=>[m("div",Pe,[m("div",Fe,[e(d,{name:"i-material-symbols-info-outline",class:"w-4 h-4"}),m("span",null,L(i.currentForm.id?"修改后将更新支付配置":"确认后将创建新的支付类型"),1)]),m("div",Ke,[e(h,{label:"取消",color:"neutral",variant:"outline",size:"lg",onClick:V},{leading:o(()=>[e(d,{name:"i-material-symbols-close"})]),_:1}),e(h,{loading:l(s).loading,label:"确认保存",variant:"solid",size:"lg",onClick:a[15]||(a[15]=n=>l(x)?.submit())},{leading:o(()=>[e(d,{name:"i-material-symbols-check"})]),_:1},8,["loading"])])])]),_:1},8,["open","title"])}}}),Ce=Object.assign(Me,{__name:"PaymentTypeEdit"}),P={2:["启用","success"],1:["删除","error"]},Ie={4:["自建","primary","i-material-symbols-build"],3:["支付宝","blue","i-material-symbols-account-balance-wallet"],2:["微信","green","i-material-symbols-chat"],1:["USDT","orange","i-material-symbols-currency-bitcoin"]},Se={2:["固定金额","purple","i-material-symbols-pin"],1:["范围金额","cyan","i-material-symbols-swap-horiz"]},Re=[{accessorKey:"id",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},header:()=>t(k,{color:"neutral",variant:"ghost",label:"ID",class:"-mx-2.5 hover:bg-transparent focus:bg-transparent data-[state=open]:bg-transparent"}),cell:({row:i})=>t("span",{class:"font-mono text-sm font-semibold text-primary-600 dark:text-primary-400"},`#${i.original.id}`)},{accessorKey:"name",searchPlaceholder:"筛选名称",header:"名称",cell:({row:i})=>{const r=i.original.name;return r?t("div",{class:"flex items-center gap-2"},[t("i",{class:"i-material-symbols-label-outline w-4 h-4 text-blue-500"}),t("span",{class:"font-medium text-gray-900 dark:text-white"},r)]):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"code",header:"支付编码",cell:({row:i})=>{const r=i.original.code;return r?t("div",{class:"flex items-center gap-2"},[t("i",{class:"i-material-symbols-qr-code-2 w-4 h-4 text-purple-500"}),t("span",{class:"font-mono text-sm text-gray-700 dark:text-gray-300"},r)]):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"ty",header:"支付类型",meta:{class:{th:"w-[120px]",td:"w-[120px]"}},formItemProps:{component:"Select",componentProps:{options:[{label:"usdt",value:3},{label:"微信",value:2},{label:"支付宝",value:1}]}},cell:({row:i})=>{const r=i.original.ty,[y,b,f]=Ie[r]||["未知","gray","i-material-symbols-help-outline"];return t(D,{variant:"subtle",color:b,class:"whitespace-nowrap"},()=>t("div",{class:"flex items-center gap-1.5"},[t("i",{class:`${f} w-4 h-4`}),t("span",y)]))}},{accessorKey:"limit_type",header:"限制类型",formItemProps:{component:"Select",componentProps:{options:[{label:"金额范围",value:2},{label:"固定金额",value:1}]}},cell:({row:i})=>{const r=i.original.limit_type,[y,b,f]=Se[r]||["未知","gray","i-material-symbols-help-outline"];return t(D,{variant:"subtle",color:b},()=>t("div",{class:"flex items-center gap-1.5"},[t("i",{class:`${f} w-4 h-4`}),t("span",y)]))}},{accessorKey:"limit",header:"金额范围",cell:({row:i})=>{const r=i.original.limit;return r?t("div",{class:"flex items-center gap-1.5"},[t("i",{class:"i-material-symbols-attach-money w-4 h-4 text-green-600"}),t("span",{class:"font-medium text-gray-700 dark:text-gray-300"},r)]):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"weights",header:"支付权重",cell:({row:i})=>{const r=i.original.weights;return r?t("div",{class:"flex items-center gap-1.5"},[t("i",{class:"i-material-symbols-weight w-4 h-4 text-orange-600"}),t("span",{class:"font-semibold text-orange-700 dark:text-orange-400"},r)]):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"sign_ty",header:"签名方式",cell:({row:i})=>{const r=i.original.sign_ty;return r?t("div",{class:"flex items-center gap-1.5"},[t("i",{class:"i-material-symbols-verified-outline w-4 h-4 text-indigo-500"}),t("span",{class:"font-mono text-sm text-gray-700 dark:text-gray-300"},r)]):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"mch_id",header:"商户ID",cell:({row:i})=>{const r=i.original.mch_id;return r?t("div",{class:"flex items-center gap-1.5"},[t("i",{class:"i-material-symbols-badge-outline w-4 h-4 text-blue-500"}),t("span",{class:"font-mono text-sm text-gray-700 dark:text-gray-300"},r)]):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"f",header:"支付标识",cell:({row:i})=>{const r=i.original.f;return r?t("div",{class:"flex items-center gap-1.5"},[t("i",{class:"i-material-symbols-fingerprint w-4 h-4 text-purple-500"}),t("span",{class:"font-mono text-sm text-gray-700 dark:text-gray-300"},r)]):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"remark",header:"备注",meta:{class:{th:"w-[150px]",td:"w-[150px]"}},cell:({row:i})=>{const r=i.original.remark;return r?t(pe,{text:r,ui:{content:"max-w-xs",text:"whitespace-pre-wrap break-all select-text"}},()=>t("div",{class:"flex items-center gap-2"},[t("i",{class:"i-material-symbols-note-outline w-4 h-4 text-gray-400"}),t("div",{class:"truncate text-gray-600 dark:text-gray-300"},r)])):t("span",{class:"text-gray-400"},"-")}},{accessorKey:"state",meta:{class:{th:"w-[100px]",td:"w-[80px]"}},header:"状态",formItemProps:{component:"Select",componentProps:{options:[{label:"启动",value:2},{label:"关闭",value:1}]}},cell:({row:i})=>t(D,{class:"capitalize",variant:"subtle",color:P[i.original.state]?.[1]},()=>P[i.original.state]?.[0])},{accessorKey:"updated_at",header:"更新时间",meta:{class:{th:"w-[180px]",td:"w-[180px]"}},cell:({row:i})=>{const r=i.original.updated_at;return r?t("div",{class:"flex items-center gap-1.5"},[t("i",{class:"i-material-symbols-schedule-outline w-4 h-4 text-gray-400"}),t("span",{class:"text-sm text-gray-600 dark:text-gray-300"},ge(r))]):t("span",{class:"text-gray-400"},"-")}}],Be={key:0,class:"absolute top-0 left-0 right-0 h-(--ui-header-height) flex items-center justify-between border-b border-(--ui-border) px-4 sm:px-6 bg-(--ui-bg)"},Ee={class:"flex items-center gap-4"},ut=F({name:"PaymentTypeList",__name:"type-list",setup(i){const y=ce(ue).smaller("lg"),b=H(),f=k,V=fe(),x=K({isDialog:!1,currentForm:{}}),_=async p=>{x.isDialog=!0,p?x.currentForm=C(p):x.currentForm={state:2}},U=async()=>{b.value.reload(),x.isDialog=!1},$=async p=>{const{error:c}=await de({id:p.id});c||b.value.reload()};function s(p){return[{label:"编辑",icon:"material-symbols:edit-square-outline",onSelect(){_(p.original)}},{type:"separator"},{label:"删除",icon:"material-symbols:contract-delete-outline-rounded",color:"error",onSelect(){V.open({color:"error",title:"删除数据",description:"您确定要删除吗？",onPositiveClick(){$(p.original)}})}}]}const z=[...Re,{id:"actions",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},cell:({row:p})=>t("div",{class:"text-right"},t(R,{content:{align:"end"},items:s(p)},()=>t(k,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"})))}];return(p,c)=>{const a=X,d=W,h=Y,g=ee,u=Z,w=Ce;return T(),q(Q,null,[e(u,{ui:{body:"pb-[12px]! gap-0!"}},M({body:o(()=>[l(y)?J("",!0):(T(),q("div",Be,[m("div",Ee,[e(a),e(h)]),e(l(f),{label:"新增",icon:"i-lucide-plus",onClick:c[1]||(c[1]=v=>_(null))})])),e(g,{ref_key:"tableRef",ref:b,"data-request":l(me),columns:z,"scroll-x":"min-w-[1500px]"},null,8,["data-request"])]),_:2},[l(y)?{name:"header",fn:o(()=>[e(d,{title:"支付类型列表"},{leading:o(()=>[e(a)]),right:o(()=>[e(l(f),{label:"新增",icon:"i-lucide-plus",onClick:c[0]||(c[0]=v=>_(null))})]),_:1})]),key:"0"}:void 0]),1024),e(w,{dialog:l(x).isDialog,"onUpdate:dialog":c[2]||(c[2]=v=>l(x).isDialog=v),"current-form":l(x).currentForm,onRefresh:U},null,8,["dialog","current-form"])],64)}}});export{ut as default};
