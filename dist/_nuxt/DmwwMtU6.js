import{e as ge,b as G,S as ie,c as ze,P as se,T as Be,u as Ke,h as Ue,i as Re,t as pe,w as be,_ as ye,a as _e}from"./DiI9-bkE.js";import{_ as xe}from"./Bml5z8l2.js";import{_ as Te}from"./CuFgEFCp.js";import{_ as Ie}from"./oJBVUttf.js";import{_ as Ae}from"./BdKneTYw.js";import{c as he,_ as je}from"./DkYr1hfb.js";import{_ as Fe}from"./BkseHKFx.js";import{u as Ne,a as He}from"./D7PB4JkZ.js";import{u as Oe}from"./DZaB2s8a.js";import{V as Le}from"./_eNQqsN0.js";import{p as j,t as re,z as x,a1 as K,a2 as _,B as L,u as e,a3 as ue,h as O,c as S,ab as Ye,Y as ee,R as Q,x as We,j as we,y as Xe,a7 as s,ad as Ge,ae as le,A as B,W as H,ah as ne,af as ce,ai as Je,w as Qe,i as fe,Q as r,a6 as z,a5 as Z,r as Se}from"./Cp_GvCOL.js";import{_ as Ze}from"./Baq49nZQ.js";import{r as et}from"./BlLzDdHJ.js";import{_ as tt}from"./9B_i7pfW.js";import{_ as ot}from"./8gEztUrL.js";import{_ as lt}from"./_BOBmhmt.js";import{m as nt,n as at,b as st,o as it}from"./adOTzFDE.js";import{c as ae}from"./B3KMLFeu.js";import{f as rt}from"./CE7u-7DH.js";import{u as ut}from"./BCMcqMGM.js";import"./CM1DIlR0.js";import"./DaMwIZ4f.js";import"./BnfZ4xmv.js";import"./CangPKqO.js";import"./C8Jf-TuN.js";import"./DVCf4JVd.js";import"./C-fFc4Sm.js";import"./De6cJ90F.js";import"./DnWsfCtc.js";import"./BHtpJmxp.js";function dt(i=[],n,l){const a=[...i];return a[l]=n,a.sort((b,d)=>b-d)}function Ve(i,n,l){const d=100/(l-n)*(i-n);return he(d,0,100)}function mt(i,n){return n>2?`Value ${i+1} of ${n}`:n===2?["Minimum","Maximum"][i]:void 0}function pt(i,n){if(i.length===1)return 0;const l=i.map(b=>Math.abs(b-n)),a=Math.min(...l);return l.indexOf(a)}function ct(i,n,l){const a=i/2,d=de([0,50],[0,a]);return(a-d(n)*l)*l}function ft(i){return i.slice(0,-1).map((n,l)=>i[l+1]-n)}function vt(i,n){if(n>0){const l=ft(i);return Math.min(...l)>=n}return!0}function de(i,n){return l=>{if(i[0]===i[1]||n[0]===n[1])return n[0];const a=(n[1]-n[0])/(i[1]-i[0]);return n[0]+a*(l-i[0])}}function gt(i){return(String(i).split(".")[1]||"").length}function bt(i,n){const l=10**n;return Math.round(i*l)/l}const ke=["PageUp","PageDown"],Ce=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Pe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageUp","ArrowUp","ArrowLeft"]},[De,$e]=ge(["SliderVertical","SliderHorizontal"]);var yt=j({__name:"SliderHorizontal",props:{dir:{type:String,required:!1},min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:["slideEnd","slideStart","slideMove","homeKeyDown","endKeyDown","stepKeyDown"],setup(i,{emit:n}){const l=i,a=n,{max:b,min:d,dir:f,inverted:u}=re(l),{forwardRef:V,currentElement:k}=G(),h=te(),t=O(),C=O(),D=S(()=>f?.value!=="rtl"&&!u.value||f?.value!=="ltr"&&u.value);function P(v,c){const y=C.value||k.value.getBoundingClientRect(),w=[...h.thumbElements.value][h.valueIndexToChangeRef.value],E=h.thumbAlignment.value==="contain"?w.clientWidth:0;!t.value&&!c&&h.thumbAlignment.value==="contain"&&(t.value=v.clientX-w.getBoundingClientRect().left);const Y=[0,y.width-E],A=D.value?[d.value,b.value]:[b.value,d.value],N=de(Y,A);C.value=y;const p=c?v.clientX-y.left-E/2:v.clientX-y.left-(t.value??0);return N(p)}const M=S(()=>D.value?"left":"right"),U=S(()=>D.value?"right":"left"),m=S(()=>D.value?1:-1);return $e({startEdge:M,endEdge:U,direction:m,size:"width"}),(v,c)=>(x(),K(qe,{ref:e(V),dir:e(f),"data-orientation":"horizontal",style:ue({"--reka-slider-thumb-transform":!D.value&&e(h).thumbAlignment.value==="overflow"?"translateX(50%)":"translateX(-50%)"}),onSlideStart:c[0]||(c[0]=y=>{const w=P(y,!0);a("slideStart",w)}),onSlideMove:c[1]||(c[1]=y=>{const w=P(y);a("slideMove",w)}),onSlideEnd:c[2]||(c[2]=()=>{C.value=void 0,t.value=void 0,a("slideEnd")}),onStepKeyDown:c[3]||(c[3]=y=>{const w=D.value?"from-left":"from-right",E=e(Pe)[w].includes(y.key);a("stepKeyDown",y,E?-1:1)}),onEndKeyDown:c[4]||(c[4]=y=>a("endKeyDown",y)),onHomeKeyDown:c[5]||(c[5]=y=>a("homeKeyDown",y))},{default:_(()=>[L(v.$slots,"default")]),_:3},8,["dir","style"]))}}),_t=yt,xt=j({__name:"SliderVertical",props:{min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:["slideEnd","slideStart","slideMove","homeKeyDown","endKeyDown","stepKeyDown"],setup(i,{emit:n}){const l=i,a=n,{max:b,min:d,inverted:f}=re(l),u=te(),{forwardRef:V,currentElement:k}=G(),h=O(),t=O(),C=S(()=>!f.value);function D(m,v){const c=t.value||k.value.getBoundingClientRect(),y=[...u.thumbElements.value][u.valueIndexToChangeRef.value],w=u.thumbAlignment.value==="contain"?y.clientHeight:0;!h.value&&!v&&u.thumbAlignment.value==="contain"&&(h.value=m.clientY-y.getBoundingClientRect().top);const E=[0,c.height-w],Y=C.value?[b.value,d.value]:[d.value,b.value],A=de(E,Y),N=v?m.clientY-c.top-w/2:m.clientY-c.top-(h.value??0);return t.value=c,A(N)}const P=S(()=>C.value?"bottom":"top"),M=S(()=>C.value?"top":"bottom"),U=S(()=>C.value?1:-1);return $e({startEdge:P,endEdge:M,direction:U,size:"height"}),(m,v)=>(x(),K(qe,{ref:e(V),"data-orientation":"vertical",style:ue({"--reka-slider-thumb-transform":!C.value&&e(u).thumbAlignment.value==="overflow"?"translateY(-50%)":"translateY(50%)"}),onSlideStart:v[0]||(v[0]=c=>{const y=D(c,!0);a("slideStart",y)}),onSlideMove:v[1]||(v[1]=c=>{const y=D(c);a("slideMove",y)}),onSlideEnd:v[2]||(v[2]=()=>{t.value=void 0,h.value=void 0,a("slideEnd")}),onStepKeyDown:v[3]||(v[3]=c=>{const y=C.value?"from-bottom":"from-top",w=e(Pe)[y].includes(c.key);a("stepKeyDown",c,w?-1:1)}),onEndKeyDown:v[4]||(v[4]=c=>a("endKeyDown",c)),onHomeKeyDown:v[5]||(v[5]=c=>a("homeKeyDown",c))},{default:_(()=>[L(m.$slots,"default")]),_:3},8,["style"]))}}),ht=xt;const[te,wt]=ge("SliderRoot");var St=j({inheritAttrs:!1,__name:"SliderRoot",props:{defaultValue:{type:Array,required:!1,default:()=>[0]},modelValue:{type:[Array,null],required:!1},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},inverted:{type:Boolean,required:!1,default:!1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},minStepsBetweenThumbs:{type:Number,required:!1,default:0},thumbAlignment:{type:String,required:!1,default:"contain"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","valueCommit"],setup(i,{emit:n}){const l=i,a=n,{min:b,max:d,step:f,minStepsBetweenThumbs:u,orientation:V,disabled:k,thumbAlignment:h,dir:t}=re(l),C=Ne(t),{forwardRef:D,currentElement:P}=G(),M=Oe(P),{CollectionSlot:U}=ie({isProvider:!0}),m=ze(l,"modelValue",a,{defaultValue:l.defaultValue,passive:l.modelValue===void 0}),v=S(()=>Array.isArray(m.value)?[...m.value]:[]),c=O(0),y=O(v.value);function w(p){const o=pt(v.value,p);A(p,o)}function E(p){A(p,c.value)}function Y(){const p=y.value[c.value];v.value[c.value]!==p&&a("valueCommit",We(v.value))}function A(p,o,{commit:$}={commit:!1}){const R=gt(f.value),T=bt(Math.round((p-b.value)/f.value)*f.value+b.value,R),J=he(T,b.value,d.value),I=dt(v.value,J,o);if(vt(I,u.value*f.value)){c.value=I.indexOf(J);const W=String(I)!==String(m.value);W&&$&&a("valueCommit",I),W&&(N.value[c.value]?.focus(),m.value=I)}}const N=O([]);return wt({modelValue:m,currentModelValue:v,valueIndexToChangeRef:c,thumbElements:N,orientation:V,min:b,max:d,disabled:k,thumbAlignment:h}),(p,o)=>(x(),K(e(U),null,{default:_(()=>[(x(),K(Ye(e(V)==="horizontal"?_t:ht),ee(p.$attrs,{ref:e(D),"as-child":p.asChild,as:p.as,min:e(b),max:e(d),dir:e(C),inverted:p.inverted,"aria-disabled":e(k),"data-disabled":e(k)?"":void 0,onPointerdown:o[0]||(o[0]=()=>{e(k)||(y.value=v.value)}),onSlideStart:o[1]||(o[1]=$=>!e(k)&&w($)),onSlideMove:o[2]||(o[2]=$=>!e(k)&&E($)),onSlideEnd:o[3]||(o[3]=$=>!e(k)&&Y()),onHomeKeyDown:o[4]||(o[4]=$=>!e(k)&&A(e(b),0,{commit:!0})),onEndKeyDown:o[5]||(o[5]=$=>!e(k)&&A(e(d),v.value.length-1,{commit:!0})),onStepKeyDown:o[6]||(o[6]=($,R)=>{if(!e(k)){const I=e(ke).includes($.key)||$.shiftKey&&e(Ce).includes($.key)?10:1,W=c.value,oe=v.value[W],F=e(f)*I*R;A(oe+F,W,{commit:!0})}})}),{default:_(()=>[L(p.$slots,"default",{modelValue:e(m)}),e(M)&&p.name?(x(),K(e(Le),{key:0,type:"number",value:e(m),name:p.name,required:p.required,disabled:e(k),step:e(f)},null,8,["value","name","required","disabled","step"])):Q("v-if",!0)]),_:3},16,["as-child","as","min","max","dir","inverted","aria-disabled","data-disabled"]))]),_:3}))}}),Vt=St,kt=j({__name:"SliderImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},emits:["slideStart","slideMove","slideEnd","homeKeyDown","endKeyDown","stepKeyDown"],setup(i,{emit:n}){const l=i,a=n,b=te();return(d,f)=>(x(),K(e(se),ee({"data-slider-impl":""},l,{onKeydown:f[0]||(f[0]=u=>{u.key==="Home"?(a("homeKeyDown",u),u.preventDefault()):u.key==="End"?(a("endKeyDown",u),u.preventDefault()):e(ke).concat(e(Ce)).includes(u.key)&&(a("stepKeyDown",u),u.preventDefault())}),onPointerdown:f[1]||(f[1]=u=>{const V=u.target;V.setPointerCapture(u.pointerId),u.preventDefault(),e(b).thumbElements.value.includes(V)?V.focus():a("slideStart",u)}),onPointermove:f[2]||(f[2]=u=>{u.target.hasPointerCapture(u.pointerId)&&a("slideMove",u)}),onPointerup:f[3]||(f[3]=u=>{const V=u.target;V.hasPointerCapture(u.pointerId)&&(V.releasePointerCapture(u.pointerId),a("slideEnd",u))})}),{default:_(()=>[L(d.$slots,"default")]),_:3},16))}}),qe=kt,Ct=j({__name:"SliderRange",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(i){const n=te(),l=De();G();const a=S(()=>n.currentModelValue.value.map(f=>Ve(f,n.min.value,n.max.value))),b=S(()=>n.currentModelValue.value.length>1?Math.min(...a.value):0),d=S(()=>100-Math.max(...a.value,0));return(f,u)=>(x(),K(e(se),{"data-disabled":e(n).disabled.value?"":void 0,"data-orientation":e(n).orientation.value,"as-child":f.asChild,as:f.as,style:ue({[e(l).startEdge.value]:`${b.value}%`,[e(l).endEdge.value]:`${d.value}%`})},{default:_(()=>[L(f.$slots,"default")]),_:3},8,["data-disabled","data-orientation","as-child","as","style"]))}}),Pt=Ct,Dt=j({inheritAttrs:!1,__name:"SliderThumbImpl",props:{index:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(i){const n=i,l=te(),a=De(),{forwardRef:b,currentElement:d}=G(),{CollectionItem:f}=ie(),u=S(()=>l.modelValue?.value?.[n.index]),V=S(()=>u.value===void 0?0:Ve(u.value,l.min.value??0,l.max.value??100)),k=S(()=>mt(n.index,l.modelValue?.value?.length??0)),h=He(d),t=S(()=>h[a.size].value),C=S(()=>l.thumbAlignment.value==="overflow"||!t.value?0:ct(t.value,V.value,a.direction.value)),D=Be();return we(()=>{l.thumbElements.value.push(d.value)}),Xe(()=>{const P=l.thumbElements.value.findIndex(M=>M===d.value)??-1;l.thumbElements.value.splice(P,1)}),(P,M)=>(x(),K(e(f),null,{default:_(()=>[s(e(se),ee(P.$attrs,{ref:e(b),role:"slider",tabindex:e(l).disabled.value?void 0:0,"aria-label":P.$attrs["aria-label"]||k.value,"data-disabled":e(l).disabled.value?"":void 0,"data-orientation":e(l).orientation.value,"aria-valuenow":u.value,"aria-valuemin":e(l).min.value,"aria-valuemax":e(l).max.value,"aria-orientation":e(l).orientation.value,"as-child":P.asChild,as:P.as,style:{transform:"var(--reka-slider-thumb-transform)",position:"absolute",[e(a).startEdge.value]:`calc(${V.value}% + ${C.value}px)`,display:!e(D)&&u.value===void 0?"none":void 0},onFocus:M[0]||(M[0]=()=>{e(l).valueIndexToChangeRef.value=P.index})}),{default:_(()=>[L(P.$slots,"default")]),_:3},16,["tabindex","aria-label","data-disabled","data-orientation","aria-valuenow","aria-valuemin","aria-valuemax","aria-orientation","as-child","as","style"])]),_:3}))}}),$t=Dt,qt=j({__name:"SliderThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(i){const n=i,{getItems:l}=ie(),{forwardRef:a,currentElement:b}=G(),d=S(()=>b.value?l(!0).findIndex(f=>f.ref===b.value):-1);return(f,u)=>(x(),K($t,ee({ref:e(a)},n,{index:d.value}),{default:_(()=>[L(f.$slots,"default")]),_:3},16,["index"]))}}),ve=qt,Et=j({__name:"SliderTrack",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(i){const n=te();return G(),(l,a)=>(x(),K(e(se),{"as-child":l.asChild,as:l.as,"data-disabled":e(n).disabled.value?"":void 0,"data-orientation":e(n).orientation.value},{default:_(()=>[L(l.$slots,"default")]),_:3},8,["as-child","as","data-disabled","data-orientation"]))}}),Mt=Et;const zt={slots:{root:"relative flex items-center select-none touch-none",track:"relative bg-accented overflow-hidden rounded-full grow",range:"absolute rounded-full",thumb:"rounded-full bg-default ring-2 focus-visible:outline-2 focus-visible:outline-offset-2"},variants:{color:{primary:{range:"bg-primary",thumb:"ring-primary focus-visible:outline-primary/50"},secondary:{range:"bg-secondary",thumb:"ring-secondary focus-visible:outline-secondary/50"},success:{range:"bg-success",thumb:"ring-success focus-visible:outline-success/50"},info:{range:"bg-info",thumb:"ring-info focus-visible:outline-info/50"},warning:{range:"bg-warning",thumb:"ring-warning focus-visible:outline-warning/50"},error:{range:"bg-error",thumb:"ring-error focus-visible:outline-error/50"},neutral:{range:"bg-inverted",thumb:"ring-inverted focus-visible:outline-inverted/50"}},size:{xs:{thumb:"size-3"},sm:{thumb:"size-3.5"},md:{thumb:"size-4"},lg:{thumb:"size-4.5"},xl:{thumb:"size-5"}},orientation:{horizontal:{root:"w-full",range:"h-full"},vertical:{root:"flex-col h-full",range:"w-full"}},disabled:{true:{root:"opacity-75 cursor-not-allowed"}}},compoundVariants:[{orientation:"horizontal",size:"xs",class:{track:"h-[6px]"}},{orientation:"horizontal",size:"sm",class:{track:"h-[7px]"}},{orientation:"horizontal",size:"md",class:{track:"h-[8px]"}},{orientation:"horizontal",size:"lg",class:{track:"h-[9px]"}},{orientation:"horizontal",size:"xl",class:{track:"h-[10px]"}},{orientation:"vertical",size:"xs",class:{track:"w-[6px]"}},{orientation:"vertical",size:"sm",class:{track:"w-[7px]"}},{orientation:"vertical",size:"md",class:{track:"w-[8px]"}},{orientation:"vertical",size:"lg",class:{track:"w-[9px]"}},{orientation:"vertical",size:"xl",class:{track:"w-[10px]"}}],defaultVariants:{size:"md",color:"primary"}},Bt={__name:"USlider",props:ce({as:{type:null,required:!1},size:{type:null,required:!1},color:{type:null,required:!1},orientation:{type:null,required:!1,default:"horizontal"},tooltip:{type:[Boolean,Object],required:!1},defaultValue:{type:[Number,Array],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},name:{type:String,required:!1},disabled:{type:Boolean,required:!1},inverted:{type:Boolean,required:!1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},minStepsBetweenThumbs:{type:Number,required:!1}},{modelValue:{type:null},modelModifiers:{}}),emits:ce(["change"],["update:modelValue"]),setup(i,{emit:n}){const l=i,a=n,b=Ge(i,"modelValue"),d=Ke(),f=Ue(et(l,"as","orientation","min","max","step","minStepsBetweenThumbs","inverted"),a),{id:u,emitFormChange:V,emitFormInput:k,size:h,color:t,name:C,disabled:D,ariaAttrs:P}=Re(l),M=S(()=>typeof l.defaultValue=="number"?[l.defaultValue]:l.defaultValue),U=S({get(){return typeof b.value=="number"?[b.value]:b.value??M.value},set(y){b.value=y?.length!==1?y:y[0]}}),m=S(()=>U.value?.length??1),v=S(()=>pe({extend:pe(zt),...d.ui?.slider||{}})({disabled:D.value,size:h.value,color:t.value,orientation:l.orientation}));function c(y){const w=new Event("change",{target:{value:y}});a("change",w),V()}return(y,w)=>(x(),K(e(Vt),ee({...e(f),...e(P)},{id:e(u),modelValue:U.value,"onUpdate:modelValue":[w[0]||(w[0]=E=>U.value=E),w[1]||(w[1]=E=>e(k)())],name:e(C),disabled:e(D),"data-slot":"root",class:v.value.root({class:[l.ui?.root,l.class]}),"default-value":M.value,onValueCommit:c}),{default:_(()=>[s(e(Mt),{"data-slot":"track",class:le(v.value.track({class:l.ui?.track}))},{default:_(()=>[s(e(Pt),{"data-slot":"range",class:le(v.value.range({class:l.ui?.range}))},null,8,["class"])]),_:1},8,["class"]),(x(!0),B(H,null,ne(m.value,E=>(x(),B(H,{key:E},[i.tooltip?(x(),K(Ze,ee({key:0,text:m.value>1?String(U.value?.[E-1]):String(U.value),"disable-closing-trigger":""},{ref_for:!0},typeof i.tooltip=="object"?i.tooltip:{}),{default:_(()=>[s(e(ve),{"data-slot":"thumb",class:le(v.value.thumb({class:l.ui?.thumb})),"aria-label":m.value===1?"Thumb":`Thumb ${E} of ${m.value}`},null,8,["class","aria-label"])]),_:2},1040,["text"])):(x(),K(e(ve),{key:1,"data-slot":"thumb",class:le(v.value.thumb({class:l.ui?.thumb})),"aria-label":m.value===1?"Thumb":`Thumb ${E} of ${m.value}`},null,8,["class","aria-label"]))],64))),128))]),_:1},16,["id","modelValue","name","disabled","class","default-value"]))}},Kt={class:"flex items-center gap-2"},Ut={class:"font-semibold"},Rt={class:"mb-6 p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Tt={class:"flex items-center gap-2 mb-4"},It={class:"flex gap-2"},At={class:"flex items-center h-9"},jt={class:"ml-2 text-sm"},Ft={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start"},Nt={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Ht={class:"flex items-center gap-2 mb-4"},Ot={class:"space-y-4"},Lt={class:"text-xs font-medium text-(--ui-text-muted) uppercase"},Yt={class:"w-24 shrink-0"},Wt={class:"text-sm font-medium"},Xt={class:"text-xs text-(--ui-text-muted)"},Gt={class:"p-4 rounded-lg bg-(--ui-bg-elevated) border border-(--ui-border)"},Jt={class:"flex items-center justify-between mb-4"},Qt={class:"flex items-center gap-2"},Zt={key:0,class:"flex flex-col items-center justify-center py-12 text-center"},eo={key:1,class:"space-y-2 max-h-[600px] overflow-y-auto"},to=["onDragstart","onDrop"],oo={class:"w-6 h-6 rounded bg-(--ui-bg-elevated) flex items-center justify-center text-xs text-(--ui-text-muted)"},lo={class:"flex-1 min-w-0"},no={class:"flex items-center gap-1"},ao={class:"font-medium text-sm truncate"},so={class:"text-xs text-(--ui-text-muted)"},io={class:"bg-(--ui-bg-elevated) px-1 rounded"},ro={class:"flex gap-1 opacity-0 group-hover:opacity-100"},uo={class:"font-semibold"},mo={key:0,class:"space-y-4"},po={class:"grid grid-cols-2 gap-4"},co={class:"grid grid-cols-3 gap-4"},fo={class:"flex items-center gap-6"},vo={class:"flex items-center gap-2 cursor-pointer"},go={class:"flex items-center gap-2 cursor-pointer"},bo={class:"flex items-center gap-2 cursor-pointer"},yo=j({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})}},emits:["update:dialog","refresh"],setup(i,{emit:n}){const l=i,a=n,b=S({get:()=>l.dialog,set:p=>a("update:dialog",p)}),d=()=>{b.value=!1},f=Je("formRef"),u=be(),V=[{label:"聊天预设",value:0},{label:"创作预设",value:1}],k=[{label:"system",value:"system"},{label:"user",value:"user"},{label:"assistant",value:"assistant"}],h=S({get:()=>t.form.state===2,set:p=>{t.form.state=p?2:0}}),t=Se({loading:!1,form:{},params:{temperature:1,top_p:1,top_k:40,frequency_penalty:0,presence_penalty:0,repetition_penalty:1,openai_max_tokens:4096,openai_max_context:128e3},prompts:[],editingPrompt:null,editingIndex:-1,showPromptModal:!1}),C=[{title:"生成控制",items:[{key:"temperature",label:"温度",desc:"控制随机性",min:0,max:2,step:.01},{key:"top_p",label:"Top P",desc:"核采样阈值",min:0,max:1,step:.01},{key:"top_k",label:"Top K",desc:"候选词数量",min:1,max:100,step:1}]},{title:"惩罚参数",items:[{key:"frequency_penalty",label:"频率惩罚",desc:"降低重复词频率",min:-2,max:2,step:.01},{key:"presence_penalty",label:"存在惩罚",desc:"鼓励新话题",min:-2,max:2,step:.01},{key:"repetition_penalty",label:"重复惩罚",desc:"避免重复内容",min:0,max:2,step:.01}]},{title:"Token 限制",items:[{key:"openai_max_tokens",label:"最大输出",desc:"单次回复上限",min:1,max:32e3,step:1},{key:"openai_max_context",label:"上下文长度",desc:"总上下文窗口",min:1,max:2e5,step:1}]}],D=p=>{try{const o=JSON.parse(p);C.forEach($=>$.items.forEach(R=>{o[R.key]!==void 0&&(t.params[R.key]=o[R.key])})),t.prompts=Array.isArray(o.prompts)?o.prompts:[]}catch{P()}},P=()=>{t.params={temperature:1,top_p:1,top_k:40,frequency_penalty:0,presence_penalty:0,repetition_penalty:1,openai_max_tokens:4096,openai_max_context:128e3},t.prompts=[]},M=()=>JSON.stringify({...t.params,prompts:t.prompts});async function U(){t.loading=!0;try{const p=ae(t.form);p.content=M();const{error:o}=await(p.id?nt:at)(p);o||(u.add({title:"保存成功",color:"success"}),d(),a("refresh"))}finally{t.loading=!1}}const m=O(null),v=p=>{m.value=p},c=p=>{p.preventDefault()},y=p=>{if(m.value===null||m.value===p)return;const o=t.prompts.splice(m.value,1)[0];o&&t.prompts.splice(p,0,o),m.value=null},w=()=>{m.value=null},E=()=>{t.editingPrompt={identifier:"",name:"",enabled:!0,role:"system",system_prompt:!1,marker:!1,content:"",injection_depth:4,injection_order:100},t.editingIndex=-1,t.showPromptModal=!0},Y=p=>{const o=t.prompts[p];o&&(t.editingPrompt=ae(o),t.editingIndex=p,t.showPromptModal=!0)},A=()=>{if(!t.editingPrompt?.identifier||!t.editingPrompt?.name){u.add({title:"请填写标识符和名称",color:"error"});return}t.editingIndex===-1?t.prompts.push(t.editingPrompt):t.prompts[t.editingIndex]=t.editingPrompt,t.showPromptModal=!1},N=p=>{t.prompts.splice(p,1)};return Qe(()=>l.dialog,p=>{p&&(t.loading=!1,t.form=ae(l.currentForm),t.form.content?D(t.form.content):P())}),(p,o)=>{const $=_e,R=Ie,T=Ae,J=je,I=Fe,W=Bt,oe=xe,F=ye,Ee=tt,me=ot,Me=lt;return x(),B(H,null,[s(me,{open:e(b),"onUpdate:open":o[4]||(o[4]=g=>fe(b)?b.value=g:null),title:"模型预设",ui:{content:"sm:max-w-4xl",footer:"justify-end"}},{header:_(()=>[r("div",Kt,[s($,{name:"i-lucide-settings-2",class:"w-5 h-5 text-(--ui-primary)"}),r("span",Ut,z(i.currentForm.id?"编辑预设":"新建预设"),1)])]),body:_(()=>[s(Ee,{ref_key:"formRef",ref:f,state:e(t).form,onSubmit:U},{default:_(()=>[r("div",Rt,[r("div",Tt,[s($,{name:"i-lucide-info",class:"w-4 h-4 text-(--ui-primary)"}),o[16]||(o[16]=r("span",{class:"text-sm font-medium"},"基本信息",-1))]),r("div",It,[s(T,{label:"预设名称",name:"name",class:"w-50"},{default:_(()=>[s(R,{modelValue:e(t).form.name,"onUpdate:modelValue":o[0]||(o[0]=g=>e(t).form.name=g),modelModifiers:{trim:!0},placeholder:"输入预设名称"},null,8,["modelValue"])]),_:1}),s(T,{label:"类型",name:"ty",class:"w-[200px]"},{default:_(()=>[s(J,{modelValue:e(t).form.ty,"onUpdate:modelValue":o[1]||(o[1]=g=>e(t).form.ty=g),items:V,class:"w-full",ui:{content:"w-[200px]"}},null,8,["modelValue"])]),_:1}),s(T,{label:"状态",name:"state",class:"w-24"},{default:_(()=>[r("div",At,[s(I,{modelValue:e(h),"onUpdate:modelValue":o[2]||(o[2]=g=>fe(h)?h.value=g:null)},null,8,["modelValue"]),r("span",jt,z(e(h)?"启用":"关闭"),1)])]),_:1})])]),r("div",Ft,[r("div",Nt,[r("div",Ht,[s($,{name:"i-lucide-sliders-horizontal",class:"w-4 h-4 text-(--ui-primary)"}),o[17]||(o[17]=r("span",{class:"text-sm font-medium"},"采样参数",-1))]),r("div",Ot,[(x(),B(H,null,ne(C,g=>r("div",{key:g.title,class:"space-y-2"},[r("div",Lt,z(g.title),1),(x(!0),B(H,null,ne(g.items,q=>(x(),B("div",{key:q.key,class:"flex items-center gap-3 p-3 rounded-lg bg-(--ui-bg)"},[r("div",Yt,[r("div",Wt,z(q.label),1),r("div",Xt,z(q.desc),1)]),s(W,{modelValue:e(t).params[q.key],"onUpdate:modelValue":X=>e(t).params[q.key]=X,min:q.min,max:q.max,step:q.step,class:"flex-1",size:"sm"},null,8,["modelValue","onUpdate:modelValue","min","max","step"]),s(R,{modelValue:e(t).params[q.key],"onUpdate:modelValue":X=>e(t).params[q.key]=X,modelModifiers:{number:!0},type:"number",min:q.min,max:q.max,step:q.step,class:"w-24 text-center",size:"sm"},null,8,["modelValue","onUpdate:modelValue","min","max","step"])]))),128))])),64))])]),r("div",Gt,[r("div",Jt,[r("div",Qt,[s($,{name:"i-lucide-message-square-text",class:"w-4 h-4 text-(--ui-primary)"}),o[18]||(o[18]=r("span",{class:"text-sm font-medium"},"提示词",-1)),e(t).prompts.length?(x(),K(oe,{key:0,size:"xs",color:"primary"},{default:_(()=>[Z(z(e(t).prompts.length),1)]),_:1})):Q("",!0)]),s(F,{size:"xs",icon:"i-lucide-plus",label:"添加",onClick:E})]),e(t).prompts.length?(x(),B("div",eo,[(x(!0),B(H,null,ne(e(t).prompts,(g,q)=>(x(),B("div",{key:g.identifier+q,draggable:"true",class:le(["group flex items-center gap-2 p-3 rounded-lg bg-(--ui-bg) cursor-grab hover:shadow-sm transition-all",{"opacity-40":e(m)===q}]),onDragstart:X=>v(q),onDragover:c,onDrop:X=>y(q),onDragend:w},[r("div",oo,z(q+1),1),r("div",lo,[r("div",no,[r("span",ao,z(g.name),1),g.system_prompt?(x(),K(oe,{key:0,size:"xs",color:"info",variant:"subtle"},{default:_(()=>[...o[20]||(o[20]=[Z(" 系统 ",-1)])]),_:1})):Q("",!0),g.enabled?Q("",!0):(x(),K(oe,{key:1,size:"xs",color:"neutral",variant:"subtle"},{default:_(()=>[...o[21]||(o[21]=[Z(" 禁用 ",-1)])]),_:1}))]),r("div",so,[r("code",io,z(g.identifier),1),Z(" · 深度 "+z(g.injection_depth)+" · 顺序 "+z(g.injection_order),1)])]),r("div",ro,[s(F,{size:"xs",color:"neutral",variant:"ghost",icon:"i-lucide-pencil",onClick:X=>Y(q)},null,8,["onClick"]),s(F,{size:"xs",color:"error",variant:"ghost",icon:"i-lucide-trash-2",onClick:X=>N(q)},null,8,["onClick"])])],42,to))),128))])):(x(),B("div",Zt,[s($,{name:"i-lucide-file-text",class:"w-10 h-10 text-(--ui-text-dimmed) mb-2"}),o[19]||(o[19]=r("p",{class:"text-sm text-(--ui-text-muted)"}," 暂无提示词 ",-1))]))])])]),_:1},8,["state"])]),footer:_(()=>[s(F,{label:"取消",color:"neutral",variant:"outline",onClick:d}),s(F,{loading:e(t).loading,label:"保存",onClick:o[3]||(o[3]=g=>e(f)?.submit())},null,8,["loading"])]),_:1},8,["open"]),s(me,{open:e(t).showPromptModal,"onUpdate:open":o[15]||(o[15]=g=>e(t).showPromptModal=g),ui:{content:"sm:max-w-4xl",footer:"justify-end"}},{header:_(()=>[r("span",uo,z(e(t).editingIndex===-1?"添加提示词":"编辑提示词"),1)]),body:_(()=>[e(t).editingPrompt?(x(),B("div",mo,[r("div",po,[s(T,{label:"标识符",required:""},{default:_(()=>[s(R,{modelValue:e(t).editingPrompt.identifier,"onUpdate:modelValue":o[5]||(o[5]=g=>e(t).editingPrompt.identifier=g),placeholder:"唯一标识"},null,8,["modelValue"])]),_:1}),s(T,{label:"名称",required:""},{default:_(()=>[s(R,{modelValue:e(t).editingPrompt.name,"onUpdate:modelValue":o[6]||(o[6]=g=>e(t).editingPrompt.name=g),placeholder:"显示名称"},null,8,["modelValue"])]),_:1})]),r("div",co,[s(T,{label:"角色"},{default:_(()=>[s(J,{modelValue:e(t).editingPrompt.role,"onUpdate:modelValue":o[7]||(o[7]=g=>e(t).editingPrompt.role=g),items:k},null,8,["modelValue"])]),_:1}),s(T,{label:"注入深度"},{default:_(()=>[s(R,{modelValue:e(t).editingPrompt.injection_depth,"onUpdate:modelValue":o[8]||(o[8]=g=>e(t).editingPrompt.injection_depth=g),modelModifiers:{number:!0},type:"number",min:0},null,8,["modelValue"])]),_:1}),s(T,{label:"注入顺序"},{default:_(()=>[s(R,{modelValue:e(t).editingPrompt.injection_order,"onUpdate:modelValue":o[9]||(o[9]=g=>e(t).editingPrompt.injection_order=g),modelModifiers:{number:!0},type:"number",min:0},null,8,["modelValue"])]),_:1})]),r("div",fo,[r("label",vo,[s(I,{modelValue:e(t).editingPrompt.enabled,"onUpdate:modelValue":o[10]||(o[10]=g=>e(t).editingPrompt.enabled=g)},null,8,["modelValue"]),o[22]||(o[22]=r("span",{class:"text-sm"},"启用",-1))]),r("label",go,[s(I,{modelValue:e(t).editingPrompt.system_prompt,"onUpdate:modelValue":o[11]||(o[11]=g=>e(t).editingPrompt.system_prompt=g)},null,8,["modelValue"]),o[23]||(o[23]=r("span",{class:"text-sm"},"系统提示词",-1))]),r("label",bo,[s(I,{modelValue:e(t).editingPrompt.marker,"onUpdate:modelValue":o[12]||(o[12]=g=>e(t).editingPrompt.marker=g)},null,8,["modelValue"]),o[24]||(o[24]=r("span",{class:"text-sm"},"标记",-1))])]),s(T,{label:"内容"},{default:_(()=>[s(Me,{modelValue:e(t).editingPrompt.content,"onUpdate:modelValue":o[13]||(o[13]=g=>e(t).editingPrompt.content=g),placeholder:"提示词内容",rows:12,class:"font-mono w-full"},null,8,["modelValue"])]),_:1})])):Q("",!0)]),footer:_(()=>[s(F,{label:"取消",color:"neutral",variant:"outline",onClick:o[14]||(o[14]=g=>e(t).showPromptModal=!1)}),s(F,{label:"确定",onClick:A})]),_:1},8,["open"])],64)}}}),_o=Object.assign(yo,{__name:"CommonModelPresetEdit"}),xo={key:0,class:"flex items-center justify-center py-20"},ho={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},wo={class:"flex items-center justify-between mb-3"},So={class:"flex items-center gap-2"},Vo={class:"w-8 h-8 rounded-lg bg-(--ui-primary)/10 flex items-center justify-center"},ko={class:"font-medium"},Co={class:"text-xs text-(--ui-text-muted)"},Po={class:"flex flex-col items-end gap-1"},Do={class:"text-xs text-(--ui-text-muted) mb-3"},$o={class:"flex items-center justify-end gap-2 pt-3 border-t border-(--ui-border)"},qo={key:2,class:"text-center py-20 text-(--ui-text-muted)"},il=j({name:"CommonModelPresetList",__name:"preset",setup(i){const n=ut(),l=be(),a={2:["启用","success"],0:["关闭","error"]},b={0:["聊天预设","primary"],1:["创作预设","warning"]},d=Se({loading:!1,list:[],isDialog:!1,currentForm:{}}),f=async()=>{d.loading=!0;try{const{data:h}=await st({});d.list=h?.list||[]}finally{d.loading=!1}},u=h=>{d.currentForm=h?ae(h):{state:2},d.isDialog=!0},V=async h=>{n.open({color:"error",title:"删除预设",description:`确定要删除「${h.name}」吗？`,onPositiveClick:async()=>{const{error:t}=await it({id:h.id});t||(l.add({title:"删除成功",color:"success"}),f())}})},k=()=>{d.isDialog=!1,f()};return we(()=>f()),(h,t)=>{const C=ye,D=_e,P=xe,M=Te,U=_o;return x(),B(H,null,[s(M,null,{actions:_(()=>[s(C,{label:"新增",icon:"i-lucide-plus",onClick:t[0]||(t[0]=m=>u())})]),default:_(()=>[e(d).loading?(x(),B("div",xo,[s(D,{name:"i-lucide-loader",class:"w-8 h-8 animate-spin text-(--ui-text-muted)"})])):(x(),B("div",ho,[(x(!0),B(H,null,ne(e(d).list,m=>(x(),B("div",{key:m.id,class:"p-4 rounded-xl bg-(--ui-bg-elevated) border border-(--ui-border) hover:border-(--ui-primary) transition-all"},[r("div",wo,[r("div",So,[r("div",Vo,[s(D,{name:"i-lucide-settings-2",class:"w-4 h-4 text-(--ui-primary)"})]),r("div",null,[r("div",ko,z(m.name),1),r("div",Co," ID: "+z(m.id),1)])]),r("div",Po,[s(P,{color:b[m.ty]?.[1]||"neutral",variant:"solid"},{default:_(()=>[Z(z(b[m.ty]?.[0]||"未知"),1)]),_:2},1032,["color"]),s(P,{color:a[m.state]?.[1]||"neutral",variant:"subtle"},{default:_(()=>[Z(z(a[m.state]?.[0]||"未知"),1)]),_:2},1032,["color"])])]),r("div",Do," 更新于 "+z(("formatToDateTime"in h?h.formatToDateTime:e(rt))(m.updated_at)),1),r("div",$o,[s(C,{size:"xs",color:"neutral",variant:"ghost",icon:"i-lucide-pencil",label:"编辑",onClick:v=>u(m)},null,8,["onClick"]),s(C,{size:"xs",color:"error",variant:"ghost",icon:"i-lucide-trash-2",label:"删除",onClick:v=>V(m)},null,8,["onClick"])])]))),128))])),!e(d).loading&&e(d).list.length===0?(x(),B("div",qo,[s(D,{name:"i-lucide-settings",class:"w-12 h-12 mx-auto mb-2 opacity-50"}),t[2]||(t[2]=r("p",null,"暂无模型预设",-1))])):Q("",!0)]),_:1}),s(U,{dialog:e(d).isDialog,"onUpdate:dialog":t[1]||(t[1]=m=>e(d).isDialog=m),"current-form":e(d).currentForm,onRefresh:k},null,8,["dialog","current-form"])],64)}}});export{il as default};
