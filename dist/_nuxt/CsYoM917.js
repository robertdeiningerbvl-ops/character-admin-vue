import{_ as Be}from"./CEcF5dWm.js";import{N as _e,f as F,h as de,L as Q,i as O,c as D,a as $,o as _,w as h,r as W,a3 as me,b as e,O as pe,R as Ke,a2 as Re,M as ee,C as X,p as Ue,P as ie,aZ as Ie,q as Ae,s as je,B as d,ad as fe,ae as Fe,u as Ne,a8 as Oe,ag as He,ak as Le,t as ve,k as K,n as J,G as Z,H as le,ap as Ye,aE as Xe,j as he,l as We,a4 as Ge,D as l,F as I,_ as se,aP as ge,E as A,I as Je,a_ as be,aF as ne,A as Ze}from"./DhOLkSnF.js";import{_ as Qe,a as et,b as tt,c as ot}from"./DAqc9GYg.js";import{_ as nt}from"./CSbqei5V.js";import{_ as lt}from"./DAIKkUkW.js";import{c as we,_ as at}from"./D0vBe5Vh.js";import{_ as ke}from"./-rcGzxkB.js";import{a as st,i as it}from"./CZg69nbc.js";import{u as rt}from"./BrXYpapi.js";import{V as ut}from"./CemQtCgh.js";import{_ as Se}from"./CLU2_0cD.js";import{_ as dt}from"./Db__RPjw.js";import{_ as mt}from"./6yIEXw5v.js";import{_ as pt}from"./DEtjlJ-S.js";import{_ as ct}from"./CVanS2c1.js";import{_ as ft}from"./BZLiX_8y.js";import{n as vt,o as gt,b as bt,p as yt}from"./D1QVHQma.js";import{c as ae}from"./45RcOEEf.js";import{o as xt,n as _t,s as ht}from"./B-mCBPct.js";import{u as wt,b as kt}from"./Bo5OMT4U.js";import{f as St}from"./BmKy9gZZ.js";import{u as Vt}from"./BVQSm7Ip.js";import"./CwtpYSSp.js";import"./DPsBupTg.js";import"./9Rxep3Q5.js";import"./CLKxJTZi.js";import"./BXSyqGa5.js";import"./HRiyi1uV.js";function Ct(s=[],i,n){const a=[...s];return a[n]=i,a.sort((v,y)=>v-y)}function Ve(s,i,n){const y=100/(n-i)*(s-i);return we(y,0,100)}function Pt(s,i){return i>2?`Value ${s+1} of ${i}`:i===2?["Minimum","Maximum"][s]:void 0}function Dt(s,i){if(s.length===1)return 0;const n=s.map(v=>Math.abs(v-i)),a=Math.min(...n);return n.indexOf(a)}function zt(s,i,n){const a=s/2,y=ce([0,50],[0,a]);return(a-y(i)*n)*n}function qt(s){return s.slice(0,-1).map((i,n)=>s[n+1]-i)}function Et(s,i){if(i>0){const n=qt(s);return Math.min(...n)>=i}return!0}function ce(s,i){return n=>{if(s[0]===s[1]||i[0]===i[1])return i[0];const a=(i[1]-i[0])/(s[1]-s[0]);return i[0]+a*(n-s[0])}}function Mt(s){return(String(s).split(".")[1]||"").length}function $t(s,i){const n=10**i;return Math.round(s*n)/n}const Ce=["PageUp","PageDown"],Pe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],De={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageUp","ArrowUp","ArrowLeft"]},[ze,qe]=_e(["SliderVertical","SliderHorizontal"]);var Tt=F({__name:"SliderHorizontal",props:{dir:{type:String,required:!1},min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:["slideEnd","slideStart","slideMove","homeKeyDown","endKeyDown","stepKeyDown"],setup(s,{emit:i}){const n=s,a=i,{max:v,min:y,dir:m,inverted:r}=de(n),{forwardRef:V,currentElement:C}=Q(),q=te(),o=O(),x=O(),w=D(()=>m?.value!=="rtl"&&!r.value||m?.value!=="ltr"&&r.value);function P(f,p){const g=x.value||C.value.getBoundingClientRect(),S=[...q.thumbElements.value][q.valueIndexToChangeRef.value],E=q.thumbAlignment.value==="contain"?S.clientWidth:0;!o.value&&!p&&q.thumbAlignment.value==="contain"&&(o.value=f.clientX-S.getBoundingClientRect().left);const G=[0,g.width-E],R=w.value?[y.value,v.value]:[v.value,y.value],H=ce(G,R);x.value=g;const c=p?f.clientX-g.left-E/2:f.clientX-g.left-(o.value??0);return H(c)}const M=D(()=>w.value?"left":"right"),T=D(()=>w.value?"right":"left"),b=D(()=>w.value?1:-1);return qe({startEdge:M,endEdge:T,direction:b,size:"width"}),(f,p)=>(_(),$(Ee,{ref:e(V),dir:e(m),"data-orientation":"horizontal",style:me({"--reka-slider-thumb-transform":!w.value&&e(q).thumbAlignment.value==="overflow"?"translateX(50%)":"translateX(-50%)"}),onSlideStart:p[0]||(p[0]=g=>{const S=P(g,!0);a("slideStart",S)}),onSlideMove:p[1]||(p[1]=g=>{const S=P(g);a("slideMove",S)}),onSlideEnd:p[2]||(p[2]=()=>{x.value=void 0,o.value=void 0,a("slideEnd")}),onStepKeyDown:p[3]||(p[3]=g=>{const S=w.value?"from-left":"from-right",E=e(De)[S].includes(g.key);a("stepKeyDown",g,E?-1:1)}),onEndKeyDown:p[4]||(p[4]=g=>a("endKeyDown",g)),onHomeKeyDown:p[5]||(p[5]=g=>a("homeKeyDown",g))},{default:h(()=>[W(f.$slots,"default")]),_:3},8,["dir","style"]))}}),Bt=Tt,Kt=F({__name:"SliderVertical",props:{min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:["slideEnd","slideStart","slideMove","homeKeyDown","endKeyDown","stepKeyDown"],setup(s,{emit:i}){const n=s,a=i,{max:v,min:y,inverted:m}=de(n),r=te(),{forwardRef:V,currentElement:C}=Q(),q=O(),o=O(),x=D(()=>!m.value);function w(b,f){const p=o.value||C.value.getBoundingClientRect(),g=[...r.thumbElements.value][r.valueIndexToChangeRef.value],S=r.thumbAlignment.value==="contain"?g.clientHeight:0;!q.value&&!f&&r.thumbAlignment.value==="contain"&&(q.value=b.clientY-g.getBoundingClientRect().top);const E=[0,p.height-S],G=x.value?[v.value,y.value]:[y.value,v.value],R=ce(E,G),H=f?b.clientY-p.top-S/2:b.clientY-p.top-(q.value??0);return o.value=p,R(H)}const P=D(()=>x.value?"bottom":"top"),M=D(()=>x.value?"top":"bottom"),T=D(()=>x.value?1:-1);return qe({startEdge:P,endEdge:M,direction:T,size:"height"}),(b,f)=>(_(),$(Ee,{ref:e(V),"data-orientation":"vertical",style:me({"--reka-slider-thumb-transform":!x.value&&e(r).thumbAlignment.value==="overflow"?"translateY(-50%)":"translateY(50%)"}),onSlideStart:f[0]||(f[0]=p=>{const g=w(p,!0);a("slideStart",g)}),onSlideMove:f[1]||(f[1]=p=>{const g=w(p);a("slideMove",g)}),onSlideEnd:f[2]||(f[2]=()=>{o.value=void 0,q.value=void 0,a("slideEnd")}),onStepKeyDown:f[3]||(f[3]=p=>{const g=x.value?"from-bottom":"from-top",S=e(De)[g].includes(p.key);a("stepKeyDown",p,S?-1:1)}),onEndKeyDown:f[4]||(f[4]=p=>a("endKeyDown",p)),onHomeKeyDown:f[5]||(f[5]=p=>a("homeKeyDown",p))},{default:h(()=>[W(b.$slots,"default")]),_:3},8,["style"]))}}),Rt=Kt;const[te,Ut]=_e("SliderRoot");var It=F({inheritAttrs:!1,__name:"SliderRoot",props:{defaultValue:{type:Array,required:!1,default:()=>[0]},modelValue:{type:[Array,null],required:!1},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},inverted:{type:Boolean,required:!1,default:!1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},minStepsBetweenThumbs:{type:Number,required:!1,default:0},thumbAlignment:{type:String,required:!1,default:"contain"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","valueCommit"],setup(s,{emit:i}){const n=s,a=i,{min:v,max:y,step:m,minStepsBetweenThumbs:r,orientation:V,disabled:C,thumbAlignment:q,dir:o}=de(n),x=st(o),{forwardRef:w,currentElement:P}=Q(),M=rt(P),{CollectionSlot:T}=pe({isProvider:!0}),b=Ke(n,"modelValue",a,{defaultValue:n.defaultValue,passive:n.modelValue===void 0}),f=D(()=>Array.isArray(b.value)?[...b.value]:[]),p=O(0),g=O(f.value);function S(c){const t=Dt(f.value,c);R(c,t)}function E(c){R(c,p.value)}function G(){const c=g.value[p.value];f.value[p.value]!==c&&a("valueCommit",Ue(f.value))}function R(c,t,{commit:k}={commit:!1}){const j=Mt(m.value),U=$t(Math.round((c-v.value)/m.value)*m.value+v.value,j),L=we(U,v.value,y.value),N=Ct(f.value,L,t);if(Et(N,r.value*m.value)){p.value=N.indexOf(L);const B=String(N)!==String(b.value);B&&k&&a("valueCommit",N),B&&(H.value[p.value]?.focus(),b.value=N)}}const H=O([]);return Ut({modelValue:b,currentModelValue:f,valueIndexToChangeRef:p,thumbElements:H,orientation:V,min:v,max:y,disabled:C,thumbAlignment:q}),(c,t)=>(_(),$(e(T),null,{default:h(()=>[(_(),$(Re(e(V)==="horizontal"?Bt:Rt),ee(c.$attrs,{ref:e(w),"as-child":c.asChild,as:c.as,min:e(v),max:e(y),dir:e(x),inverted:c.inverted,"aria-disabled":e(C),"data-disabled":e(C)?"":void 0,onPointerdown:t[0]||(t[0]=()=>{e(C)||(g.value=f.value)}),onSlideStart:t[1]||(t[1]=k=>!e(C)&&S(k)),onSlideMove:t[2]||(t[2]=k=>!e(C)&&E(k)),onSlideEnd:t[3]||(t[3]=k=>!e(C)&&G()),onHomeKeyDown:t[4]||(t[4]=k=>!e(C)&&R(e(v),0,{commit:!0})),onEndKeyDown:t[5]||(t[5]=k=>!e(C)&&R(e(y),f.value.length-1,{commit:!0})),onStepKeyDown:t[6]||(t[6]=(k,j)=>{if(!e(C)){const N=e(Ce).includes(k.key)||k.shiftKey&&e(Pe).includes(k.key)?10:1,B=p.value,oe=f.value[B],re=e(m)*N*j;R(oe+re,B,{commit:!0})}})}),{default:h(()=>[W(c.$slots,"default",{modelValue:e(b)}),e(M)&&c.name?(_(),$(e(ut),{key:0,type:"number",value:e(b),name:c.name,required:c.required,disabled:e(C),step:e(m)},null,8,["value","name","required","disabled","step"])):X("v-if",!0)]),_:3},16,["as-child","as","min","max","dir","inverted","aria-disabled","data-disabled"]))]),_:3}))}}),At=It,jt=F({__name:"SliderImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},emits:["slideStart","slideMove","slideEnd","homeKeyDown","endKeyDown","stepKeyDown"],setup(s,{emit:i}){const n=s,a=i,v=te();return(y,m)=>(_(),$(e(ie),ee({"data-slider-impl":""},n,{onKeydown:m[0]||(m[0]=r=>{r.key==="Home"?(a("homeKeyDown",r),r.preventDefault()):r.key==="End"?(a("endKeyDown",r),r.preventDefault()):e(Ce).concat(e(Pe)).includes(r.key)&&(a("stepKeyDown",r),r.preventDefault())}),onPointerdown:m[1]||(m[1]=r=>{const V=r.target;V.setPointerCapture(r.pointerId),r.preventDefault(),e(v).thumbElements.value.includes(V)?V.focus():a("slideStart",r)}),onPointermove:m[2]||(m[2]=r=>{r.target.hasPointerCapture(r.pointerId)&&a("slideMove",r)}),onPointerup:m[3]||(m[3]=r=>{const V=r.target;V.hasPointerCapture(r.pointerId)&&(V.releasePointerCapture(r.pointerId),a("slideEnd",r))})}),{default:h(()=>[W(y.$slots,"default")]),_:3},16))}}),Ee=jt,Ft=F({__name:"SliderRange",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const i=te(),n=ze();Q();const a=D(()=>i.currentModelValue.value.map(m=>Ve(m,i.min.value,i.max.value))),v=D(()=>i.currentModelValue.value.length>1?Math.min(...a.value):0),y=D(()=>100-Math.max(...a.value,0));return(m,r)=>(_(),$(e(ie),{"data-disabled":e(i).disabled.value?"":void 0,"data-orientation":e(i).orientation.value,"as-child":m.asChild,as:m.as,style:me({[e(n).startEdge.value]:`${v.value}%`,[e(n).endEdge.value]:`${y.value}%`})},{default:h(()=>[W(m.$slots,"default")]),_:3},8,["data-disabled","data-orientation","as-child","as","style"]))}}),Nt=Ft,Ot=F({inheritAttrs:!1,__name:"SliderThumbImpl",props:{index:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const i=s,n=te(),a=ze(),{forwardRef:v,currentElement:y}=Q(),{CollectionItem:m}=pe(),r=D(()=>n.modelValue?.value?.[i.index]),V=D(()=>r.value===void 0?0:Ve(r.value,n.min.value??0,n.max.value??100)),C=D(()=>Pt(i.index,n.modelValue?.value?.length??0)),q=it(y),o=D(()=>q[a.size].value),x=D(()=>n.thumbAlignment.value==="overflow"||!o.value?0:zt(o.value,V.value,a.direction.value)),w=Ie();return Ae(()=>{n.thumbElements.value.push(y.value)}),je(()=>{const P=n.thumbElements.value.findIndex(M=>M===y.value)??-1;n.thumbElements.value.splice(P,1)}),(P,M)=>(_(),$(e(m),null,{default:h(()=>[d(e(ie),ee(P.$attrs,{ref:e(v),role:"slider",tabindex:e(n).disabled.value?void 0:0,"aria-label":P.$attrs["aria-label"]||C.value,"data-disabled":e(n).disabled.value?"":void 0,"data-orientation":e(n).orientation.value,"aria-valuenow":r.value,"aria-valuemin":e(n).min.value,"aria-valuemax":e(n).max.value,"aria-orientation":e(n).orientation.value,"as-child":P.asChild,as:P.as,style:{transform:"var(--reka-slider-thumb-transform)",position:"absolute",[e(a).startEdge.value]:`calc(${V.value}% + ${x.value}px)`,display:!e(w)&&r.value===void 0?"none":void 0},onFocus:M[0]||(M[0]=()=>{e(n).valueIndexToChangeRef.value=P.index})}),{default:h(()=>[W(P.$slots,"default")]),_:3},16,["tabindex","aria-label","data-disabled","data-orientation","aria-valuenow","aria-valuemin","aria-valuemax","aria-orientation","as-child","as","style"])]),_:3}))}}),Ht=Ot,Lt=F({__name:"SliderThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const i=s,{getItems:n}=pe(),{forwardRef:a,currentElement:v}=Q(),y=D(()=>v.value?n(!0).findIndex(m=>m.ref===v.value):-1);return(m,r)=>(_(),$(Ht,ee({ref:e(a)},i,{index:y.value}),{default:h(()=>[W(m.$slots,"default")]),_:3},16,["index"]))}}),ye=Lt,Yt=F({__name:"SliderTrack",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const i=te();return Q(),(n,a)=>(_(),$(e(ie),{"as-child":n.asChild,as:n.as,"data-disabled":e(i).disabled.value?"":void 0,"data-orientation":e(i).orientation.value},{default:h(()=>[W(n.$slots,"default")]),_:3},8,["as-child","as","data-disabled","data-orientation"]))}}),Xt=Yt;const Wt={slots:{root:"relative flex items-center select-none touch-none",track:"relative bg-accented overflow-hidden rounded-full grow",range:"absolute rounded-full",thumb:"rounded-full bg-default ring-2 focus-visible:outline-2 focus-visible:outline-offset-2"},variants:{color:{primary:{range:"bg-primary",thumb:"ring-primary focus-visible:outline-primary/50"},secondary:{range:"bg-secondary",thumb:"ring-secondary focus-visible:outline-secondary/50"},success:{range:"bg-success",thumb:"ring-success focus-visible:outline-success/50"},info:{range:"bg-info",thumb:"ring-info focus-visible:outline-info/50"},warning:{range:"bg-warning",thumb:"ring-warning focus-visible:outline-warning/50"},error:{range:"bg-error",thumb:"ring-error focus-visible:outline-error/50"},neutral:{range:"bg-inverted",thumb:"ring-inverted focus-visible:outline-inverted/50"}},size:{xs:{thumb:"size-3"},sm:{thumb:"size-3.5"},md:{thumb:"size-4"},lg:{thumb:"size-4.5"},xl:{thumb:"size-5"}},orientation:{horizontal:{root:"w-full",range:"h-full"},vertical:{root:"flex-col h-full",range:"w-full"}},disabled:{true:{root:"opacity-75 cursor-not-allowed"}}},compoundVariants:[{orientation:"horizontal",size:"xs",class:{track:"h-[6px]"}},{orientation:"horizontal",size:"sm",class:{track:"h-[7px]"}},{orientation:"horizontal",size:"md",class:{track:"h-[8px]"}},{orientation:"horizontal",size:"lg",class:{track:"h-[9px]"}},{orientation:"horizontal",size:"xl",class:{track:"h-[10px]"}},{orientation:"vertical",size:"xs",class:{track:"w-[6px]"}},{orientation:"vertical",size:"sm",class:{track:"w-[7px]"}},{orientation:"vertical",size:"md",class:{track:"w-[8px]"}},{orientation:"vertical",size:"lg",class:{track:"w-[9px]"}},{orientation:"vertical",size:"xl",class:{track:"w-[10px]"}}],defaultVariants:{size:"md",color:"primary"}},Gt={__name:"USlider",props:fe({as:{type:null,required:!1},size:{type:null,required:!1},color:{type:null,required:!1},orientation:{type:null,required:!1,default:"horizontal"},tooltip:{type:[Boolean,Object],required:!1},defaultValue:{type:[Number,Array],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},name:{type:String,required:!1},disabled:{type:Boolean,required:!1},inverted:{type:Boolean,required:!1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},minStepsBetweenThumbs:{type:Number,required:!1}},{modelValue:{type:null},modelModifiers:{}}),emits:fe(["change"],["update:modelValue"]),setup(s,{emit:i}){const n=s,a=i,v=Fe(s,"modelValue"),y=Ne(),m=Oe(He(n,"as","orientation","min","max","step","minStepsBetweenThumbs","inverted"),a),{id:r,emitFormChange:V,emitFormInput:C,size:q,color:o,name:x,disabled:w,ariaAttrs:P}=Le(n),M=D(()=>typeof n.defaultValue=="number"?[n.defaultValue]:n.defaultValue),T=D({get(){return typeof v.value=="number"?[v.value]:v.value??M.value},set(g){v.value=g?.length!==1?g:g[0]}}),b=D(()=>T.value?.length??1),f=D(()=>ve({extend:ve(Wt),...y.ui?.slider||{}})({disabled:w.value,size:q.value,color:o.value,orientation:n.orientation}));function p(g){const S=new Event("change",{target:{value:g}});a("change",S),V()}return(g,S)=>(_(),$(e(At),ee({...e(m),...e(P)},{id:e(r),modelValue:T.value,"onUpdate:modelValue":[S[0]||(S[0]=E=>T.value=E),S[1]||(S[1]=E=>e(C)())],name:e(x),disabled:e(w),"data-slot":"root",class:f.value.root({class:[n.ui?.root,n.class]}),"default-value":M.value,onValueCommit:p}),{default:h(()=>[d(e(Xt),{"data-slot":"track",class:J(f.value.track({class:n.ui?.track}))},{default:h(()=>[d(e(Nt),{"data-slot":"range",class:J(f.value.range({class:n.ui?.range}))},null,8,["class"])]),_:1},8,["class"]),(_(!0),K(Z,null,le(b.value,E=>(_(),K(Z,{key:E},[s.tooltip?(_(),$(Se,ee({key:0,text:b.value>1?String(T.value?.[E-1]):String(T.value),"disable-closing-trigger":""},{ref_for:!0},typeof s.tooltip=="object"?s.tooltip:{}),{default:h(()=>[d(e(ye),{"data-slot":"thumb",class:J(f.value.thumb({class:n.ui?.thumb})),"aria-label":b.value===1?"Thumb":`Thumb ${E} of ${b.value}`},null,8,["class","aria-label"])]),_:2},1040,["text"])):(_(),$(e(ye),{key:1,"data-slot":"thumb",class:J(f.value.thumb({class:n.ui?.thumb})),"aria-label":b.value===1?"Thumb":`Thumb ${E} of ${b.value}`},null,8,["class","aria-label"]))],64))),128))]),_:1},16,["id","modelValue","name","disabled","class","default-value"]))}},Jt={class:"flex gap-4 mb-6"},Zt={class:"flex-1"},Qt={class:"w-32"},eo={class:"flex gap-2 p-1 rounded-xl bg-(--ui-bg-elevated) mb-6"},to={class:"space-y-6"},oo={class:"flex items-center gap-2 mb-4"},no={class:"size-7 rounded-lg bg-(--ui-bg-elevated) flex items-center justify-center"},lo={class:"text-sm font-medium text-(--ui-text-highlighted)"},ao={class:"grid gap-4"},so={class:"w-28 shrink-0"},io={class:"text-sm font-medium text-(--ui-text-highlighted)"},ro={class:"text-xs text-(--ui-text-muted)"},uo={class:"flex-1"},mo={class:"space-y-4"},po={class:"flex items-center justify-between"},co={class:"text-sm text-(--ui-text-muted)"},fo={key:0,class:"flex flex-col items-center justify-center py-16 rounded-xl border-2 border-dashed border-(--ui-border)"},vo={class:"size-16 rounded-2xl bg-(--ui-bg-elevated) flex items-center justify-center mb-4"},go={class:"space-y-2"},bo=["onDragstart","onDrop"],yo={class:"size-8 rounded-lg bg-(--ui-bg-elevated) flex items-center justify-center text-sm font-medium text-(--ui-text-muted) shrink-0"},xo={class:"flex-1 min-w-0"},_o={class:"flex items-center gap-2 mb-1"},ho={class:"font-medium text-(--ui-text-highlighted) truncate"},wo={class:"flex items-center gap-4 text-xs text-(--ui-text-muted)"},ko={class:"font-mono bg-(--ui-bg-elevated) px-1.5 py-0.5 rounded"},So={class:"flex items-center gap-1"},Vo={class:"flex items-center gap-1"},Co={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Po={class:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 opacity-0 group-hover:opacity-100 transition-opacity"},Do={class:"flex items-center justify-between w-full"},zo={class:"text-sm text-(--ui-text-muted)"},qo={key:0},Eo={key:1},Mo={class:"flex gap-2"},$o={key:0,class:"space-y-5"},To={class:"grid grid-cols-2 gap-4"},Bo={class:"grid grid-cols-3 gap-4"},Ko={class:"flex items-center gap-6 py-2"},Ro={class:"flex items-center gap-2.5 cursor-pointer select-none"},Uo={class:"flex items-center gap-2.5 cursor-pointer select-none"},Io={class:"flex items-center gap-2.5 cursor-pointer select-none"},Ao={class:"flex justify-end gap-2"},jo=F({__name:"Edit",props:{dialog:{type:Boolean,default:!1},currentForm:{default:()=>({})}},emits:["update:dialog","refresh"],setup(s,{emit:i}){const n=s,a=i,v=D({get:()=>n.dialog,set:c=>a("update:dialog",c)}),y=()=>{v.value=!1},m=Ye("formRef"),r=Xe(),V=xt({name:ht().nonempty("预设名称不能为空"),state:_t().min(0)}),C=[{label:"启用",value:2},{label:"关闭",value:1}],q=[{label:"system",value:"system"},{label:"user",value:"user"},{label:"assistant",value:"assistant"}],o=he({loading:!1,form:{},activeTab:"params",params:{temperature:1,top_p:1,top_k:40,frequency_penalty:0,presence_penalty:0,repetition_penalty:1,openai_max_tokens:4096,openai_max_context:128e3},prompts:[],editingPrompt:null,editingIndex:-1,showPromptModal:!1}),x=[{title:"生成控制",icon:"lucide:sliders-horizontal",items:[{key:"temperature",label:"温度",desc:"控制随机性",min:0,max:2,step:.01},{key:"top_p",label:"Top P",desc:"核采样阈值",min:0,max:1,step:.01},{key:"top_k",label:"Top K",desc:"候选词数量",min:1,max:100,step:1}]},{title:"惩罚参数",icon:"lucide:shield",items:[{key:"frequency_penalty",label:"频率惩罚",desc:"降低重复词频率",min:-2,max:2,step:.01},{key:"presence_penalty",label:"存在惩罚",desc:"鼓励新话题",min:-2,max:2,step:.01},{key:"repetition_penalty",label:"重复惩罚",desc:"避免重复内容",min:0,max:2,step:.01}]},{title:"Token 限制",icon:"lucide:hash",items:[{key:"openai_max_tokens",label:"最大输出",desc:"单次回复上限",min:1,max:32e3,step:1},{key:"openai_max_context",label:"上下文长度",desc:"总上下文窗口",min:1,max:2e5,step:1}]}],w=c=>{try{const t=JSON.parse(c);x.forEach(k=>k.items.forEach(j=>{t[j.key]!==void 0&&(o.params[j.key]=t[j.key])})),o.prompts=Array.isArray(t.prompts)?t.prompts:[]}catch{P()}},P=()=>{o.params={temperature:1,top_p:1,top_k:40,frequency_penalty:0,presence_penalty:0,repetition_penalty:1,openai_max_tokens:4096,openai_max_context:128e3},o.prompts=[]},M=()=>JSON.stringify({...o.params,prompts:o.prompts});async function T(){o.loading=!0;try{const c=ae(o.form);c.content=M();const{error:t}=await(c.id?vt:gt)(c);t||(r.add({title:"保存成功",color:"success"}),y(),a("refresh"))}finally{o.loading=!1}}const b=O(null),f=c=>{b.value=c},p=c=>{c.preventDefault()},g=c=>{if(b.value===null||b.value===c)return;const k=o.prompts.splice(b.value,1)[0];k&&(o.prompts.splice(c,0,k),b.value=null)},S=()=>{b.value=null},E=()=>{o.editingPrompt={identifier:"",name:"",enabled:!0,role:"system",system_prompt:!1,marker:!1,content:"",injection_depth:4,injection_order:100},o.editingIndex=-1,o.showPromptModal=!0},G=c=>{const t=o.prompts[c];t&&(o.editingPrompt=ae(t),o.editingIndex=c,o.showPromptModal=!0)},R=()=>{if(o.editingPrompt){if(!o.editingPrompt.identifier||!o.editingPrompt.name){r.add({title:"请填写标识符和名称",color:"error"});return}o.editingIndex===-1?o.prompts.push(o.editingPrompt):o.prompts[o.editingIndex]=o.editingPrompt,o.showPromptModal=!1}},H=c=>{o.prompts.splice(c,1)};return We(()=>n.dialog,c=>{c&&(o.loading=!1,o.activeTab="params",o.form=ae(n.currentForm),o.form.content?w(o.form.content):P())}),(c,t)=>{const k=lt,j=at,U=Je,L=ke,N=Gt,B=se,oe=Se,re=dt,Me=mt,ue=pt,$e=ct,Te=ft;return _(),K(Z,null,[d(Me,{open:e(v),"onUpdate:open":t[5]||(t[5]=u=>Ge(v)?v.value=u:null),title:s.currentForm.id?"编辑预设":"新建预设",description:"配置模型采样参数和提示词",ui:{content:"max-w-3xl"}},{body:h(()=>[d(re,{ref_key:"formRef",ref:m,schema:e(V),state:e(o).form,onSubmit:T},{default:h(()=>[l("div",Jt,[l("div",Zt,[t[17]||(t[17]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},"预设名称",-1)),d(k,{modelValue:e(o).form.name,"onUpdate:modelValue":t[0]||(t[0]=u=>e(o).form.name=u),modelModifiers:{trim:!0},placeholder:"输入预设名称",size:"lg"},null,8,["modelValue"])]),l("div",Qt,[t[18]||(t[18]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},"状态",-1)),d(j,{modelValue:e(o).form.state,"onUpdate:modelValue":t[1]||(t[1]=u=>e(o).form.state=u),items:C,size:"lg"},null,8,["modelValue"])])]),l("div",eo,[l("button",{type:"button",class:J(["flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all",e(o).activeTab==="params"?"bg-(--ui-bg) text-(--ui-text-highlighted) shadow-sm":"text-(--ui-text-muted) hover:text-(--ui-text)"]),onClick:t[2]||(t[2]=u=>e(o).activeTab="params")},[d(U,{name:"lucide:sliders-horizontal",class:"size-4"}),t[19]||(t[19]=A(" 采样参数 ",-1))],2),l("button",{type:"button",class:J(["flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all",e(o).activeTab==="prompts"?"bg-(--ui-bg) text-(--ui-text-highlighted) shadow-sm":"text-(--ui-text-muted) hover:text-(--ui-text)"]),onClick:t[3]||(t[3]=u=>e(o).activeTab="prompts")},[d(U,{name:"lucide:message-square-text",class:"size-4"}),t[20]||(t[20]=A(" 提示词 ",-1)),e(o).prompts.length?(_(),$(L,{key:0,size:"xs",color:"primary",variant:"solid"},{default:h(()=>[A(I(e(o).prompts.length),1)]),_:1})):X("",!0)],2)]),ge(l("div",to,[(_(),K(Z,null,le(x,u=>l("div",{key:u.title},[l("div",oo,[l("div",no,[d(U,{name:u.icon,class:"size-4 text-(--ui-text-muted)"},null,8,["name"])]),l("span",lo,I(u.title),1)]),l("div",ao,[(_(!0),K(Z,null,le(u.items,z=>(_(),K("div",{key:z.key,class:"flex items-center gap-4 p-4 rounded-xl border border-(--ui-border) bg-(--ui-bg) hover:border-(--ui-border-accented) transition-colors"},[l("div",so,[l("p",io,I(z.label),1),l("p",ro,I(z.desc),1)]),l("div",uo,[d(N,{modelValue:e(o).params[z.key],"onUpdate:modelValue":Y=>e(o).params[z.key]=Y,min:z.min,max:z.max,step:z.step,size:"sm"},null,8,["modelValue","onUpdate:modelValue","min","max","step"])]),d(k,{modelValue:e(o).params[z.key],"onUpdate:modelValue":Y=>e(o).params[z.key]=Y,modelModifiers:{number:!0},type:"number",min:z.min,max:z.max,step:z.step,class:"w-28 text-center",size:"sm"},null,8,["modelValue","onUpdate:modelValue","min","max","step"])]))),128))])])),64))],512),[[be,e(o).activeTab==="params"]]),ge(l("div",mo,[l("div",po,[l("p",co,[d(U,{name:"lucide:info",class:"size-4 inline-block mr-1"}),t[21]||(t[21]=A(" 拖拽条目可调整顺序 ",-1))]),d(B,{size:"sm",icon:"lucide:plus",label:"添加条目",onClick:E})]),e(o).prompts.length?X("",!0):(_(),K("div",fo,[l("div",vo,[d(U,{name:"lucide:file-text",class:"size-8 text-(--ui-text-dimmed)"})]),t[22]||(t[22]=l("p",{class:"text-(--ui-text-muted) mb-1"}," 暂无提示词条目 ",-1)),t[23]||(t[23]=l("p",{class:"text-sm text-(--ui-text-dimmed) mb-4"}," 添加提示词来定制模型行为 ",-1)),d(B,{size:"sm",variant:"soft",icon:"lucide:plus",label:"添加第一个条目",onClick:E})])),l("div",go,[(_(!0),K(Z,null,le(e(o).prompts,(u,z)=>(_(),K("div",{key:u.identifier+z,draggable:"true",class:J(["group relative flex items-center gap-3 p-4 rounded-xl border border-(--ui-border) bg-(--ui-bg) hover:shadow-md transition-all cursor-grab active:cursor-grabbing",{"opacity-40 scale-95":e(b)===z,"ring-2 ring-primary ring-offset-2":e(b)!==null&&e(b)!==z}]),onDragstart:Y=>f(z),onDragover:p,onDrop:Y=>g(z),onDragend:S},[l("div",yo,I(z+1),1),l("div",xo,[l("div",_o,[l("span",ho,I(u.name),1),u.system_prompt?(_(),$(L,{key:0,size:"xs",color:"info",variant:"subtle"},{default:h(()=>[...t[24]||(t[24]=[A(" 系统 ",-1)])]),_:1})):X("",!0),u.marker?(_(),$(L,{key:1,size:"xs",color:"warning",variant:"subtle"},{default:h(()=>[...t[25]||(t[25]=[A(" 标记 ",-1)])]),_:1})):X("",!0),u.enabled?X("",!0):(_(),$(L,{key:2,size:"xs",color:"neutral",variant:"subtle"},{default:h(()=>[...t[26]||(t[26]=[A(" 已禁用 ",-1)])]),_:1}))]),l("div",wo,[l("span",ko,I(u.identifier),1),l("span",So,[d(U,{name:"lucide:layers",class:"size-3"}),A(" 深度 "+I(u.injection_depth),1)]),l("span",Vo,[d(U,{name:"lucide:arrow-up-down",class:"size-3"}),A(" 顺序 "+I(u.injection_order),1)])])]),l("div",Co,[d(oe,{text:"编辑"},{default:h(()=>[d(B,{size:"xs",color:"neutral",variant:"ghost",icon:"lucide:pencil",onClick:Y=>G(z)},null,8,["onClick"])]),_:2},1024),d(oe,{text:u.enabled?"禁用":"启用"},{default:h(()=>[d(B,{size:"xs",color:u.enabled?"success":"neutral",variant:"ghost",icon:u.enabled?"lucide:toggle-right":"lucide:toggle-left",onClick:Y=>u.enabled=!u.enabled},null,8,["color","icon","onClick"])]),_:2},1032,["text"]),d(oe,{text:"删除"},{default:h(()=>[d(B,{size:"xs",color:"error",variant:"ghost",icon:"lucide:trash-2",onClick:Y=>H(z)},null,8,["onClick"])]),_:2},1024)]),l("div",Po,[d(U,{name:"lucide:grip-vertical",class:"size-4 text-(--ui-text-dimmed)"})])],42,bo))),128))])],512),[[be,e(o).activeTab==="prompts"]])]),_:1},8,["schema","state"])]),footer:h(()=>[l("div",Do,[l("div",zo,[e(o).activeTab==="params"?(_(),K("span",qo,I(x.flatMap(u=>u.items).length)+" 个参数",1)):(_(),K("span",Eo,I(e(o).prompts.length)+" 个提示词条目",1))]),l("div",Mo,[d(B,{label:"取消",color:"neutral",variant:"ghost",onClick:y}),d(B,{loading:e(o).loading,label:"保存预设",icon:"lucide:check",onClick:t[4]||(t[4]=u=>e(m)?.submit())},null,8,["loading"])])])]),_:1},8,["open","title"]),d(Te,{open:e(o).showPromptModal,"onUpdate:open":t[16]||(t[16]=u=>e(o).showPromptModal=u),title:e(o).editingIndex===-1?"添加提示词":"编辑提示词",description:"配置提示词的标识符、角色、注入参数和内容",ui:{content:"max-w-sm"}},{body:h(()=>[e(o).editingPrompt?(_(),K("div",$o,[l("div",To,[l("div",null,[t[27]||(t[27]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},[A(" 标识符 "),l("span",{class:"text-red-500"},"*")],-1)),d(k,{modelValue:e(o).editingPrompt.identifier,"onUpdate:modelValue":t[6]||(t[6]=u=>e(o).editingPrompt.identifier=u),placeholder:"唯一标识，如 main"},null,8,["modelValue"])]),l("div",null,[t[28]||(t[28]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},[A(" 名称 "),l("span",{class:"text-red-500"},"*")],-1)),d(k,{modelValue:e(o).editingPrompt.name,"onUpdate:modelValue":t[7]||(t[7]=u=>e(o).editingPrompt.name=u),placeholder:"显示名称"},null,8,["modelValue"])])]),l("div",Bo,[l("div",null,[t[29]||(t[29]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},"角色",-1)),d(j,{modelValue:e(o).editingPrompt.role,"onUpdate:modelValue":t[8]||(t[8]=u=>e(o).editingPrompt.role=u),items:q},null,8,["modelValue"])]),l("div",null,[t[30]||(t[30]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},"注入深度",-1)),d(k,{modelValue:e(o).editingPrompt.injection_depth,"onUpdate:modelValue":t[9]||(t[9]=u=>e(o).editingPrompt.injection_depth=u),modelModifiers:{number:!0},type:"number",min:0},null,8,["modelValue"])]),l("div",null,[t[31]||(t[31]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},"注入顺序",-1)),d(k,{modelValue:e(o).editingPrompt.injection_order,"onUpdate:modelValue":t[10]||(t[10]=u=>e(o).editingPrompt.injection_order=u),modelModifiers:{number:!0},type:"number",min:0},null,8,["modelValue"])])]),l("div",Ko,[l("label",Ro,[d(ue,{modelValue:e(o).editingPrompt.enabled,"onUpdate:modelValue":t[11]||(t[11]=u=>e(o).editingPrompt.enabled=u)},null,8,["modelValue"]),t[32]||(t[32]=l("span",{class:"text-sm"},"启用",-1))]),l("label",Uo,[d(ue,{modelValue:e(o).editingPrompt.system_prompt,"onUpdate:modelValue":t[12]||(t[12]=u=>e(o).editingPrompt.system_prompt=u)},null,8,["modelValue"]),t[33]||(t[33]=l("span",{class:"text-sm"},"系统提示词",-1))]),l("label",Io,[d(ue,{modelValue:e(o).editingPrompt.marker,"onUpdate:modelValue":t[13]||(t[13]=u=>e(o).editingPrompt.marker=u)},null,8,["modelValue"]),t[34]||(t[34]=l("span",{class:"text-sm"},"标记",-1))])]),l("div",null,[t[35]||(t[35]=l("label",{class:"text-sm font-medium text-(--ui-text) mb-1.5 block"},"内容",-1)),d($e,{modelValue:e(o).editingPrompt.content,"onUpdate:modelValue":t[14]||(t[14]=u=>e(o).editingPrompt.content=u),placeholder:"提示词内容，可留空用于占位",rows:5,class:"w-full",autoresize:""},null,8,["modelValue"])])])):X("",!0)]),footer:h(()=>[l("div",Ao,[d(B,{label:"取消",color:"neutral",variant:"ghost",onClick:t[15]||(t[15]=u=>e(o).showPromptModal=!1)}),d(B,{label:"确定",onClick:R})])]),_:1},8,["open","title"])],64)}}}),Fo=Object.assign(jo,{__name:"CommonModelPresetEdit"}),xe={2:["启用","success"],4:["关闭","error"]},No=[{accessorKey:"id",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},header:()=>ne(se,{color:"neutral",variant:"ghost",label:"ID",class:"-mx-2.5 hover:bg-transparent focus:bg-transparent data-[state=open]:bg-transparent"})},{accessorKey:"name",header:"名称"},{accessorKey:"state",meta:{class:{th:"w-[100px]",td:"w-[80px]"}},header:"状态",formItemProps:{component:"Select",componentProps:{options:[{label:"启动",value:2},{label:"关闭",value:4}]}},cell:({row:s})=>ne(ke,{class:"capitalize",variant:"subtle",color:xe[s.original.state]?.[1]},()=>xe[s.original.state]?.[0])},{accessorKey:"updated_at",header:"更新时间",cell:({row:s})=>St(s.original.updated_at)}],Oo={key:0,class:"absolute top-0 left-0 right-0 h-(--ui-header-height) flex items-center justify-between border-b border-(--ui-border) px-4 sm:px-6 bg-(--ui-bg)"},Ho={class:"flex items-center gap-4"},hn=F({name:"CommonModelPresetList",__name:"preset",setup(s){const n=wt(kt).smaller("lg"),a=O(),v=se,y=Vt(),m=he({isDialog:!1,currentForm:{},factoryOwnerOptions:[]}),r=async x=>{m.isDialog=!0,x?m.currentForm=ae(x):m.currentForm={state:2}},V=async()=>{a.value.reload(),m.isDialog=!1},C=async x=>{const{error:w}=await yt({id:x.id});w||a.value.reload()};function q(x){return[{label:"编辑",icon:"material-symbols:edit-square-outline",onSelect(){r(x.original)}},{type:"separator"},{label:"删除",icon:"material-symbols:contract-delete-outline-rounded",color:"error",onSelect(){y.open({color:"error",title:"删除数据",description:"您确定要删除吗？",onPositiveClick(){C(x.original)}})}}]}const o=[...No,{id:"actions",meta:{class:{th:"w-[80px]",td:"w-[80px]"}},cell:({row:x})=>ne("div",{class:"text-right"},ne(Be,{content:{align:"end"},items:q(x)},()=>ne(se,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"})))}];return(x,w)=>{const P=et,M=Qe,T=tt,b=nt,f=ot,p=Fo;return _(),K(Z,null,[d(f,{ui:{body:"pb-[12px]! gap-0!"}},Ze({body:h(()=>[e(n)?X("",!0):(_(),K("div",Oo,[l("div",Ho,[d(P),d(T)]),d(e(v),{label:"新增",icon:"i-lucide-plus",onClick:w[1]||(w[1]=g=>r(null))})])),d(b,{ref_key:"tableRef",ref:a,"data-request":e(bt),columns:o,"scroll-x":"min-w-[100px]"},null,8,["data-request"])]),_:2},[e(n)?{name:"header",fn:h(()=>[d(M,{title:"模型预设列表"},{leading:h(()=>[d(P)]),right:h(()=>[d(e(v),{label:"新增",icon:"i-lucide-plus",onClick:w[0]||(w[0]=g=>r(null))})]),_:1})]),key:"0"}:void 0]),1024),d(p,{dialog:e(m).isDialog,"onUpdate:dialog":w[2]||(w[2]=g=>e(m).isDialog=g),"current-form":e(m).currentForm,onRefresh:V},null,8,["dialog","current-form"])],64)}}});export{hn as default};
