import{n as v,_ as k,a as w}from"./DiI9-bkE.js";import{_ as T}from"./Bml5z8l2.js";import{_ as B}from"./CuFgEFCp.js";import{f as C}from"./CE7u-7DH.js";import{k as D}from"./B33qAI9M.js";import{p as z,j as N,z as s,a1 as V,a2 as m,Q as o,a7 as n,u as e,a5 as f,a6 as c,A as i,W as $,ah as A,ae as I,R as U,c as x,r as j}from"./Cp_GvCOL.js";import"./CM1DIlR0.js";import"./B3KMLFeu.js";import"./BlLzDdHJ.js";import"./DaMwIZ4f.js";import"./BnfZ4xmv.js";import"./CangPKqO.js";import"./C8Jf-TuN.js";const H={class:"mb-4 flex items-center gap-2"},L={key:0,class:"flex items-center justify-center py-20"},M={key:1,class:"space-y-3"},R={class:"flex items-center gap-2 mb-2"},E={class:"text-xs text-(--ui-text-muted)"},F={class:"text-sm whitespace-pre-wrap"},Q={key:2,class:"text-center py-20 text-(--ui-text-muted)"},st=z({name:"MemberChatHistory",__name:"[id]",setup(S){const d=v(),u=x(()=>d.params.uid),g=x(()=>d.params.id),t=j({loading:!1,list:[]}),h=async()=>{t.loading=!0;try{const{data:r}=await D({uid:u.value,biz_id:g.value});t.list=r?.history||[]}finally{t.loading=!1}};return N(()=>h()),(r,l)=>{const y=k,p=T,_=w,b=B;return s(),V(b,null,{default:m(()=>[o("div",H,[n(y,{icon:"i-lucide-arrow-left",color:"neutral",variant:"ghost",to:`/member/chat/${e(u)}`},null,8,["to"]),l[0]||(l[0]=o("h2",{class:"text-lg font-semibold"},"聊天历史",-1)),n(p,{color:"neutral",variant:"subtle"},{default:m(()=>[f("共 "+c(e(t).list.length)+" 条",1)]),_:1})]),e(t).loading?(s(),i("div",L,[n(_,{name:"i-lucide-loader",class:"w-8 h-8 animate-spin text-(--ui-text-muted)"})])):(s(),i("div",M,[(s(!0),i($,null,A(e(t).list,a=>(s(),i("div",{key:a._id,class:I(["p-4 rounded-xl border border-(--ui-border)",a.role==="assistant"?"bg-(--ui-bg-elevated)":"bg-(--ui-bg)"])},[o("div",R,[n(p,{color:a.role==="assistant"?"primary":"neutral",variant:"subtle",size:"xs"},{default:m(()=>[f(c(a.role==="assistant"?"AI":"用户"),1)]),_:2},1032,["color"]),o("span",E,c(("formatToDateTime"in r?r.formatToDateTime:e(C))(a.created_at)),1)]),o("div",F,c(a.content),1)],2))),128))])),!e(t).loading&&e(t).list.length===0?(s(),i("div",Q,[n(_,{name:"i-lucide-message-circle-x",class:"w-12 h-12 mx-auto mb-2 opacity-50"}),l[1]||(l[1]=o("p",null,"暂无聊天历史",-1))])):U("",!0)]),_:1})}}});export{st as default};
